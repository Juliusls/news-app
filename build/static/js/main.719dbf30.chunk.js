(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{359:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r(21),c=r.n(a),i=r(3),o=r.n(i),s=r(8),l=r(13),u=r(25),d=r(11),p=r(448),j=r(20),b=r(409),f=r(6),m=r(458),h=r(420),x=r(421),O=r(212),g=r(76),v=r(213),y=r(459),w=r(366),N=r(146),C=r.n(N),T=r(114),A=r.n(T),S=r(188),k=r.n(S),R=r(185),I=r.n(R),E=r(411),D=r(1),P=Object(b.a)((function(e){return{icons:{fill:e.icons.fill,fontSize:e.icons.fontSize},label:{color:"white"}}})),B=function(){var e=Object(u.f)(),t=P(),r=Object(n.useState)(!1),a=Object(j.a)(r,2),c=a[0],i=a[1],o=Object(n.useState)(""),s=Object(j.a)(o,2),l=s[0],d=s[1];return Object(D.jsxs)("div",{style:{display:"inline-block"},children:[Object(D.jsx)(E.a,{label:"Search",type:"search",id:"searchInput",value:l,onChange:function(e){d(e.target.value)},variant:"outlined",onKeyPress:function(t){13===t.charCode&&(t.preventDefault(),i(!1),e.push("/search/".concat(l)),d(""))},InputLabelProps:{classes:{root:t.label}},style:{display:c?"inline-block":"none"}}),Object(D.jsx)(O.a,{onClick:function(){i(!c)},id:"searchFieldButton",children:Object(D.jsx)(I.a,{className:t.icons})})]})},_=r(9),W=r(457),L=r(415),F=r(416),M=r(417),G=r(186),U=r.n(G),V=r(418),q=["Business","Cars","Entertainment","Family","Health","Politics","Religion","Science","Sport","Technology","Travel","World"],z=[{text:"Writer log in",linkText:"login"},{text:"Become a writer",linkText:"signup"}],H=["My Favorites","My Subscriptions"].concat(q),Y=Object(b.a)((function(e){return{list:{width:250},icon:{fontSize:e.icons.fontSize,fill:e.icons.fill},drawerpadding:{padding:0},listItemText:{primary:e.palette.text.primary},paper:{background:e.palette.primary.lighter},paperAnchorDockedLeft:{borderRight:0},drawerHeader:Object(_.a)({display:"flex",alignItems:"center",background:e.palette.primary.main,justifyContent:"flex-start",padding:e.spacing(0,1),marginTop:"0"},e.mixins.toolbar),divider:{background:e.palette.primary.light}}})),J=function(e){var t=e.leftSideMenuIsOpen,r=e.setLeftSideMenuIsOpenIsOpen,n=Y(),a=Object(d.c)((function(e){return e.reader}))?H:q;return Object(D.jsx)(W.a,{classes:{paper:n.paper,paperAnchorDockedLeft:n.paperAnchorDockedLeft},anchor:"left",variant:"persistent",open:t,onClose:function(){return r(!1)},children:Object(D.jsx)("div",{className:n.list,role:"button",onClick:function(){return r(!1)},onKeyDown:function(){return r(!1)},children:Object(D.jsxs)(L.a,{className:n.drawerpadding,children:[Object(D.jsx)("div",{className:n.drawerHeader,children:Object(D.jsx)(O.a,{onClick:function(){return r(!1)},children:Object(D.jsx)(U.a,{className:n.icon})})}),a.map((function(e){return Object(D.jsx)(l.b,{style:{textDecoration:"none",color:"inherit"},to:"/genres/".concat(e),children:Object(D.jsx)(F.a,{button:!0,children:Object(D.jsx)(M.a,{primary:e,className:n.listItemText})})},e)})),Object(D.jsx)(V.a,{light:!0,classes:{light:n.divider}}),Object(D.jsx)(l.b,{style:{textDecoration:"none",color:"inherit"},to:"/allwriters",children:Object(D.jsx)(F.a,{button:!0,children:Object(D.jsx)(M.a,{primary:"All Writers",className:n.listItemText})})}),Object(D.jsx)(V.a,{light:!0,classes:{light:n.divider}}),z.map((function(e){return Object(D.jsx)(l.b,{style:{textDecoration:"none",color:"grey"},to:"/writerssection/".concat(e.linkText),children:Object(D.jsx)(F.a,{button:!0,children:Object(D.jsx)(M.a,{primary:e.text,className:n.listItemText})})},e.linkText)}))]})})})},K=r(17),$=r.n(K),Q="".concat("http://localhost:3001","/api/reader/login"),X=function(){var e=Object(s.a)(o.a.mark((function e(t){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.a.post(Q,t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z={login:X},ee=function(e){return function(){var t=Object(s.a)(o.a.mark((function t(r){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Z.login(e);case 2:n=t.sent,r({type:"ADD_READER",data:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_READER":case"REMOVE_READER":return t.data;default:return e}},re=r(419),ne="".concat("http://localhost:3001","/api/writer/login"),ae=function(){var e=Object(s.a)(o.a.mark((function e(t){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.a.post(ne,t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ce={login:ae},ie=function(e){return function(){var t=Object(s.a)(o.a.mark((function t(r){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ce.login(e);case 2:n=t.sent,r({type:"ADD_WRITER",data:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_WRITER":case"REMOVE_WRITER":return t.data;default:return e}},se={open:!1,message:"",messageType:""},le=function(e){return function(t){t({type:"NOTIFICATION",data:{open:!0,message:e,messageType:"success"}}),setTimeout((function(){t({type:"NOTIFICATION",data:{open:!1,message:"",messageType:"success"}})}),6e3)}},ue=function(e){return function(t){t({type:"NOTIFICATION",data:{open:!0,message:e,messageType:"error"}}),setTimeout((function(){t({type:"NOTIFICATION",data:{open:!1,message:"",messageType:"error"}})}),6e3)}},de=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NOTIFICATION":return t.data;default:return e}},pe=Object(b.a)((function(e){return{appbar:{background:e.primary},root:{flexGrow:1,marginBottom:25},leftElement:{flex:1,display:"flex",justifyContent:"center"},leftElementChild:{marginRight:"auto"},rightElement:{flex:1,display:"flex",justifyContent:"center"},rightElementChild:{marginLeft:"auto"},menuIcon:{fill:e.icons.fill,fontSize:e.icons.fontSize},titleText:{textDecoration:"none",color:"inherit"},button:{marginRight:10},accountIcon:{fill:e.icons.fill,fontSize:e.icons.fontSize},signUpButton:{color:e.palette.secondary},menuItem:{color:e.palette.text.secondary},linkNoDecoration:{textDecoration:"none"},toolbar:e.mixins.toolbar}})),je=Object(f.a)((function(e){return{tooltip:{backgroundColor:e.palette.primary.main,fontSize:15}}}))(m.a),be=function(){var e=Object(d.b)(),t=Object(u.f)(),r=Object(d.c)((function(e){return e.reader})),a=Object(d.c)((function(e){return e.writer})),c=Object(d.c)((function(e){return e.readerImages})),i=Object(d.c)((function(e){return e.writerImages})),o=pe(),s=Object(n.useState)(!1),p=Object(j.a)(s,2),b=p[0],f=p[1],m=Object(re.a)(["readerAuthCookie","writerAuthCookie"]),N=Object(j.a)(m,3),T=(N[0],N[1],N[2]),S=r&&c.filter((function(e){return e.reader===r.id}))[0].img.data.data,R=btoa(new Uint8Array(S).reduce((function(e,t){return e+String.fromCharCode(t)}),"")),I=a&&i.filter((function(e){return e.writer===a.id}))[0].img.data.data,E=I&&btoa(new Uint8Array(I).reduce((function(e,t){return e+String.fromCharCode(t)}),""));return Object(D.jsxs)("div",{className:o.root,children:[Object(D.jsx)(J,{leftSideMenuIsOpen:b,setLeftSideMenuIsOpenIsOpen:f}),Object(D.jsx)(h.a,{position:"fixed",className:o.appbar,children:Object(D.jsxs)(x.a,{children:[Object(D.jsx)("div",{className:o.leftElement,children:Object(D.jsx)(O.a,{className:o.leftElementChild,color:"inherit",id:"leftSideMenuButton","aria-label":"menu",onClick:function(){f(!0)},style:{display:a?"none":"block"},children:Object(D.jsx)(k.a,{className:o.menuIcon})})}),a?Object(D.jsx)(g.a,{variant:"h6",className:o.titleText,children:"News App"}):Object(D.jsx)(g.a,{component:l.b,to:"/",variant:"h6",id:"newsAppHome",className:o.titleText,children:"News App"}),r&&!a?Object(D.jsx)("div",{className:o.rightElement,children:Object(D.jsxs)("div",{className:o.rightElementChild,children:[Object(D.jsx)(je,{TransitionComponent:v.a,TransitionProps:{timeout:600},title:"Search",children:Object(D.jsx)("span",{children:Object(D.jsx)(B,{})})}),Object(D.jsx)(je,{TransitionComponent:v.a,TransitionProps:{timeout:600},title:"Profile",children:Object(D.jsx)("span",{children:Object(D.jsx)(O.a,{"aria-controls":"menu-appbar","aria-haspopup":"true",className:"readerProfileAvatarButton",component:l.b,to:"/reader/profile/".concat(r.id),children:Object(D.jsx)(y.a,{alt:"Reader Profile Picture",src:"data:image/jpeg;base64,".concat(R)})})})}),Object(D.jsx)(je,{TransitionComponent:v.a,TransitionProps:{timeout:600},title:"Log out",children:Object(D.jsx)("span",{children:Object(D.jsx)(O.a,{"aria-controls":"menu-appbar","aria-haspopup":"true",className:"readerLogoutButton",onClick:function(){e((function(e){e({type:"REMOVE_READER",data:null})})),e(le("Logged out successfully")),T("readerAuthCookie",{path:"/"}),t.push("/")},children:Object(D.jsx)(C.a,{className:o.accountIcon})})})})]})}):a&&!r?Object(D.jsx)("div",{className:o.rightElement,children:Object(D.jsxs)("div",{className:o.rightElementChild,children:[Object(D.jsx)(je,{TransitionComponent:v.a,TransitionProps:{timeout:600},title:"Write an article",children:Object(D.jsx)("span",{children:Object(D.jsx)(O.a,{"aria-controls":"menu-appbar","aria-haspopup":"true",component:l.b,to:"/writerssection/newarticle",id:"newArticleIcon",children:Object(D.jsx)(A.a,{className:o.accountIcon})})})}),Object(D.jsx)(je,{TransitionComponent:v.a,TransitionProps:{timeout:600},title:"Profile",children:Object(D.jsx)("span",{children:Object(D.jsx)(O.a,{"aria-controls":"menu-appbar","aria-haspopup":"true",component:l.b,to:"/writerssection/profile/".concat(a.id),children:Object(D.jsx)(y.a,{alt:"Writers Profile Picture",src:"data:image/jpeg;base64,".concat(E)})})})}),Object(D.jsx)(je,{TransitionComponent:v.a,TransitionProps:{timeout:600},title:"Log out",children:Object(D.jsx)("span",{children:Object(D.jsx)(O.a,{"aria-controls":"menu-appbar",className:"writerLogoutButton","aria-haspopup":"true",onClick:function(){e((function(e){e({type:"REMOVE_WRITER",data:null})})),e(le("Logged out successfully")),T("writerAuthCookie",{path:"/"}),t.push("/")},children:Object(D.jsx)(C.a,{className:o.accountIcon})})})})]})}):Object(D.jsx)("div",{className:o.rightElement,children:Object(D.jsxs)("div",{className:o.rightElementChild,children:[Object(D.jsx)(B,{}),Object(D.jsx)(w.a,{color:"inherit",to:"/reader/login",component:l.b,className:o.button,children:"Log in"}),Object(D.jsx)(w.a,{variant:"contained",to:"/reader/signup",component:l.b,className:o.signUpButton,children:"Sign Up"})]})})]})}),Object(D.jsx)("div",{className:o.toolbar})]})},fe=r(433),me=r(427),he=r(428),xe=r(430),Oe=r(429),ge=r(45),ve="".concat("http://localhost:3001","/api/articles"),ye=function(){var e=Object(s.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.a.get(ve);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),we=function(){var e=Object(s.a)(o.a.mark((function e(t){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.a.post(ve,t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ne=function(){var e=Object(s.a)(o.a.mark((function e(t,r){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.a.put("".concat(ve,"/").concat(r),t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),Ce=function(){var e=Object(s.a)(o.a.mark((function e(t,r){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.a.post("".concat(ve,"/").concat(r,"/comments"),t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),Te={getAll:ye,create:we,update:Ne,postComment:Ce},Ae=function(){return function(){var e=Object(s.a)(o.a.mark((function e(t){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Te.getAll();case 2:r=e.sent,t({type:"INIT_ARTICLES",data:r});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Se=function(e){return function(){var t=Object(s.a)(o.a.mark((function t(r){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r({type:"CREATE_ARTICLE",data:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},ke=function(e){return function(){var t=Object(s.a)(o.a.mark((function t(r){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={views:e.views+1},t.next=3,Te.update(n,e.id);case 3:r({type:"ADD_VIEW_TO_ARTICLE",data:e.id});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Re=function(e,t,r){return function(){var n=Object(s.a)(o.a.mark((function n(a){var c,i;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Te.postComment(e,t);case 2:c=n.sent,i=Object(_.a)(Object(_.a)({},c),{},{commentator:r}),a({type:"ADD_COMMENT",data:i});case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},Ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_ARTICLES":return t.data;case"CREATE_ARTICLE":return[].concat(Object(ge.a)(e),[t.data]);case"ADD_VIEW_TO_ARTICLE":return e.map((function(e){return e.id===t.data?Object(_.a)(Object(_.a)({},e),{},{views:e.views+1}):e}));case"ADD_COMMENT":return e.map((function(e){return e.id===t.data.article?Object(_.a)(Object(_.a)({},e),{},{comments:e.comments.concat(t.data)}):e}));default:return e}},Ee="".concat("http://localhost:3001","/api/readers"),De=function(){var e=Object(s.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.a.get(Ee);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Pe=function(){var e=Object(s.a)(o.a.mark((function e(t){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.a.get("".concat(Ee,"/").concat(t));case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Be=function(){var e=Object(s.a)(o.a.mark((function e(t){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.a.post(Ee,t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_e=function(){var e=Object(s.a)(o.a.mark((function e(t,r){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.a.put("".concat(Ee,"/").concat(r),t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),We=function(){var e=Object(s.a)(o.a.mark((function e(t,r){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.a.post("".concat(Ee,"/").concat(r,"/subscriptions"),t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),Le={create:Be,getAll:De,getOne:Pe,update:_e,createSubscribtion:We},Fe=function(){return function(){var e=Object(s.a)(o.a.mark((function e(t){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Le.getAll();case 2:r=e.sent,t({type:"INIT_READERS",data:r});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Me=function(e){return function(){var t=Object(s.a)(o.a.mark((function t(r){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r({type:"CREATE_READER",data:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Ge=function(e,t){return function(){var r=Object(s.a)(o.a.mark((function r(n){var a,c,i;return o.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a={funds:t.funds,favoritewriters:t.favoritewriters.map((function(e){return e.id})).concat(e.id)},r.next=3,Le.update(a,t.id);case 3:c=r.sent,console.log("readerFromDb",c),i=Object(_.a)(Object(_.a)({},t),{},{favoritewriters:t.favoritewriters.concat(e)}),n({type:"ADD_FAVORITE_WRITER",data:i});case 7:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},Ue=function(e,t){return function(){var r=Object(s.a)(o.a.mark((function r(n){var a,c,i;return o.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a={favoritewriters:t.favoritewriters.map((function(e){return e.id})).filter((function(t){return t!==e.id}))},r.next=3,Le.update(a,t.id);case 3:c=r.sent,console.log("readerFromDb",c),i=Object(_.a)(Object(_.a)({},t),{},{favoritewriters:t.favoritewriters.filter((function(t){return t.id!==e.id}))}),n({type:"REMOVE_FAVORITE_WRITER",data:i});case 7:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},Ve=function(e,t){return function(){var r=Object(s.a)(o.a.mark((function r(n){var a,c;return o.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a={favoritewriters:t.favoritewriters.map((function(e){return e.id})),funds:t.funds+e},r.next=3,Le.update(a,t.id);case 3:c=r.sent,n({type:"UPDATE_READERS_FUNDS",data:c});case 5:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},qe=function(e,t){return function(){var r=Object(s.a)(o.a.mark((function r(n){var a,c;return o.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a={favoritewriters:t.favoritewriters.map((function(e){return e.id})),funds:t.funds-e},r.next=3,Le.update(a,t.id);case 3:c=r.sent,n({type:"UPDATE_READERS_FUNDS",data:c});case 5:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},ze=function(e){return function(){var t=Object(s.a)(o.a.mark((function t(r){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r({type:"REMOVE_SUBS_FROM_READERS",data:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},He=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_READERS":return t.data;case"CREATE_READER":return e.concat(t.data);case"UPDATE_READERS_FUNDS":return e.map((function(e){return e.id===t.data.id?Object(_.a)(Object(_.a)({},e),{},{funds:t.data.funds}):e}));case"ADD_FAVORITE_WRITER":case"REMOVE_FAVORITE_WRITER":return e.map((function(e){return e.id===t.data.id?t.data:e}));case"ADD_SUBSCRIPTION_TO_READER":return e.map((function(e){return e.id===t.data.subscriber.id?Object(_.a)(Object(_.a)({},e),{},{subscriptions:e.subscriptions.concat(t.data)}):e}));case"REMOVE_SUBS_FROM_READERS":return e.map((function(e){return Object(_.a)(Object(_.a)({},e),{},{subscriptions:e.subscriptions.filter((function(e){return!t.data.includes(e.id)}))})}));default:return e}},Ye="".concat("http://localhost:3001","/api/writers"),Je=function(){var e=Object(s.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.a.get(Ye);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ke=function(){var e=Object(s.a)(o.a.mark((function e(t){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.a.get("".concat(Ye,"/").concat(t));case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$e=function(){var e=Object(s.a)(o.a.mark((function e(t){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.a.post(Ye,t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Qe=function(){var e=Object(s.a)(o.a.mark((function e(t,r){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.a.put("".concat(Ye,"/").concat(r),t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),Xe={getAll:Je,getOne:Ke,create:$e,update:Qe},Ze=function(){return function(){var e=Object(s.a)(o.a.mark((function e(t){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xe.getAll();case 2:r=e.sent,t({type:"INIT_WRITERS",data:r});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},et=function(e){return function(){var t=Object(s.a)(o.a.mark((function t(r){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r({type:"ADD_NEW_WRITER",data:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},tt=function(e,t){return function(){var r=Object(s.a)(o.a.mark((function r(n){var a,c,i;return o.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a=Object(_.a)(Object(_.a)({},t),{},{followers:t.followers.map((function(e){return e.id})).concat(e.id)}),r.next=3,Xe.update(a,t.id);case 3:c=r.sent,console.log("writerFromDb",c),i=Object(_.a)(Object(_.a)({},t),{},{followers:t.followers.concat(e)}),n({type:"ADD_READER_TO_FOLLOWERS",data:i});case 7:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},rt=function(e,t){return function(){var r=Object(s.a)(o.a.mark((function r(n){var a,c,i;return o.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a=Object(_.a)(Object(_.a)({},t),{},{followers:t.followers.map((function(e){return e.id})).filter((function(t){return t!==e.id}))}),r.next=3,Xe.update(a,t.id);case 3:c=r.sent,console.log("writerFromDb",c),i=Object(_.a)(Object(_.a)({},t),{},{followers:t.followers.filter((function(t){return t.id!==e.id}))}),n({type:"REMOVE_READER_FROM_FOLLOWERS",data:i});case 7:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},nt=function(e,t){return function(){var r=Object(s.a)(o.a.mark((function r(n){var a,c;return o.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a=Object(_.a)(Object(_.a)({},t),{},{followers:t.followers.map((function(e){return e.id})),earnings:t.earnings+e}),r.next=3,Xe.update(a,t.id);case 3:c=r.sent,n({type:"UPDATE_WRITER_EARNINGS",data:c});case 5:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},at=function(e,t){return function(){var r=Object(s.a)(o.a.mark((function r(n){var a,c;return o.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a=Object(_.a)({followers:t.followers.map((function(e){return e.id})),earnings:t.earnings},e),r.next=3,Xe.update(a,t.id);case 3:c=Object(_.a)(Object(_.a)({},t),e),n({type:"UPDATE_PRICING",data:c});case 5:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},ct=function(e){return function(){var t=Object(s.a)(o.a.mark((function t(r){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r({type:"ADD_ARTICLE_TO_WRITER",data:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},it=function(e){return function(){var t=Object(s.a)(o.a.mark((function t(r){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r({type:"REMOVE_SUBS_FROM_WRITERS",data:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},ot=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_WRITERS":return t.data;case"ADD_NEW_WRITER":return e.concat(t.data);case"UPDATE_WRITER_EARNINGS":return e.map((function(e){return e.id===t.data.id?Object(_.a)(Object(_.a)({},e),{},{earnings:t.data.earnings}):e}));case"UPDATE_PRICING":return e.map((function(e){return e.id===t.data.id?Object(_.a)(Object(_.a)({},e),{},{oneArticlePrice:t.data.oneArticlePrice,montlySubscriptionPrice:t.data.montlySubscriptionPrice,yearlySubscriptionPrice:t.data.yearlySubscriptionPrice}):e}));case"ADD_ARTICLE_TO_WRITER":return e.map((function(e){return e.id===t.data.author?Object(_.a)(Object(_.a)({},e),{},{myarticles:e.myarticles.concat(t.data)}):e}));case"ADD_READER_TO_FOLLOWERS":return e.map((function(e){return e.id===t.data.id?t.data:e}));case"REMOVE_READER_FROM_FOLLOWERS":return e.map((function(e){return e.id===t.data?t.data:e}));case"REMOVE_SUBS_FROM_WRITERS":return e.map((function(e){return Object(_.a)(Object(_.a)({},e),{},{subscriptions:e.subscribers.filter((function(e){return!t.data.includes(e.id)}))})}));default:return e}},st=r(422),lt=r(423),ut=r(424),dt=r(425),pt=r(426),jt=Object(b.a)((function(e){return{text:{color:e.palette.text.secondary}}})),bt=function(e){var t=e.openLoginDialog,r=e.setOpenLoginDialog,n=jt(),a=Object(u.f)(),c=function(){var e=Object(s.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),a.push("/reader/login");case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(D.jsxs)(st.a,{open:t,onClose:function(){return r(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(D.jsx)(lt.a,{id:"alert-dialog-title",className:n.text,children:"Paid article"}),Object(D.jsx)(ut.a,{children:Object(D.jsx)(dt.a,{id:"alert-dialog-description",children:"Please login and pay to read"})}),Object(D.jsxs)(pt.a,{children:[Object(D.jsx)(w.a,{color:"primary",autoFocus:!0,onClick:c,children:"Log In"}),Object(D.jsx)(w.a,{onClick:function(){return r(!1)},color:"primary",autoFocus:!0,children:"close"})]})]})},ft=Object(b.a)((function(e){return{text:{color:e.palette.text.secondary}}})),mt=function(e){var t=e.openAddFundsDialog,r=e.setOpenAddFundsDialog,n=e.loggedInReader,a=e.price,c=ft(),i=Object(u.f)(),l=function(){var e=Object(s.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),i.push("/reader/profile/".concat(n.id));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(D.jsxs)(st.a,{open:t,onClose:function(){return r(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(D.jsx)(lt.a,{id:"alert-dialog-title",className:c.text,children:"Not enough funds"}),Object(D.jsxs)(ut.a,{children:[Object(D.jsxs)(g.a,{gutterBottom:!0,className:c.text,children:["Article price: ",a," \u20ac"]}),Object(D.jsxs)(g.a,{gutterBottom:!0,className:c.text,children:["Your balance: ",n.funds," \u20ac"]}),Object(D.jsx)(g.a,{gutterBottom:!0,className:c.text,children:"Please go to your profile to add funds"})]}),Object(D.jsxs)(pt.a,{children:[Object(D.jsx)(w.a,{color:"primary",autoFocus:!0,onClick:l,children:"Profile"}),Object(D.jsx)(w.a,{onClick:function(){return r(!1)},color:"primary",autoFocus:!0,children:"close"})]})]})},ht=Object(b.a)((function(e){return{root:{width:380,borderRadius:5,margin:5},media:{height:140},textTitle:{color:e.palette.text.secondary,fontWeight:"bold"},textauthor:{color:e.palette.text.secondary},text:{color:"#6A6A6A",paddingRight:10},cardInfoContainer:{display:"flex",flexDirection:"row",justifyContent:"space-between",paddingTop:10},cardInfoCategories:{display:"flex",flexDirection:"row",justifyContent:"space-between"},cardContent:{display:"flex",flexDirection:"column",justifyContent:"space-between"}}})),xt=function(e){var t=e.article,r=Object(u.f)(),a=Object(d.b)(),c=Object(d.c)((function(e){return e.reader})),i=Object(d.c)((function(e){return e.readers})),p=Object(d.c)((function(e){return e.articleImages})),b=c&&i.filter((function(e){return e.id===c.id}))[0],f=Object(n.useState)(!1),m=Object(j.a)(f,2),h=m[0],x=m[1],O=Object(n.useState)(!1),v=Object(j.a)(O,2),y=v[0],w=v[1],N=p&&p.filter((function(e){return e.article===t.id}))[0].img.data.data,C=btoa(new Uint8Array(N).reduce((function(e,t){return e+String.fromCharCode(t)}),""));if(!t)return Object(D.jsx)("p",{children:"Loading..."});var T=function(){var e=Object(s.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("yes"!==t.paid){e.next=29;break}if(b){e.next=5;break}x(!0),e.next=27;break;case 5:if(!b.subscriptions.some((function(e){return e.recipient[0].id===t.author.id}))){e.next=10;break}a(ke(t)),r.push("/article/".concat(t.id)),e.next=27;break;case 10:if(!(b.funds<t.author.oneArticlePrice)){e.next=14;break}w(!0),e.next=27;break;case 14:if(!window.confirm("Confirm payment for this article for ".concat(t.author.oneArticlePrice," \u20ac"))){e.next=27;break}return e.prev=15,e.next=18,a(qe(t.author.oneArticlePrice,b));case 18:return e.next=20,a(nt(t.author.oneArticlePrice,t.author));case 20:a(ke(t)),r.push("/article/".concat(t.id)),e.next=27;break;case 24:e.prev=24,e.t0=e.catch(15),a(ue("An error occurred. Please try again"));case 27:e.next=31;break;case 29:a(ke(t)),r.push("/article/".concat(t.id));case 31:case"end":return e.stop()}}),e,null,[[15,24]])})));return function(t){return e.apply(this,arguments)}}(),A=ht();return Object(D.jsxs)(me.a,{className:A.root,children:[Object(D.jsx)(l.b,{style:{textDecoration:"none",color:"inherit"},to:"#",onClick:function(){return T(t)},children:Object(D.jsxs)(he.a,{children:[Object(D.jsx)(Oe.a,{className:A.media,image:"data:image/jpeg;base64,".concat(C),title:"Contemplative Reptile"}),Object(D.jsxs)(xe.a,{className:A.cardContent,children:[Object(D.jsx)(g.a,{className:A.textTitle,children:t.title}),Object(D.jsxs)(g.a,{className:A.textauthor,children:["By ",t.author.firstName," ",t.author.lastName]}),Object(D.jsxs)("div",{className:A.cardInfoContainer,children:[Object(D.jsx)("div",{className:A.cardInfoCategories,children:t.genres.map((function(e){return Object(D.jsx)(g.a,{className:A.text,children:e},e)}))}),Object(D.jsx)(g.a,{className:A.text,variant:"caption",children:"yes"===t.paid?"Paid":"Free"})]})]})]})}),Object(D.jsx)(bt,{openLoginDialog:h,setOpenLoginDialog:x}),b&&Object(D.jsx)(mt,{openAddFundsDialog:y,setOpenAddFundsDialog:w,loggedInReader:b,price:t.author.oneArticlePrice})]})},Ot=r(454),gt=r(431),vt=r(432),yt=r(363),wt=Object(b.a)({posisioning:{display:"flex",alignItems:"center",justifyContent:"center"},radioGroup:{display:"inline-block"}}),Nt=function(e){var t=e.setFilterValue,r=wt();return Object(D.jsx)(yt.a,{component:"fieldset",className:r.posisioning,fullWidth:!0,children:Object(D.jsxs)(gt.a,{className:r.radioGroup,onChange:function(e){t(e.target.value)},row:!0,"aria-label":"position",name:"position",defaultValue:"all",children:[Object(D.jsx)(vt.a,{value:"all",control:Object(D.jsx)(Ot.a,{color:"primary"}),label:"All"}),Object(D.jsx)(vt.a,{value:"free",control:Object(D.jsx)(Ot.a,{color:"primary"}),label:"Free"}),Object(D.jsx)(vt.a,{value:"paid",control:Object(D.jsx)(Ot.a,{color:"primary"}),label:"Paid"})]})})},Ct=Object(b.a)({text:{textAlign:"center"},textWithPadding:{textAlign:"center",paddingBottom:20}}),Tt=function(){var e=Ct(),t=Object(n.useState)("all"),r=Object(j.a)(t,2),a=r[0],c=r[1],i=Object(u.g)().genre,o=Object(u.g)().searchResult,s=Object(u.g)().author,l=Object(d.c)((function(e){return e.articles})),p=Object(d.c)((function(e){return e.reader})),b=Object(d.c)((function(e){return e.readers})),f=p&&b.filter((function(e){return e.id===p.id}))[0],m=p&&f.favoritewriters.map((function(e){return e.id})),h=p&&f.subscriptions.map((function(e){return e.recipient[0].id})),x=l,O=null;if(!l)return Object(D.jsx)("p",{children:"Loading..."});"My Favorites"===i?x=l.filter((function(e){return m.includes(e.author.id)})):"My Subscriptions"===i?x=l.filter((function(e){return h.includes(e.author.id)})):void 0!==i&&(x=l.filter((function(e){return e.genres.includes(i)}))),o&&(O=(x=l.filter((function(e){return e.title.toLowerCase().includes(o.toLowerCase())}))).length),s&&(x=l.filter((function(e){return e.author.id===s})));var v=x;switch(a){case"all":break;case"free":v=x.filter((function(e){return"no"===e.paid}));break;case"paid":v=x.filter((function(e){return"yes"===e.paid}))}return Object(D.jsxs)("div",{children:[Object(D.jsx)(Nt,{setFilterValue:c}),Object(D.jsx)(g.a,{className:e.textWithPadding,variant:"h3",style:{display:void 0===i?"none":"block"},children:i}),Object(D.jsxs)("div",{style:{display:void 0===o?"none":"block"},children:[Object(D.jsxs)(g.a,{className:e.text,variant:"h3",children:["Results: ",o]}),Object(D.jsxs)(g.a,{className:e.textWithPadding,variant:"subtitle2",children:["Results found: ",O]})]}),Object(D.jsx)(fe.a,{container:!0,justify:"center",children:v.map((function(e){return Object(D.jsx)(xt,{article:e},e.id)}))})]})},At=r(435),St=r(434),kt=r(436),Rt=r(189),It=r.n(Rt),Et=r(455),Dt=Object(b.a)((function(e){return{text:{color:e.palette.text.secondary},loginSignupText:{color:e.palette.text.secondary,textAlign:"center"},categoryButton:{marginBottom:10,marginRight:10},accordion:{display:"flex",flexDirection:"column"},accordionMargin:{marginBottom:50},accordionLabel:{textAlign:"center",color:e.palette.text.secondary},rootBorder:{borderStyle:"solid",borderWidth:1,borderColor:e.palette.primary.main,margin:5},commentButton:{padding:10,marginLeft:10},inputColor:{color:e.palette.text.secondary},loginSignupContainer:{background:e.palette.primary.lightGrey,flexGrow:1,padding:10},commentForm:{display:"flex",flexDirection:"row",justifyContent:"flex-start",flexGrow:1}}})),Pt=function(){var e=Dt(),t=Object(d.b)(),r=Object(n.useState)(""),a=Object(j.a)(r,2),c=a[0],i=a[1],p=Object(d.c)((function(e){return e.articles})),b=Object(d.c)((function(e){return e.reader})),f=Object(d.c)((function(e){return e.readers})),m=b&&f.filter((function(e){return e.id===b.id}))[0],h=Object(re.a)(["readerAuthCookie"]),x=Object(j.a)(h,3),O=(x[0],x[1],x[2]),v=Object(u.f)(),y=Object(u.g)().id,N=p.filter((function(e){return e.id===y}))[0];if(!p)return Object(D.jsx)("p",{children:"Loading..."});var C=function(){var e=Object(s.a)(o.a.mark((function e(r){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),e.prev=1,n={comment:c},e.next=5,t(Re(n,y,m));case 5:t(le("".concat(c," added"))),i(""),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.log("error response",e.t0.response),"Unauthorized"===e.t0.response.statusText&&"token expired"===e.t0.response.data.error?(t(ue("You session has expired. Please login again")),t((function(e){e({type:"REMOVE_READER",data:null})})),O("readerAuthCookie",{path:"/"}),v.push("/reader/login")):t(ue("An error occurred. Please try again"));case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(D.jsx)("div",{className:e.accordionMargin,children:Object(D.jsxs)(Et.a,{classes:{root:e.rootBorder},children:[Object(D.jsx)(St.a,{color:"primary",expandIcon:Object(D.jsx)(It.a,{}),"aria-controls":"panel1c-content",id:"panel1c-header",children:Object(D.jsx)(g.a,{variant:"h5",className:e.accordionLabel,children:"Comments"})}),Object(D.jsxs)(At.a,{className:e.accordion,children:[Object(D.jsx)(kt.a,{children:null!==b?Object(D.jsxs)("form",{onSubmit:C,className:e.commentForm,children:[Object(D.jsx)(E.a,{fullWidth:!0,label:"Comment",value:c,onChange:function(e){i(e.target.value)},variant:"outlined",id:"commentInput",InputProps:{className:e.inputColor}}),Object(D.jsx)(w.a,{size:"small",color:"primary",variant:"contained",type:"submit",id:"addCommentButton",className:e.commentButton,children:"Comment"})]}):Object(D.jsxs)("div",{className:e.loginSignupContainer,children:[Object(D.jsx)(g.a,{variant:"h6",className:e.loginSignupText,children:"Something to say?"}),Object(D.jsxs)(g.a,{variant:"h6",className:e.loginSignupText,children:[Object(D.jsx)(l.b,{to:"/reader/login",children:"Log in"})," or ",Object(D.jsx)(l.b,{to:"/reader/signup",children:"Sign up"})]})]})}),0!==N.comments.length?N.comments.map((function(t){return Object(D.jsx)(me.a,{classes:{root:e.rootBorder},children:Object(D.jsxs)(xe.a,{children:[Object(D.jsx)(g.a,{className:e.text,style:{fontWeight:"bold"},children:t.commentator.userName}),Object(D.jsx)(g.a,{className:e.text,children:t.comment}),Object(D.jsxs)(g.a,{className:e.text,variant:"caption",children:["Posted on ",t.date]})]})},t.id)})):Object(D.jsx)(g.a,{className:e.text,variant:"subtitle1",children:"No comments"})]})]})})},Bt=Object(b.a)({infoText:{color:"#6A6A6A"},categoryButton:{marginBottom:10,marginRight:10},articleDiv:{marginBottom:100},coverPhoto:{height:200}}),_t=function(){var e=Bt(),t=Object(u.g)().id,r=Object(d.c)((function(e){return e.articles})),n=Object(d.c)((function(e){return e.articleImages})).filter((function(e){return e.article===t}))[0].img.data.data,a=btoa(new Uint8Array(n).reduce((function(e,t){return e+String.fromCharCode(t)}),""));if(!r)return Object(D.jsx)("p",{children:"Loading..."});var c=r.filter((function(e){return e.id===t}))[0];return Object(D.jsxs)("div",{children:[Object(D.jsxs)("div",{className:e.articleDiv,children:[Object(D.jsx)("img",{style:{width:"100%",height:200,borderRadius:5,objectFit:"cover"},fullWidth:!0,src:"data:image/jpeg;base64,".concat(a)}),Object(D.jsx)("div",{className:e.categoryButton,children:c.genres.map((function(e){return Object(D.jsx)(l.b,{style:{textDecoration:"none",color:"inherit"},to:"/genres/".concat(e),children:Object(D.jsx)(w.a,{marginottom:"50",size:"small",variant:"outlined",color:"primary",children:e})},e)}))}),Object(D.jsx)(g.a,{variant:"h4",children:c.title}),Object(D.jsx)("br",{}),Object(D.jsxs)(g.a,{variant:"subtitle1",className:e.infoText,children:["By ",Object(D.jsxs)(l.b,{to:"/author/".concat(c.author.id),children:[c.author.firstName," ",c.author.lastName]})," | ",c.published]}),Object(D.jsx)("br",{}),c.content.map((function(e,t){return Object(D.jsxs)("div",{children:[Object(D.jsx)(g.a,{children:e}),Object(D.jsx)("br",{})]},t)}))]}),Object(D.jsx)(Pt,{})]})},Wt=r(437),Lt=r(67),Ft=r.n(Lt),Mt=Object(b.a)((function(e){return{subscriptionOptionsContainer:{display:"flex",flexDirection:"row",justifyContent:"center"},subscriptionCard:{margin:5,minWidth:200,borderRadius:10,borderWidth:1,border:"solid",borderColor:e.palette.primary.main,flexGrow:1},subText:{textAlign:"center"},cardButton:{display:"flex",justifyContent:"center"}}})),Gt=Object(f.a)((function(e){return{tooltip:{backgroundColor:e.palette.primary.main,fontSize:15}}}))(m.a),Ut=function(e){var t=e.filteredWriter,r=e.matchingSub,n=e.handleSubscirbe,a=Mt();return Object(D.jsxs)("div",{className:a.subscriptionOptionsContainer,children:[Object(D.jsx)(me.a,{className:a.subscriptionCard,variant:"outlined",children:Object(D.jsxs)(xe.a,{children:[Object(D.jsx)(g.a,{color:"textSecondary",gutterBottom:!0,className:a.subText,children:"1 Article"}),Object(D.jsx)(g.a,{variant:"h5",color:"textSecondary",className:a.subText,children:"".concat(t.oneArticlePrice," \u20ac")})]})}),Object(D.jsxs)(me.a,{className:a.subscriptionCard,variant:"outlined",children:[Object(D.jsxs)(xe.a,{children:[Object(D.jsx)(g.a,{color:"textSecondary",gutterBottom:!0,className:a.subText,children:"1 Month"}),Object(D.jsx)(g.a,{variant:"h5",color:"textSecondary",className:a.subText,children:"".concat(t.montlySubscriptionPrice," \u20ac")})]}),Object(D.jsx)(Wt.a,{className:a.cardButton,children:null===r?Object(D.jsx)(Gt,{TransitionComponent:v.a,TransitionProps:{timeout:600},title:"Login to subscribe",children:Object(D.jsx)(w.a,{variant:"contained",endIcon:Object(D.jsx)(Ft.a,{}),children:"Subscribe"})}):Object(D.jsx)(w.a,{size:"small",color:"primary",variant:"contained",id:"montlySubscriptionButton",endIcon:Object(D.jsx)(Ft.a,{}),onClick:function(){return n("montlySubscriptionPrice")},children:"Subscribe"})})]}),Object(D.jsxs)(me.a,{className:a.subscriptionCard,variant:"outlined",children:[Object(D.jsxs)(xe.a,{children:[Object(D.jsx)(g.a,{color:"textSecondary",gutterBottom:!0,className:a.subText,children:"1 Year"}),Object(D.jsx)(g.a,{variant:"h5",color:"textSecondary",className:a.subText,children:"".concat(t.yearlySubscriptionPrice," \u20ac")})]}),Object(D.jsx)(Wt.a,{className:a.cardButton,children:null===r?Object(D.jsx)(Gt,{TransitionComponent:v.a,TransitionProps:{timeout:600},title:"Login to subscribe",children:Object(D.jsx)(w.a,{variant:"contained",endIcon:Object(D.jsx)(Ft.a,{}),children:"Subscribe"})}):Object(D.jsx)(w.a,{size:"small",color:"primary",variant:"contained",endIcon:Object(D.jsx)(Ft.a,{}),onClick:function(){return n("yearlySubscriptionPrice")},children:"Subscribe"})})]})]})},Vt=r(438),qt=r(190),zt=r.n(qt),Ht=Object(b.a)((function(e){return{profileContaner:{display:"flex",flexDirection:"row",justifyContent:"flex-start"},infoContainer:{display:"flex",flexDirection:"column",justifyContent:"flex-start",paddingLeft:10},subscriptionOptionsContainer:{display:"flex",flexDirection:"row",justifyContent:"flex-start",paddingLeft:50},subscriptionCard:{margin:5,minWidth:130,borderRadius:10,borderWidth:1,border:"solid",borderColor:e.palette.primary.main},subscribedCard:{margin:5,minWidth:390,borderRadius:10,borderWidth:1,border:"solid",borderColor:e.palette.primary.main},text:{textAlign:"center",paddingTop:50},subText:{textAlign:"center",textTransform:"uppercase"},genresList:{display:"flex",flexDirection:"row",justifyContent:"flex-start"},textGenres:{color:"grey",flex:0,paddingRight:10},button:{margin:e.spacing(1)},disabledButton:{margin:e.spacing(1),backgroundColor:"#E5E5E5",color:"#CCCCCC",boxShadow:"none"},cardButton:{display:"flex",justifyContent:"center"}}})),Yt=Object(f.a)((function(e){return{tooltip:{backgroundColor:e.palette.primary.main,fontSize:15}}}))(m.a),Jt=function(){var e=Ht(),t=Object(d.b)(),r=Object(u.g)().author,n=Object(d.c)((function(e){return e.reader})),a=Object(d.c)((function(e){return e.writerImages})),c=Object(d.c)((function(e){return e.readers})),i=Object(re.a)(["readerAuthCookie"]),l=Object(j.a)(i,3),p=(l[0],l[1],l[2]),b=Object(u.f)(),f=Object(d.c)((function(e){return e.writers.filter((function(e){return e.id===r}))[0]})),m=n&&c.filter((function(e){return e.id===n.id}))[0],h=a.filter((function(e){return e.writer===r}))[0].img.data.data,x=h&&btoa(new Uint8Array(h).reduce((function(e,t){return e+String.fromCharCode(t)}),""));if(!f)return Object(D.jsx)("p",{children:"Loading..."});var O=m&&m.favoritewriters.some((function(e){return e.id===r})),y=f.subscribers.map((function(e){return e})),N=m&&0!==m.subscriptions.length&&m.subscriptions.map((function(e){return e})),C=m&&0!==m.subscriptions.length&&y.filter((function(e){return N.some((function(t){return t.id===e.id}))}))[0],T=function(){var e=Object(s.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t(Ge(f,m));case 3:return e.next=5,t(tt(m,f));case 5:t(le("".concat(f.firstName," ").concat(f.lastName," added to favorites"))),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("error response",e.t0.response),"Unauthorized"===e.t0.response.statusText&&"token expired"===e.t0.response.data.error?(t(ue("You session has expired. Please login again")),t((function(e){e({type:"REMOVE_READER",data:null})})),p("readerAuthCookie",{path:"/"}),b.push("/reader/login")):t(ue("An error occurred. Please try again"));case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=Object(s.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t(Ue(f,m));case 3:return e.next=5,t(rt(m,f));case 5:t(le("".concat(f.firstName," ").concat(f.lastName," removed from favorites"))),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("error response",e.t0.response),"Unauthorized"===e.t0.response.statusText&&"token expired"===e.t0.response.data.error?(t(ue("You session has expired. Please login again")),t((function(e){e({type:"REMOVE_READER",data:null})})),p("readerAuthCookie",{path:"/"}),b.push("/reader/login")):t(ue("An error occurred. Please try again"));case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(s.a)(o.a.mark((function e(r){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(m.funds<f[r])){e.next=4;break}window.alert("Not enought funds"),e.next=25;break;case 4:if(!window.confirm("Confirm Subscription")){e.next=25;break}return e.prev=5,e.next=8,t(nt(f[r],f));case 8:return e.next=10,t(qe(f[r],m));case 10:return a={type:n="montlySubscriptionPrice"===r?"montly":"yearly",writerId:f.id},e.next=14,Le.createSubscribtion(a,m.id);case 14:return e.next=16,t(Fe());case 16:return e.next=18,t(Ze());case 18:t(le("Subsribed ".concat(n," to ").concat(f.firstName," ").concat(f.lastName))),e.next=25;break;case 21:e.prev=21,e.t0=e.catch(5),console.log("error response",e.t0.response),"Unauthorized"===e.t0.response.statusText&&"token expired"===e.t0.response.data.error?(t(ue("You session has expired. Please login again")),t((function(e){e({type:"REMOVE_READER",data:null})})),p("readerAuthCookie",{path:"/"}),b.push("/reader/login")):t(ue("An error occurred. Please try again"));case 25:case"end":return e.stop()}}),e,null,[[5,21]])})));return function(t){return e.apply(this,arguments)}}();return Object(D.jsxs)("div",{children:[Object(D.jsxs)("div",{className:e.profileContaner,children:[Object(D.jsx)("img",{width:"200",src:"data:image/jpeg;base64,".concat(x)}),Object(D.jsxs)("div",{className:e.infoContainer,children:[Object(D.jsxs)(g.a,{variant:"h4",children:[f.firstName," ",f.lastName]}),Object(D.jsx)(g.a,{children:f.writerDescription}),Object(D.jsx)(L.a,{className:e.genresList,children:f.writerGenres.map((function(t){return Object(D.jsx)(g.a,{className:e.textGenres,variant:"caption",children:t},t)}))}),Object(D.jsx)(Vt.a,{color:"primary","aria-label":"outlined primary button group",children:function(){switch(O){case!0:return Object(D.jsx)(w.a,{variant:"contained",color:"primary",className:e.button,endIcon:Object(D.jsx)(zt.a,{}),onClick:A,children:"Added to favorites"});case!1:return Object(D.jsx)(w.a,{variant:"contained",color:"primary",className:e.button,endIcon:Object(D.jsx)(Ft.a,{}),onClick:T,children:"Add to favorites"});case null:return Object(D.jsx)("div",{children:Object(D.jsx)(Yt,{TransitionComponent:v.a,TransitionProps:{timeout:600},title:"Login to add to favorites",children:Object(D.jsx)("span",{children:Object(D.jsx)(w.a,{variant:"contained",endIcon:Object(D.jsx)(Ft.a,{}),children:"Add to favorites"})})})})}}()})]})]}),Object(D.jsx)("div",{children:!1!==C&&null!==C&&void 0!==C?Object(D.jsx)(me.a,{className:e.subscribedCard,variant:"outlined",children:Object(D.jsxs)(xe.a,{children:[Object(D.jsx)(g.a,{color:"textSecondary",gutterBottom:!0,className:e.subText,children:"Subscribed"}),Object(D.jsxs)(g.a,{color:"textSecondary",gutterBottom:!0,className:e.subText,children:["Type: ",C.type]}),Object(D.jsxs)(g.a,{color:"textSecondary",gutterBottom:!0,className:e.subText,children:["Period: ",C.startDate.slice(0,-6)," - ",C.endDate.slice(0,-6)]})]})}):Object(D.jsx)(Ut,{handleSubscirbe:S,filteredWriter:f,matchingSub:C})}),Object(D.jsx)(g.a,{variant:"h4",color:"primary",className:e.text,children:"Articles"}),Object(D.jsx)(Tt,{})]})},Kt=r(18),$t=r(19),Qt=r(367),Xt=r(22),Zt="".concat("http://localhost:3001","/api/images/writers"),er={getAll:function(){var e=Object(s.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.a.get(Zt);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getOne:function(){var e=Object(s.a)(o.a.mark((function e(t){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.a.get("".concat(Zt,"/").concat(t));case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),create:function(){var e=Object(s.a)(o.a.mark((function e(t){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.a.post(Zt,t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},tr=function(){return function(){var e=Object(s.a)(o.a.mark((function e(t){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,er.getAll();case 2:r=e.sent,t({type:"INIT_WRITER_IMAGES",data:r});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},rr=function(e){return function(){var t=Object(s.a)(o.a.mark((function t(r){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r({type:"ADD_WRITER_IMAGE",data:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},nr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_WRITER_IMAGES":return t.data;case"ADD_WRITER_IMAGE":return e.concat(t.data);default:return e}},ar=r(207),cr=r(206),ir=Object(cr.a)({palette:{type:"light",primary:{main:"#181616",lighter:"#222525",middleGrey:"#515151",hover:"#606060",lightGrey:"#eeeeee"},secondary:{main:"#f50057"},text:{primary:"#FCFCFC",secondary:"#181616",blueish:"#731DD8",grey:"#606060"}},icons:{fontSize:30,fill:"#FCFCFC"}}),or=r(197),sr=r.n(or),lr={flex:1,display:"flex",flexDirection:"column",alignItems:"center",padding:"20px",borderWidth:3,borderRadius:10,borderColor:ir.palette.primary.main,borderStyle:"dashed",backgroundColor:ir.palette.primary.lightGrey,color:ir.palette.primary.main,outline:"none"},ur={display:"flex",flexDirection:"row",flexWrap:"wrap",marginTop:16},dr={display:"inline-flex",marginBottom:8,marginRight:8,width:150,height:150,padding:4,boxSizing:"border-box"},pr={borderRadius:10,display:"block",width:"auto",height:"100%"},jr={borderColor:"#2196f3"},br={borderColor:"#00e676"},fr={borderColor:"#ff1744"},mr=function(e){var t=e.setFieldValue,r=e.values,a=Object(ar.a)({accept:"image/*",onDrop:function(e){t("files",e.map((function(e){return Object.assign(e,{preview:URL.createObjectURL(e)})})))}}),c=a.getRootProps,i=a.getInputProps,o=a.isDragActive,s=a.isDragAccept,l=a.isDragReject,u=r.files.map((function(e){return Object(D.jsx)("div",{style:dr,children:Object(D.jsx)("div",{children:Object(D.jsx)("img",{src:e.preview,style:pr})})},e.name)})),d=Object(n.useMemo)((function(){return Object(_.a)(Object(_.a)(Object(_.a)(Object(_.a)({},lr),o?jr:{}),s?br:{}),l?fr:{})}),[o,l,s]);return Object(D.jsxs)("div",{children:[Object(D.jsxs)("div",Object(_.a)(Object(_.a)({},c({style:d})),{},{children:[Object(D.jsx)("input",Object(_.a)(Object(_.a)({},i()),{},{name:"image",id:"imageUpload"})),Object(D.jsx)("p",{children:"Drag and drop image here, or click to select image"}),Object(D.jsx)(sr.a,{})]})),Object(D.jsx)("aside",{style:ur,children:u})]})},hr=Object(b.a)((function(e){return{inputColor:{color:e.palette.text.secondary},loginText:{textAlign:"center",marginBottom:30},container:{marginTop:150,marginBottom:150,display:"flex",alignItems:"center",justifyContent:"center",height:"80vh"},item:{maxWidth:600,borderColor:e.palette.primary.main,borderRadius:10,borderWidth:1,borderStyle:"solid",background:e.palette.primary.lightGrey},form:{margin:30},paddings:{marginBottom:20},button:{display:"block",marginLeft:"auto",marginRight:"auto"},priceContainer:{display:"flex",flexDirection:"row"},priceItem:{marginRight:5},checkBoxMargins:{marginRight:0,marginLeft:0}}})),xr={firstName:"",lastName:"",userName:"",writerDescription:"",writerGenres:[],oneArticlePrice:0,montlySubscriptionPrice:0,yearlySubscriptionPrice:0,password:"",passwordConfirmation:"",files:[]},Or=$t.d().shape({firstName:$t.f().min(2,"Too Short").max(50,"Too Long").required("Required"),lastName:$t.f().min(2,"Too Short").max(50,"Too Long").required("Required"),userName:$t.f().min(3,"Too Short").max(50,"Too Long").required("Required"),writerDescription:$t.f().min(50,"Description must be at least 50 characters").max(500,"Description must be less than 500 characters").required("Required"),writerGenres:$t.a().min(1,"Check at least one category"),oneArticlePrice:$t.c().required("Required").moreThan(0,"Value must be greater than 0"),montlySubscriptionPrice:$t.c().required("Required").moreThan(0,"Value must be greater than 0"),yearlySubscriptionPrice:$t.c().required("Required").moreThan(0,"Value must be greater than 0"),password:$t.f().min(8,"Password too Short").max(50,"Password too Long").required("Required"),passwordConfirmation:$t.f().oneOf([$t.e("password"),null],"Passwords must match"),files:$t.a().min(1,"One image required")}),gr=function(e){var t=e.validateUsername,r=e.values,n=e.errors,a=e.touched,c=e.handleChange,i=e.handleBlur,o=e.handleSubmit,s=e.setFieldValue,l=hr();return Object(D.jsx)("div",{className:l.container,children:Object(D.jsxs)("div",{className:l.item,children:[Object(D.jsx)(g.a,{variant:"h4",style:{textAlign:"center",marginTop:20},children:"Writer registration form"}),Object(D.jsxs)("form",{onSubmit:o,className:l.form,children:[Object(D.jsx)(Kt.a,{component:Xt.c,onChange:c,onBlur:i,value:r.firstName,error:a.firstName&&Boolean(n.firstName),helperText:a.firstName&&n.firstName,id:"firstName",name:"firstName",label:"First name",variant:"outlined",fullWidth:!0,className:l.paddings,InputProps:{className:l.inputColor}}),Object(D.jsx)(Kt.a,{component:Xt.c,onChange:c,onBlur:i,value:r.lastName,error:a.lastName&&Boolean(n.lastName),helperText:a.lastName&&n.lastName,id:"lastName",name:"lastName",label:"Last name",variant:"outlined",fullWidth:!0,className:l.paddings,InputProps:{className:l.inputColor}}),Object(D.jsx)(Kt.a,{validate:t,component:Xt.c,onChange:c,onBlur:i,value:r.userName,error:a.userName&&Boolean(n.userName),helperText:a.userName&&n.userName,id:"userName",name:"userName",label:"Username",variant:"outlined",fullWidth:!0,className:l.paddings,InputProps:{className:l.inputColor}}),Object(D.jsx)(Kt.a,{component:Xt.c,onChange:c,onBlur:i,value:r.writerDescription,error:a.writerDescription&&Boolean(n.writerDescription),helperText:a.writerDescription&&n.writerDescription,id:"writerDescription",name:"writerDescription",label:"Description",variant:"outlined",multiline:!0,fullWidth:!0,className:l.paddings,InputProps:{className:l.inputColor}}),Object(D.jsxs)(yt.a,{component:"fieldset",className:l.formControl,children:[Object(D.jsx)(g.a,{variant:"subtitle1",children:"Categories"}),n.writerGenres&&a.writerGenres&&Object(D.jsx)(g.a,{variant:"caption",style:{color:"#f44336"},children:n.writerGenres}),Object(D.jsx)(Qt.a,{row:!0,children:q.map((function(e){return Object(D.jsx)(vt.a,{classes:{root:l.checkBoxMargins},control:Object(D.jsx)(Kt.a,{component:Xt.a,classes:{root:l.checkBoxMargins},id:e.toLowerCase(),type:"checkbox",name:"writerGenres",value:e,Label:{label:"".concat(e)}})},e)}))})]}),Object(D.jsxs)(yt.a,{component:"fieldset",className:l.paddings,children:[Object(D.jsx)(g.a,{variant:"subtitle1",style:{marginBottom:10},children:"Pricing"}),Object(D.jsxs)("div",{className:l.priceContainer,children:[Object(D.jsx)(Kt.a,{component:Xt.c,onChange:c,onBlur:i,value:r.oneArticlePrice,id:"oneArticlePrice",name:"oneArticlePrice",label:"One Article",type:"number",variant:"outlined",fullWidth:!0,className:l.priceItem,InputProps:{className:l.inputColor}}),Object(D.jsx)(Kt.a,{component:Xt.c,onChange:c,onBlur:i,value:r.montlySubscriptionPrice,error:a.montlySubscriptionPrice&&Boolean(n.montlySubscriptionPrice),helperText:a.montlySubscriptionPrice&&n.montlySubscriptionPrice,id:"montlySubscriptionPrice",name:"montlySubscriptionPrice",label:"Montly Subscription",type:"number",variant:"outlined",fullWidth:!0,className:l.priceItem,InputProps:{className:l.inputColor}}),Object(D.jsx)(Kt.a,{component:Xt.c,onChange:c,onBlur:i,value:r.yearlySubscriptionPrice,error:a.yearlySubscriptionPrice&&Boolean(n.yearlySubscriptionPrice),helperText:a.yearlySubscriptionPrice&&n.yearlySubscriptionPrice,id:"yearlySubscriptionPrice",name:"yearlySubscriptionPrice",label:"Yearly Subscription",type:"number",variant:"outlined",fullWidth:!0,InputProps:{className:l.inputColor}})]})]}),Object(D.jsx)(Kt.a,{component:Xt.c,onChange:c,onBlur:i,value:r.password,error:a.password&&Boolean(n.password),helperText:a.password&&n.password,id:"password",name:"password",label:"Password",type:"password",variant:"outlined",fullWidth:!0,className:l.paddings,InputProps:{className:l.inputColor}}),Object(D.jsx)(Kt.a,{component:Xt.c,onChange:c,onBlur:i,value:r.passwordConfirmation,error:a.passwordConfirmation&&Boolean(n.passwordConfirmation),helperText:a.passwordConfirmation&&n.passwordConfirmation,id:"passwordConfirmation",name:"passwordConfirmation",label:"Password confirmation",type:"password",variant:"outlined",fullWidth:!0,className:l.paddings,InputProps:{className:l.inputColor}}),Object(D.jsx)(g.a,{variant:"subtitle1",className:l.formControl,children:"Profile picture"}),Object(D.jsx)("div",{className:l.formControl,children:n.files&&a.files&&Object(D.jsx)(g.a,{variant:"caption",style:{color:"#f44336"},children:n.files})}),Object(D.jsx)(mr,{setFieldValue:s,values:r}),Object(D.jsx)(w.a,{color:"primary",variant:"contained",type:"submit",id:"submitWriterRegister",className:l.button,children:"Sign Up"})]})]})})},vr=function(){var e=Object(u.f)(),t=Object(d.b)(),r=Object(d.c)((function(e){return e.writers})),n=function(){var r=Object(s.a)(o.a.mark((function r(n){var a,c,i,s,l;return o.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,(a=new FormData).append("file",n.files[0]),r.next=5,er.create(a);case 5:return c=r.sent,i=Object(_.a)(Object(_.a)({},n),{},{imageId:c.id}),r.next=9,Xe.create(i);case 9:return s=r.sent,l=Object(_.a)(Object(_.a)({},c),{},{writer:s.id}),r.next=13,t(rr(l));case 13:return r.next=15,t(et(s));case 15:t(le("Registered successfully")),e.push("/writerssection/login"),r.next=22;break;case 19:r.prev=19,r.t0=r.catch(0),t(ue("An error occurred. Please try again"));case 22:case"end":return r.stop()}}),r,null,[[0,19]])})));return function(e){return r.apply(this,arguments)}}(),a=function(e){var t;return r.some((function(t){return t.userName===e}))&&(t="Sorry, this username already exists "),t};return Object(D.jsx)("div",{children:Object(D.jsx)(Kt.c,{initialValues:xr,validationSchema:Or,onSubmit:n,children:function(e){var t=e.values,r=e.errors,n=e.touched,c=e.handleChange,i=e.handleBlur,o=e.handleSubmit,s=e.setFieldValue;return Object(D.jsx)(gr,{validateUsername:a,values:t,errors:r,touched:n,handleChange:c,handleBlur:i,handleSubmit:o,setFieldValue:s})}})})},yr=Object(b.a)((function(e){return{inputColor:{color:e.palette.text.secondary},loginText:{textAlign:"center",marginBottom:30},container:{display:"flex",alignItems:"center",justifyContent:"center",height:"80vh"},item:{maxWidth:600,borderColor:e.palette.primary.main,borderRadius:10,borderWidth:1,borderStyle:"solid",background:e.palette.primary.lightGrey},form:{margin:30},paddings:{marginBottom:20},button:{display:"block",marginLeft:"auto",marginRight:"auto"}}})),wr={userName:"",password:""},Nr=$t.d().shape({userName:$t.f().required("Username is required"),password:$t.f().required("Password is required")}),Cr=function(e){var t=e.values,r=e.errors,n=e.touched,a=e.handleChange,c=e.handleBlur,i=e.handleSubmit,o=yr();return Object(D.jsx)("div",{className:o.container,children:Object(D.jsx)("div",{className:o.item,children:Object(D.jsxs)("form",{onSubmit:i,className:o.form,children:[Object(D.jsx)(g.a,{variant:"h4",className:o.loginText,children:"Log In"}),Object(D.jsx)(Kt.a,{component:Xt.c,value:t.userName,onChange:a,onBlur:c,error:n.userName&&Boolean(r.userName),helperText:n.userName&&r.userName,fullWidth:!0,id:"userName",name:"userName",label:"Username",variant:"outlined",InputProps:{className:o.inputColor},className:o.paddings}),Object(D.jsx)(Kt.a,{component:Xt.c,value:t.password,onChange:a,onBlur:c,error:n.password&&Boolean(r.password),helperText:n.password&&r.password,fullWidth:!0,id:"password",name:"password",label:"Password",type:"password",variant:"outlined",InputProps:{className:o.inputColor},className:o.paddings}),Object(D.jsx)(w.a,{id:"readerLoginButton",color:"primary",variant:"contained",type:"submit",className:o.button,children:"Log in"})]})})})},Tr=function(){var e=Object(u.f)(),t=Object(d.b)(),r=function(){var r=Object(s.a)(o.a.mark((function r(n){return o.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,t(ee(n));case 3:t(le("Login successful")),e.push("/"),r.next=10;break;case 7:r.prev=7,r.t0=r.catch(0),t(ue("Incorrect username or password"));case 10:case"end":return r.stop()}}),r,null,[[0,7]])})));return function(e){return r.apply(this,arguments)}}();return Object(D.jsx)("div",{children:Object(D.jsx)(Kt.c,{initialValues:wr,validationSchema:Nr,onSubmit:r,children:function(e){var t=e.values,r=e.errors,n=e.touched,a=e.handleChange,c=e.handleBlur,i=e.handleSubmit;return Object(D.jsx)(Cr,{values:t,errors:r,touched:n,handleChange:a,handleBlur:c,handleSubmit:i})}})})},Ar=r(456),Sr=r(453),kr=function(e){return Object(D.jsx)(Sr.a,Object(_.a)({elevation:6,variant:"filled"},e))},Rr=function(){var e=Object(d.c)((function(e){return e.notification}));return Object(D.jsx)(Ar.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:e.open,TransitionComponent:v.a,children:Object(D.jsx)(kr,{severity:e.messageType,children:e.message})})},Ir=Object(b.a)((function(e){return{inputColor:{color:e.palette.text.secondary},loginText:{textAlign:"center",marginBottom:30},container:{display:"flex",alignItems:"center",justifyContent:"center",height:"80vh"},item:{maxWidth:600,borderColor:e.palette.primary.main,borderRadius:10,borderWidth:1,borderStyle:"solid",background:e.palette.primary.lightGrey},form:{margin:30},paddings:{marginBottom:20},button:{display:"block",marginLeft:"auto",marginRight:"auto"}}})),Er={userName:"",password:""},Dr=$t.d().shape({userName:$t.f().required("Username is required"),password:$t.f().required("Password is required")}),Pr=function(e){var t=e.reader,r=e.values,n=e.errors,a=e.touched,c=e.handleChange,i=e.handleBlur,o=e.handleSubmit,s=Ir();return Object(D.jsx)("div",{className:s.container,children:Object(D.jsx)("div",{className:s.item,children:Object(D.jsxs)("form",{onSubmit:o,className:s.form,children:[Object(D.jsx)(g.a,{variant:"h4",className:s.loginText,children:"Writer Log In"}),Object(D.jsx)(Kt.a,{component:Xt.c,className:s.paddings,fullWidth:!0,id:"userName",name:"userName",label:"Username",variant:"outlined",InputProps:{className:s.inputColor},value:r.userName,onChange:c,onBlur:i,error:a.userName&&Boolean(n.userName),helperText:a.userName&&n.userName}),Object(D.jsx)(Kt.a,{component:Xt.c,className:s.paddings,fullWidth:!0,id:"password",name:"password",label:"Password",type:"password",variant:"outlined",InputProps:{className:s.inputColor},value:r.password,onChange:c,onBlur:i,error:a.password&&Boolean(n.password),helperText:a.password&&n.password}),t?Object(D.jsxs)("div",{children:[Object(D.jsx)(w.a,{color:"primary",variant:"contained",disabled:!0,type:"submit",className:s.button,children:"Log in"}),Object(D.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(D.jsx)(g.a,{fullWidth:!0,variant:"subtitle1",style:{color:"#f44336",marginTop:10},children:"Logout from Reader account to Login as Writer"})})]}):Object(D.jsx)(w.a,{color:"primary",variant:"contained",type:"submit",id:"writerLoginButton",className:s.button,children:"Log in"})]})})})},Br=function(){var e=Object(d.c)((function(e){return e.reader})),t=Object(d.c)((function(e){return e.writers})),r=Object(d.b)(),n=Object(u.f)(),a=function(){var e=Object(s.a)(o.a.mark((function e(a){var c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r(ie(a));case 3:c=t.filter((function(e){return e.userName===String(a.userName)}))[0],r(le("Logged in successfully")),n.push("/writerssection/profile/".concat(c.id)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),r(ue("Incorrect username or password"));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(D.jsx)("div",{children:Object(D.jsx)(Kt.c,{initialValues:Er,validationSchema:Dr,onSubmit:a,children:function(t){var r=t.values,n=t.errors,a=t.touched,c=t.handleChange,i=t.handleBlur,o=t.handleSubmit;return Object(D.jsx)(Pr,{reader:e,values:r,errors:n,touched:a,handleChange:c,handleBlur:i,handleSubmit:o})}})})},_r="".concat("http://localhost:3001","/api/images/readers"),Wr={getAll:function(){var e=Object(s.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.a.get(_r);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getOne:function(){var e=Object(s.a)(o.a.mark((function e(t){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.a.get("".concat(_r,"/").concat(t));case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),create:function(){var e=Object(s.a)(o.a.mark((function e(t){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.a.post(_r,t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Lr=function(){return function(){var e=Object(s.a)(o.a.mark((function e(t){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wr.getAll();case 2:r=e.sent,t({type:"INIT_READERS_IMAGES",data:r});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Fr=function(e){return function(){var t=Object(s.a)(o.a.mark((function t(r){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r({type:"ADD_READER_IMAGE",data:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Mr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_READERS_IMAGES":return t.data;case"ADD_READER_IMAGE":return e.concat(t.data);default:return e}},Gr=Object(b.a)((function(e){return{inputColor:{color:e.palette.text.secondary},loginText:{textAlign:"center",marginBottom:30},container:{display:"flex",alignItems:"center",justifyContent:"center",height:"80vh"},item:{maxWidth:600,borderColor:e.palette.primary.main,borderRadius:10,borderWidth:1,borderStyle:"solid",background:e.palette.primary.lightGrey},form:{margin:30},paddings:{marginBottom:20},button:{display:"block",marginLeft:"auto",marginRight:"auto"},formControl:{display:"flex",alignItems:"center",justifyContent:"center",marginTop:5}}})),Ur={firstName:"",lastName:"",userName:"",password:"",passwordConfirmation:"",files:[]},Vr=$t.d().shape({firstName:$t.f().min(2,"Too Short!").max(50,"Too Long!").required("Required"),lastName:$t.f().min(2,"Too Short!").max(50,"Too Long!").required("Required"),userName:$t.f().min(3,"Username too Short!").max(50,"Username too Long!").required("Required"),password:$t.f().min(8,"Password too Short!").max(50,"Password too Long!").required("Required"),passwordConfirmation:$t.f().oneOf([$t.e("password"),null],"Passwords must match"),files:$t.a().min(1,"One image required")}),qr=function(e){var t=e.values,r=e.errors,n=e.touched,a=e.handleChange,c=e.handleBlur,i=e.handleSubmit,o=e.validateUsername,s=e.setFieldValue,l=Gr();return Object(D.jsx)("div",{className:l.container,children:Object(D.jsx)("div",{className:l.item,children:Object(D.jsxs)("form",{onSubmit:i,className:l.form,children:[Object(D.jsx)(g.a,{variant:"h4",className:l.loginText,children:"Sign Up"}),Object(D.jsx)(Kt.a,{component:Xt.c,value:t.firstName,onChange:a,onBlur:c,error:n.firstName&&Boolean(r.firstName),helperText:n.firstName&&r.firstName,fullWidth:!0,id:"firstName",name:"firstName",label:"First name",variant:"outlined",InputProps:{className:l.inputColor},className:l.paddings}),Object(D.jsx)(Kt.a,{component:Xt.c,value:t.lastName,onChange:a,onBlur:c,error:n.lastName&&Boolean(r.lastName),helperText:n.lastName&&r.lastName,fullWidth:!0,id:"lastName",name:"lastName",label:"Last name",variant:"outlined",InputProps:{className:l.inputColor},className:l.paddings}),Object(D.jsx)(Kt.a,{component:Xt.c,validate:o,value:t.userName,onChange:a,onBlur:c,error:n.userName&&Boolean(r.userName),helperText:n.userName&&r.userName,fullWidth:!0,id:"userName",name:"userName",label:"Username",variant:"outlined",InputProps:{className:l.inputColor},className:l.paddings}),Object(D.jsx)(Kt.a,{component:Xt.c,value:t.password,onChange:a,onBlur:c,error:n.password&&Boolean(r.password),helperText:n.password&&r.password,fullWidth:!0,id:"password",name:"password",label:"Password",type:"password",variant:"outlined",InputProps:{className:l.inputColor},className:l.paddings}),Object(D.jsx)(Kt.a,{component:Xt.c,value:t.passwordConfirmation,onChange:a,onBlur:c,error:n.passwordConfirmation&&Boolean(r.passwordConfirmation),helperText:n.passwordConfirmation&&r.passwordConfirmation,fullWidth:!0,id:"passwordConfirmation",name:"passwordConfirmation",label:"Password confirmation",type:"password",variant:"outlined",InputProps:{className:l.inputColor},className:l.paddings}),Object(D.jsx)(g.a,{variant:"subtitle1",className:l.formControl,children:"Profile picture"}),Object(D.jsx)("div",{className:l.formControl,children:r.files&&n.files&&Object(D.jsx)(g.a,{variant:"caption",style:{color:"#f44336"},children:r.files})}),Object(D.jsx)(mr,{setFieldValue:s,values:t}),Object(D.jsx)(w.a,{id:"submitReaderRegister",color:"primary",variant:"contained",type:"submit",className:l.button,children:"Sign Up"})]})})})},zr=function(){var e=Object(u.f)(),t=Object(d.b)(),r=Object(d.c)((function(e){return e.readers})),n=function(){var r=Object(s.a)(o.a.mark((function r(n){var a,c,i,s,l;return o.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,(a=new FormData).append("file",n.files[0]),r.next=5,Wr.create(a);case 5:return c=r.sent,i=Object(_.a)(Object(_.a)({},n),{},{imageId:c.id}),r.next=9,Le.create(i);case 9:return s=r.sent,l=Object(_.a)(Object(_.a)({},c),{},{reader:s.id}),r.next=13,t(Fr(l));case 13:return r.next=15,t(Me(s));case 15:t(le("Registration successful")),e.push("/reader/login"),r.next=22;break;case 19:r.prev=19,r.t0=r.catch(0),t(ue("An error occurred. Please try again"));case 22:case"end":return r.stop()}}),r,null,[[0,19]])})));return function(e){return r.apply(this,arguments)}}(),a=function(e){var t;return r.some((function(t){return t.userName===e}))&&(t="Sorry, this username already exists "),t};return Object(D.jsx)("div",{children:Object(D.jsx)(Kt.c,{initialValues:Ur,validationSchema:Vr,onSubmit:n,children:function(e){var t=e.values,r=e.errors,n=e.touched,c=e.handleChange,i=e.handleBlur,o=e.handleSubmit,s=e.setFieldValue;return Object(D.jsx)(qr,{validateUsername:a,values:t,errors:r,touched:n,handleChange:c,handleBlur:i,handleSubmit:o,setFieldValue:s})}})})},Hr=r(198),Yr=Object(b.a)((function(e){return{text:{color:e.palette.text.secondary}}})),Jr=function(e){var t=e.openDialog,r=e.setOpenDialog,a=e.reader,c=Object(n.useState)(0),i=Object(j.a)(c,2),l=i[0],p=i[1],b=Yr(),f=Object(d.b)(),m=Object(re.a)(["readerAuthCookie"]),h=Object(j.a)(m,3),x=(h[0],h[1],h[2]),O=Object(u.f)(),g=function(){var e=Object(s.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,n=Number(l),e.next=5,f(Ve(n,a));case 5:f(le("".concat(n," \u20ac added to your funds"))),p(0),r(!1),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),console.log("error response",e.t0.response),"Unauthorized"===e.t0.response.statusText&&"token expired"===e.t0.response.data.error?(f(ue("You session has expired. Please login again")),f((function(e){e({type:"REMOVE_READER",data:null})})),x("readerAuthCookie",{path:"/"}),O.push("/reader/login")):f(ue("An error occurred. Please try again"));case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(D.jsxs)(st.a,{open:t,onClose:function(){return r(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(D.jsx)(lt.a,{id:"alert-dialog-title",className:b.text,children:"Add Funds"}),Object(D.jsxs)(pt.a,{children:[Object(D.jsx)(Hr.a,{id:"addFundsInput",onChange:function(e){p(e.target.value)},value:l,isNumericString:!0}),Object(D.jsx)(w.a,{color:"primary",id:"addFundsDialogAddButton",autoFocus:!0,onClick:g,children:"add"}),Object(D.jsx)(w.a,{onClick:function(){return r(!1)},color:"primary",autoFocus:!0,children:"close"})]})]})},Kr=r(209),$r=r(451),Qr=r(452),Xr=r(439),Zr=r(199),en=r.n(Zr),tn=Object(b.a)((function(e){return{text:{color:e.palette.text.secondary,textTransform:"uppercase"},root:{color:e.palette.text.blueish,textDecoration:"underline"},listItem:{borderColor:e.palette.primary.main,borderRadius:10,borderWidth:1,borderStyle:"solid",marginBottom:10}}})),rn=function(e){var t=e.children,r=e.value,n=e.index,a=Object(Kr.a)(e,["children","value","index"]);return Object(D.jsx)("div",Object(_.a)(Object(_.a)({role:"tabpanel",hidden:r!==n,id:"simple-tabpanel-".concat(n),"aria-labelledby":"simple-tab-".concat(n)},a),{},{children:r===n&&Object(D.jsx)($r.a,{p:3,children:Object(D.jsx)(g.a,{component:"span",children:t})})}))},nn=function(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}},an=function(e){return Object(D.jsx)(F.a,Object(_.a)({button:!0,component:"a"},e))},cn=function(e){var t=e.reader,r=Object(n.useState)(0),a=Object(j.a)(r,2),c=a[0],i=a[1],p=tn(),b=Object(d.b)(),f=Object(re.a)(["readerAuthCookie"]),m=Object(j.a)(f,3),x=(m[0],m[1],m[2]),O=Object(u.f)(),v=function(){var e=Object(s.a)(o.a.mark((function e(r){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b(Ue(r,t));case 3:return e.next=5,b(rt(t,r));case 5:b(le("".concat(r.firstName," ").concat(r.lastName," removed from favorites"))),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("error response",e.t0.response),"Unauthorized"===e.t0.response.statusText&&"token expired"===e.t0.response.data.error?(b(ue("You session has expired. Please login again")),b((function(e){e({type:"REMOVE_READER",data:null})})),x("readerAuthCookie",{path:"/"}),O.push("/reader/login")):b(ue("An error occurred. Please try again"));case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(D.jsxs)("div",{children:[Object(D.jsx)(h.a,{position:"static",children:Object(D.jsxs)(Qr.a,{value:c,onChange:function(e,t){i(t)},"aria-label":"simple tabs example",centered:!0,children:[Object(D.jsx)(Xr.a,Object(_.a)({label:"Favorite writers"},nn(0))),Object(D.jsx)(Xr.a,Object(_.a)({label:"Subscribtions"},nn(1))),Object(D.jsx)(Xr.a,Object(_.a)({label:"Comments"},nn(2)))]})}),Object(D.jsx)(rn,{value:c,index:0,children:0!==t.favoritewriters.length?Object(D.jsx)(L.a,{component:"div",children:t.favoritewriters.map((function(e){return Object(D.jsxs)(F.a,{className:p.listItem,children:[Object(D.jsx)(an,{component:l.b,to:"/author/".concat(e.id),children:Object(D.jsx)(M.a,{primary:"".concat(e.firstName," ").concat(e.lastName),classes:{root:p.root}})}),Object(D.jsx)(w.a,{variant:"contained",color:"secondary",className:p.button,startIcon:Object(D.jsx)(en.a,{}),onClick:function(){return v(e)},children:"Remove"})]},e.id)}))}):Object(D.jsx)(g.a,{className:p.text,variant:"subtitle1",children:"No favorited writers"})}),Object(D.jsx)(rn,{value:c,index:1,children:0!==t.subscriptions.length?Object(D.jsx)(L.a,{component:"div",children:t.subscriptions.map((function(e){return Object(D.jsx)(F.a,{button:!0,className:p.listItem,children:Object(D.jsxs)(an,{component:l.b,to:"/author/".concat(e.recipient[0].id),children:[Object(D.jsx)(M.a,{primary:"".concat(e.recipient[0].firstName," ").concat(e.recipient[0].lastName),classes:{root:p.root}}),Object(D.jsx)(g.a,{className:p.text,style:{paddingRight:30},variant:"subtitle1",children:"type: ".concat(e.type)}),Object(D.jsx)(g.a,{className:p.text,variant:"subtitle1",children:"Duration: ".concat(e.startDate.slice(0,-5)," - ").concat(e.endDate.slice(0,-5))})]})},e.id)}))}):Object(D.jsx)(g.a,{className:p.text,variant:"subtitle1",children:"No subscribed writers"})}),Object(D.jsx)(rn,{value:c,index:2,children:0!==t.readerComments.length?Object(D.jsx)(L.a,{component:"div",children:t.readerComments.map((function(e){return Object(D.jsxs)(F.a,{className:p.listItem,children:[Object(D.jsx)(M.a,{className:p.flexGrow,primary:"".concat(e.comment),secondary:"Posted: ".concat(e.date)}),Object(D.jsx)(l.b,{to:"/article/".concat(e.article.id),children:Object(D.jsx)(M.a,{primary:"".concat(e.article.title),classes:{root:p.root}})})]},e.id)}))}):Object(D.jsx)(g.a,{className:p.text,variant:"subtitle1",children:"No comments written"})})]})},on=Object(b.a)({profileContaner:{display:"flex",flexDirection:"row",justifyContent:"flex-start"},infoContainer:{display:"flex",flexDirection:"column",justifyContent:"flex-start",paddingLeft:10},text:{textAlign:"center",paddingTop:50},textGenres:{color:"grey"},balance:{display:"flex",flexDirection:"row",marginTop:5,marginBottom:20},addFundsButton:{marginLeft:10}}),sn=function(){var e=on(),t=Object(n.useState)(!1),r=Object(j.a)(t,2),a=r[0],c=r[1],i=Object(u.g)().id,o=Object(d.c)((function(e){return e.readers})),s=Object(d.c)((function(e){return e.readerImages})),l=o.filter((function(e){return e.id===i}))[0],p=void 0!==l.joined?l.joined:"No data",b=s.filter((function(e){return e.reader===i}))[0].img.data.data,f=btoa(new Uint8Array(b).reduce((function(e,t){return e+String.fromCharCode(t)}),""));return o?Object(D.jsxs)("div",{children:[Object(D.jsxs)("div",{className:e.profileContaner,children:[Object(D.jsx)("img",{width:"200",src:"data:image/jpeg;base64,".concat(f)}),Object(D.jsxs)("div",{className:e.infoContainer,children:[Object(D.jsx)(g.a,{variant:"h4",children:l.userName}),Object(D.jsxs)("div",{className:e.balance,children:[Object(D.jsxs)(g.a,{variant:"h6",children:["My funds: ",l.funds," \u20ac"]}),Object(D.jsx)(w.a,{color:"primary",size:"small",variant:"outlined",id:"addFundsButton",className:e.addFundsButton,onClick:function(){return c(!0)},children:"Add funds"})]}),Object(D.jsxs)(g.a,{variant:"caption",children:["Joined: ",p]})]})]}),Object(D.jsx)(cn,{reader:l}),Object(D.jsx)(Jr,{openDialog:a,setOpenDialog:c,reader:l})]}):Object(D.jsx)("p",{children:"Loading..."})},ln=r(440),un=r(441),dn=Object(b.a)((function(e){return{root:{width:"100%",backgroundColor:e.palette.primary.middleGrey},listItem:{marginBottom:10,textDecoration:"none","&:hover":{backgroundColor:e.palette.primary.hover}},text:{color:e.palette.text.primary,textDecoration:"none"},textWithPadding:{textAlign:"center",paddingBottom:20}}})),pn=function(){var e=dn(),t=Object(d.c)((function(e){return e.writers})),r=Object(d.c)((function(e){return e.writerImages})),n=function(e){var t=r.filter((function(t){return t.writer===e}))[0].img.data.data,n=t&&btoa(new Uint8Array(t).reduce((function(e,t){return e+String.fromCharCode(t)}),""));return Object(D.jsx)(y.a,{alt:"Writers Profile Picture",src:"data:image/jpeg;base64,".concat(n)})};return Object(D.jsxs)("div",{children:[Object(D.jsx)(g.a,{variant:"h3",className:e.textWithPadding,children:"All writers"}),Object(D.jsx)(L.a,{className:e.root,children:t.map((function(t){return Object(D.jsxs)(F.a,{button:!0,component:l.b,to:"/author/".concat(t.id),classes:{hover:e.hover},className:e.listItem,children:[Object(D.jsx)(ln.a,{children:n(t.id)}),Object(D.jsx)(M.a,{primary:Object(D.jsxs)(g.a,{variant:"subtitle1",display:"block",className:e.text,children:[t.firstName," ",t.lastName]}),secondary:t.writerGenres.map((function(t){return Object(D.jsx)(g.a,{variant:"caption",display:"block",className:e.text,children:t},t)}))}),Object(D.jsx)(g.a,{variant:"caption",display:"block",className:e.text,children:t.writerDescription}),Object(D.jsx)(un.a,{})]},t.id)}))})]})},jn=Object(b.a)((function(e){return{root:{flexGrow:1,paddingTop:20},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary},titleText:{color:e.palette.text.grey},infoText:{color:e.palette.text.secondary},card:{backgroundColor:e.palette.primary.lightGrey,minHeight:105},actionArea:{"&:hover $focusHighlight":{opacity:.5}},focusHighlight:{}}})),bn=function(e){var t=e.writer,r=e.setComponentToOpen,n=jn(),a=t.myarticles.map((function(e){return e.views})).reduce((function(e,t){return e+t}),0);return Object(D.jsx)("div",{className:n.root,children:Object(D.jsxs)(fe.a,{container:!0,spacing:2,children:[Object(D.jsx)(fe.a,{item:!0,xs:2,children:Object(D.jsx)(me.a,{variant:"outlined",className:n.card,children:Object(D.jsx)(he.a,{onClick:function(){return r("articles")},classes:{root:n.actionArea,focusHighlight:n.focusHighlight},children:Object(D.jsxs)(xe.a,{children:[Object(D.jsx)(g.a,{className:n.titleText,gutterBottom:!0,children:"My Articles"}),Object(D.jsx)(g.a,{className:n.infoText,variant:"h4",children:t.myarticles.length})]})})})}),Object(D.jsx)(fe.a,{item:!0,xs:2,children:Object(D.jsx)(me.a,{variant:"outlined",className:n.card,children:Object(D.jsx)(he.a,{onClick:function(){return r("subscribers")},classes:{root:n.actionArea,focusHighlight:n.focusHighlight},children:Object(D.jsxs)(xe.a,{children:[Object(D.jsx)(g.a,{className:n.titleText,gutterBottom:!0,children:"Subscribers"}),Object(D.jsx)(g.a,{className:n.infoText,variant:"h4",children:t.subscribers.length})]})})})}),Object(D.jsx)(fe.a,{item:!0,xs:2,children:Object(D.jsx)(me.a,{variant:"outlined",className:n.card,children:Object(D.jsx)(he.a,{onClick:function(){return r("followers")},classes:{root:n.actionArea,focusHighlight:n.focusHighlight},children:Object(D.jsxs)(xe.a,{children:[Object(D.jsx)(g.a,{className:n.titleText,gutterBottom:!0,children:"Followers"}),Object(D.jsx)(g.a,{className:n.infoText,variant:"h4",children:t.followers.length})]})})})}),Object(D.jsx)(fe.a,{item:!0,xs:2,children:Object(D.jsx)(me.a,{variant:"outlined",className:n.card,children:Object(D.jsx)(he.a,{id:"myPricesCardButton",onClick:function(){return r("prices")},classes:{root:n.actionArea,focusHighlight:n.focusHighlight},children:Object(D.jsxs)(xe.a,{children:[Object(D.jsx)(g.a,{className:n.titleText,gutterBottom:!0,variant:"body2",children:"My prices, \u20ac"}),Object(D.jsxs)(g.a,{className:n.infoText,variant:"h4",children:[t.oneArticlePrice||0,", ",t.montlySubscriptionPrice||0,", ",t.yearlySubscriptionPrice||0]})]})})})}),Object(D.jsx)(fe.a,{item:!0,xs:2,children:Object(D.jsx)(me.a,{variant:"outlined",className:n.card,children:Object(D.jsx)(he.a,{children:Object(D.jsxs)(xe.a,{children:[Object(D.jsx)(g.a,{className:n.titleText,gutterBottom:!0,children:"Total Views"}),Object(D.jsx)(g.a,{className:n.infoText,variant:"h4",children:a})]})})})}),Object(D.jsx)(fe.a,{item:!0,xs:2,children:Object(D.jsx)(me.a,{variant:"outlined",className:n.card,children:Object(D.jsx)(he.a,{children:Object(D.jsxs)(xe.a,{children:[Object(D.jsx)(g.a,{className:n.titleText,gutterBottom:!0,children:"Earnings, \u20ac"}),Object(D.jsx)(g.a,{className:n.infoText,variant:"h4",children:t.earnings?t.earnings:0})]})})})})]})})},fn=r(444),mn=r(447),hn=r(442),xn=r(443),On=r(445),gn=r(446),vn=r(148),yn=Object(b.a)({main:{marginTop:20},table:{minWidth:650}}),wn=Object(f.a)((function(e){return{head:{backgroundColor:e.palette.primary.main,color:e.palette.text.primary},body:{backgroundColor:e.palette.primary.lightGrey,color:e.palette.text.secondary,fontSize:14}}}))(hn.a),Nn=function(e){var t=e.articles,r=yn();return Object(D.jsx)(xn.a,{component:vn.a,className:r.main,children:Object(D.jsxs)(fn.a,{className:r.table,"aria-label":"simple table",children:[Object(D.jsx)(On.a,{children:Object(D.jsxs)(gn.a,{children:[Object(D.jsx)(wn,{children:"Articles"}),Object(D.jsx)(wn,{align:"center",children:"Type"}),Object(D.jsx)(wn,{align:"center",children:"Genres"}),Object(D.jsx)(wn,{align:"center",children:"Views"}),Object(D.jsx)(wn,{align:"center",children:"Comments"}),Object(D.jsx)(wn,{align:"center",children:"Published"})]})}),Object(D.jsx)(mn.a,{children:t.map((function(e){return Object(D.jsxs)(gn.a,{hover:!0,children:[Object(D.jsx)(wn,{component:"th",scope:"row",children:e.title}),Object(D.jsx)(wn,{align:"center",children:"yes"===e.paid?"Paid":"Free"}),Object(D.jsx)(wn,{align:"center",children:e.genres.map((function(e){return"".concat(e," ")}))}),Object(D.jsx)(wn,{align:"center",children:e.views}),Object(D.jsx)(wn,{align:"center",children:0===e.comments.length?0:e.comments.length}),Object(D.jsx)(wn,{align:"center",children:e.published})]},e.id)}))})]})})},Cn=Object(b.a)((function(e){return{main:{marginTop:20},table:{minWidth:650},text:{color:e.palette.text.secondary,textTransform:"uppercase"}}})),Tn=Object(f.a)((function(e){return{head:{backgroundColor:e.palette.primary.main,color:e.palette.text.primary},body:{backgroundColor:e.palette.primary.lightGrey,color:e.palette.text.secondary,fontSize:14}}}))(hn.a),An=function(e){var t=e.followers,r=Cn();return Object(D.jsx)(xn.a,{component:vn.a,className:r.main,children:Object(D.jsxs)(fn.a,{className:r.table,"aria-label":"simple table",children:[Object(D.jsx)(On.a,{children:Object(D.jsx)(gn.a,{children:Object(D.jsx)(Tn,{children:"Follower username"})})}),Object(D.jsx)(mn.a,{children:0===t.length?Object(D.jsx)(gn.a,{hover:!0,children:Object(D.jsx)(Tn,{component:"th",scope:"row",children:"No followers"})}):t.map((function(e){return Object(D.jsx)(gn.a,{hover:!0,children:Object(D.jsx)(Tn,{component:"th",scope:"row",children:e.userName})},e.id)}))})]})})},Sn=Object(b.a)((function(e){return{main:{marginTop:20},table:{minWidth:650},text:{color:e.palette.text.secondary,textTransform:"uppercase"}}})),kn=Object(f.a)((function(e){return{head:{backgroundColor:e.palette.primary.main,color:e.palette.text.primary},body:{backgroundColor:e.palette.primary.lightGrey,color:e.palette.text.secondary,fontSize:14}}}))(hn.a),Rn=function(e){var t=e.subscribers,r=Sn();return Object(D.jsx)(xn.a,{component:vn.a,className:r.main,children:Object(D.jsxs)(fn.a,{className:r.table,"aria-label":"simple table",children:[Object(D.jsx)(On.a,{children:Object(D.jsxs)(gn.a,{children:[Object(D.jsx)(kn,{children:"Subscribers username"}),Object(D.jsx)(kn,{align:"center",children:"Type"}),Object(D.jsx)(kn,{align:"center",children:"Duration"})]})}),Object(D.jsx)(mn.a,{children:0===t.length?Object(D.jsxs)(gn.a,{hover:!0,children:[Object(D.jsx)(kn,{component:"th",scope:"row",children:"No subscribers"}),Object(D.jsx)(kn,{align:"center"}),Object(D.jsx)(kn,{align:"center"})]}):t.map((function(e){return Object(D.jsxs)(gn.a,{hover:!0,children:[Object(D.jsx)(kn,{component:"th",scope:"row",children:e.subscriber[0].userName}),Object(D.jsx)(kn,{align:"center",children:e.type.charAt(0).toUpperCase()+e.type.slice(1)}),Object(D.jsxs)(kn,{align:"center",children:[e.startDate.slice(0,-6)," - ",e.endDate.slice(0,-6)]})]},e.id)}))})]})})},In=r(113),En=r(201),Dn=r.n(En),Pn=r(200),Bn=r.n(Pn),_n=Object(b.a)((function(e){return{main:{marginTop:20},table:{minWidth:650},text:{color:e.palette.text.primary,textTransform:"uppercase"},cell:{flexGrow:1},inputColor:{color:"#000"}}})),Wn=Object(f.a)((function(e){return{head:{backgroundColor:e.palette.primary.main,color:e.palette.text.primary},body:{backgroundColor:e.palette.primary.lightGrey,color:e.palette.text.secondary,fontSize:14}}}))(hn.a),Ln=function(e){var t=e.isEditMode,r=e.value,n=e.name,a=e.onChange,c=_n();return Object(D.jsx)(Wn,{align:"center",children:t?Object(D.jsx)(E.a,{type:"number",size:"small",variant:"outlined",value:r,name:n,id:"priceInput-".concat(n),onChange:function(e){return a(e)},InputProps:{className:c.inputColor},style:{width:100}}):r})},Fn=function(e){var t=e.writer,r=_n(),a=Object(d.b)(),c=Object(n.useState)(!1),i=Object(j.a)(c,2),l=i[0],p=i[1],b=Object(re.a)(["writerAuthCookie"]),f=Object(j.a)(b,3),m=(f[0],f[1],f[2]),h=Object(u.f)(),x=Object(n.useState)({oneArticlePrice:t.oneArticlePrice||0,montlySubscriptionPrice:t.montlySubscriptionPrice||0,yearlySubscriptionPrice:t.yearlySubscriptionPrice||0}),g=Object(j.a)(x,2),v=g[0],y=g[1],w=function(){var e=Object(s.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a(at(v,t));case 3:a(le("Prices updated")),p(!1),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("error response",e.t0.response),"Unauthorized"===e.t0.response.statusText&&"token expired"===e.t0.response.data.error?(a(ue("You session has expired. Please login again")),a((function(e){e({type:"REMOVE_WRITER",data:null})})),m("writerAuthCookie",{path:"/"}),h.push("/writerssection/login")):a(ue("An error occurred. Please try again"));case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),N=function(e){y(Object(_.a)(Object(_.a)({},v),{},Object(In.a)({},e.target.name,Number(e.target.value))))};return Object(D.jsx)(xn.a,{component:vn.a,className:r.main,children:Object(D.jsxs)(fn.a,{className:r.table,"aria-label":"simple table",children:[Object(D.jsx)(On.a,{children:Object(D.jsxs)(gn.a,{children:[Object(D.jsx)(Wn,{width:"25%",children:"Subscriptions"}),Object(D.jsx)(Wn,{width:"20%",align:"center",children:"1 Article, \u20ac"}),Object(D.jsx)(Wn,{width:"20%",align:"center",children:"1 Month, \u20ac"}),Object(D.jsx)(Wn,{width:"20%",align:"center",children:"1 Year, \u20ac"}),Object(D.jsx)(Wn,{width:"15%"})]})}),Object(D.jsx)(mn.a,{children:Object(D.jsxs)(gn.a,{hover:!0,children:[Object(D.jsx)(Wn,{width:"25%",component:"th",scope:"row",children:"Price"}),Object(D.jsx)(Ln,{width:"20%",isEditMode:l,value:v.oneArticlePrice,name:"oneArticlePrice",onChange:N}),Object(D.jsx)(Ln,{width:"20%",isEditMode:l,value:v.montlySubscriptionPrice,name:"montlySubscriptionPrice",onChange:N}),Object(D.jsx)(Ln,{width:"20%",isEditMode:l,value:v.yearlySubscriptionPrice,name:"yearlySubscriptionPrice",onChange:N}),Object(D.jsx)(Wn,{width:"15%",align:"right",children:l?Object(D.jsxs)("div",{className:r.editMode,children:[Object(D.jsx)(O.a,{"aria-label":"done",onClick:function(){return w()},id:"confirmChangedPricesButton",children:Object(D.jsx)(Bn.a,{})}),Object(D.jsx)(O.a,{"aria-label":"cancel",onClick:function(){return y({oneArticlePrice:t.oneArticlePrice,montlySubscriptionPrice:t.montlySubscriptionPrice,yearlySubscriptionPrice:t.yearlySubscriptionPrice}),void p(!1)},children:Object(D.jsx)(Dn.a,{})})]}):Object(D.jsx)(O.a,{id:"editPricesButton","aria-label":"delete",onClick:function(){return p(!0)},children:Object(D.jsx)(A.a,{})})})]})})]})})},Mn=Object(b.a)({profileContaner:{display:"flex",flexDirection:"row",justifyContent:"flex-start"},infoContainer:{display:"flex",flexDirection:"column",justifyContent:"flex-start",paddingLeft:10},genresList:{display:"flex",flexDirection:"row",justifyContent:"flex-start"}}),Gn=function(){var e=Mn(),t=Object(u.g)().id,r=Object(d.c)((function(e){return e.writers})),a=Object(d.c)((function(e){return e.writerImages})),c=r.filter((function(e){return e.id===t}))[0],i=Object(n.useState)("articles"),o=Object(j.a)(i,2),s=o[0],l=o[1],p=a.filter((function(e){return e.writer===t}))[0].img.data.data,b=p&&btoa(new Uint8Array(p).reduce((function(e,t){return e+String.fromCharCode(t)}),""));return Object(D.jsxs)("div",{children:[Object(D.jsxs)("div",{className:e.profileContaner,children:[Object(D.jsx)("img",{width:"200",src:"data:image/jpeg;base64,".concat(b)}),Object(D.jsxs)("div",{className:e.infoContainer,children:[Object(D.jsxs)(g.a,{variant:"h4",children:[c.firstName," ",c.lastName]}),Object(D.jsx)(g.a,{variant:"body1",children:c.writerDescription}),Object(D.jsx)(L.a,{className:e.genresList,children:c.writerGenres.map((function(e){return Object(D.jsx)(g.a,{variant:"body2",children:"".concat(e,".")},e)}))}),Object(D.jsx)(g.a,{variant:"caption",children:c.joined})]})]}),Object(D.jsx)(bn,{writer:c,setComponentToOpen:l}),function(){switch(s){case"articles":return Object(D.jsx)(Nn,{articles:c.myarticles});case"followers":return Object(D.jsx)(An,{followers:c.followers});case"subscribers":return Object(D.jsx)(Rn,{subscribers:c.subscribers});case"prices":return Object(D.jsx)(Fn,{writer:c})}}()]})},Un=r(202),Vn=r.n(Un),qn=r(203),zn=r.n(qn),Hn="".concat("http://localhost:3001","/api/images/articles"),Yn={getAll:function(){var e=Object(s.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.a.get(Hn);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getOne:function(){var e=Object(s.a)(o.a.mark((function e(t){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.a.get("".concat(Hn,"/").concat(t));case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),create:function(){var e=Object(s.a)(o.a.mark((function e(t){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.a.post(Hn,t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Jn=function(){return function(){var e=Object(s.a)(o.a.mark((function e(t){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yn.getAll();case 2:r=e.sent,t({type:"INIT_ARTICLES_IMAGES",data:r});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Kn=function(e){return function(){var t=Object(s.a)(o.a.mark((function t(r){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r({type:"ADD_ARTICLE_IMAGE",data:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},$n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_ARTICLES_IMAGES":return t.data;case"ADD_ARTICLE_IMAGE":return e.concat(t.data);default:return e}},Qn=Object(b.a)((function(e){return{inputColor:{color:e.palette.text.secondary},loginText:{textAlign:"center",marginBottom:30},container:{marginTop:200,display:"flex",alignItems:"center",justifyContent:"center",height:"80vh"},item:{maxWidth:600,borderColor:e.palette.primary.main,borderRadius:10,borderWidth:1,borderStyle:"solid",background:e.palette.primary.lightGrey},form:{margin:30},paddings:{marginBottom:20},button:{display:"block",marginLeft:"auto",marginRight:"auto"},priceContainer:{display:"flex",flexDirection:"row"},priceItem:{marginRight:5},radioGroup:{display:"inline-block"},formControl:{display:"flex",alignItems:"center",justifyContent:"center",marginTop:10,marginBottom:10},checkBoxMargins:{marginRight:0,marginLeft:0},contentField:{marginBottom:15}}})),Xn={title:"",content:[],genres:[],paid:"no",files:[]},Zn=$t.d().shape({title:$t.f().min(10,"Too Short").max(100,"Too Long").required("Required"),content:$t.a().min(1,"At least one paragraph required").of($t.f().min(50,"Too Short")),genres:$t.a().min(1,"Check at least one category"),paid:$t.b().oneOf(["yes","no"]),files:$t.a().min(1,"One image required")}),ea=function(e){var t=e.values,r=e.errors,n=e.touched,a=e.handleChange,c=e.handleBlur,i=e.handleSubmit,o=e.setFieldValue,s=Qn();return Object(D.jsx)("div",{className:s.container,children:Object(D.jsxs)("div",{className:s.item,children:[Object(D.jsx)(g.a,{variant:"h4",style:{textAlign:"center",marginTop:20},children:"Create an article"}),Object(D.jsxs)("form",{onSubmit:i,className:s.form,children:[Object(D.jsx)(g.a,{variant:"h6",className:s.formControl,children:"Title"}),Object(D.jsx)(Kt.a,{component:Xt.c,onChange:a,onBlur:c,value:t.title,error:n.title&&Boolean(r.title),helperText:n.title&&r.title,id:"title",name:"title",label:"Title",variant:"outlined",fullWidth:!0,className:s.paddings,InputProps:{className:s.inputColor}}),Object(D.jsx)(g.a,{variant:"h6",className:s.formControl,children:"Content"}),Object(D.jsx)(Kt.b,{name:"content",render:function(e){var a=e.pop,c=e.push;return Object(D.jsxs)("div",{children:[t.content.map((function(e,t){return Object(D.jsxs)("div",{children:[Object(D.jsx)(Kt.a,{component:Xt.c,value:e.index,label:"Paragraph ".concat(t+1),variant:"outlined",name:"content.".concat(t),type:"text",id:"paragraphInput-".concat(t),multiline:!0,fullWidth:!0,className:s.contentField,InputProps:{className:s.inputColor}}),r.content&&r.content[t]&&n.content&&n.content[t]]},t)})),Object(D.jsx)(O.a,{id:"addParagraphButton",color:"primary",size:"small","aria-label":"upload picture",component:"span",onClick:function(){return c("")},children:Object(D.jsx)(Vn.a,{})}),Object(D.jsx)(O.a,{className:s.minusItem,color:"primary","aria-label":"upload picture",size:"small",component:"span",onClick:a,children:Object(D.jsx)(zn.a,{})})]})}}),Object(D.jsxs)(yt.a,{component:"fieldset",className:s.formControl,children:[Object(D.jsx)(g.a,{variant:"h6",children:"Categories"}),r.genres&&n.genres&&Object(D.jsx)(g.a,{variant:"caption",style:{color:"#f44336"},children:r.genres}),Object(D.jsx)(Qt.a,{row:!0,children:q.map((function(e){return Object(D.jsx)(vt.a,{classes:{root:s.checkBoxMargins},control:Object(D.jsx)(Kt.a,{component:Xt.a,classes:{root:s.checkBoxMargins},type:"checkbox",name:"genres",value:e,Label:{label:"".concat(e)}})},e)}))})]}),Object(D.jsx)(g.a,{variant:"h6",className:s.formControl,children:"Paid"}),Object(D.jsxs)(Kt.a,{component:Xt.b,name:"paid",row:!0,defaultValue:"no",className:s.formControl,children:[Object(D.jsx)(vt.a,{value:"yes",control:Object(D.jsx)(Ot.a,{}),label:"Yes"}),Object(D.jsx)(vt.a,{value:"no",control:Object(D.jsx)(Ot.a,{}),label:"No"})]}),Object(D.jsx)(g.a,{variant:"h6",className:s.formControl,children:"Cover photo"}),Object(D.jsx)("div",{className:s.formControl,children:r.files&&n.files&&Object(D.jsx)(g.a,{variant:"caption",style:{color:"#f44336"},children:r.files})}),Object(D.jsx)(mr,{setFieldValue:o,values:t}),Object(D.jsx)(w.a,{color:"primary",variant:"contained",type:"submit",className:s.button,children:"Publish"})]})]})})},ta=function(){var e=Object(u.f)(),t=Object(d.c)((function(e){return e.writer})),r=Object(d.b)(),n=Object(re.a)(["writerAuthCookie"]),a=Object(j.a)(n,3),c=(a[0],a[1],a[2]),i=function(){var n=Object(s.a)(o.a.mark((function n(a){var i,s,l,u,d;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,(i=new FormData).append("file",a.files[0]),n.next=5,Yn.create(i);case 5:return s=n.sent,l=Object(_.a)(Object(_.a)({},a),{},{imageId:s.id}),n.next=9,Te.create(l);case 9:return u=n.sent,d=Object(_.a)(Object(_.a)({},s),{},{article:u.id}),n.next=13,r(Kn(d));case 13:return n.next=15,r(Se(u));case 15:return n.next=17,r(ct(u));case 17:r(le("Article created")),e.push("/writerssection/profile/".concat(t.id)),n.next=25;break;case 21:n.prev=21,n.t0=n.catch(0),console.log("error response",n.t0.response),"Unauthorized"===n.t0.response.statusText&&"token expired"===n.t0.response.data.error?(r(ue("You session has expired. Please login again")),r((function(e){e({type:"REMOVE_WRITER",data:null})})),c("writerAuthCookie",{path:"/"}),e.push("/writerssection/login")):r(ue("An error occurred. Please try again"));case 25:case"end":return n.stop()}}),n,null,[[0,21]])})));return function(e){return n.apply(this,arguments)}}();return Object(D.jsx)("div",{children:Object(D.jsx)(Kt.c,{initialValues:Xn,validationSchema:Zn,onSubmit:i,children:function(e){var t=e.values,r=e.errors,n=e.touched,a=e.handleChange,c=e.handleBlur,i=e.handleSubmit,o=e.setFieldValue;return Object(D.jsx)(ea,{values:t,errors:r,touched:n,handleChange:a,handleBlur:c,handleSubmit:i,setFieldValue:o})}})})},ra="".concat("http://localhost:3001","/api/subscriptions"),na={getAll:function(){var e=Object(s.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.a.get(ra);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),deleteMany:function(){var e=Object(s.a)(o.a.mark((function e(t){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.a.delete(ra,{data:t});case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},aa="".concat("http://localhost:3001","/api/reader/refresh"),ca={refreshReader:function(){var e=Object(s.a)(o.a.mark((function e(t){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.a.post(aa,t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},ia="".concat("http://localhost:3001","/api/writer/refresh"),oa={refreshWriter:function(){var e=Object(s.a)(o.a.mark((function e(t){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.a.post(ia,t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},sa=function(){var e=Object(d.b)(),t=Object(d.c)((function(e){return e.reader})),r=Object(d.c)((function(e){return e.writer}));Object(n.useEffect)((function(){function t(){return(t=Object(s.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(Ae());case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()})),Object(n.useEffect)((function(){function t(){return(t=Object(s.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(Ze());case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()})),Object(n.useEffect)((function(){function t(){return(t=Object(s.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(Fe());case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()})),Object(n.useEffect)((function(){function t(){return(t=Object(s.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(Jn());case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()})),Object(n.useEffect)((function(){function t(){return(t=Object(s.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(tr());case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()})),Object(n.useEffect)((function(){function t(){return(t=Object(s.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(Lr());case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}));var a=function(){var t=Object(s.a)(o.a.mark((function t(){var r,n,a,c,i;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=72e5,t.next=3,na.getAll();case 3:if(n=t.sent,a=Date.now()+r,!((c=n.filter((function(e){return e.expirationDate<a}))).length>0)){t.next=12;break}return i=c.map((function(e){return e.id})),t.next=10,na.deleteMany(c);case 10:e(it(i)),e(ze(i));case 12:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),c=function(){var e=Object(s.a)(o.a.mark((function e(){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={id:t.id},e.next=3,ca.refreshReader(r);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),i=function(){var e=Object(s.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={id:r.id},e.next=3,oa.refreshWriter(t);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return setInterval((function(){a()}),6e4),setInterval((function(){t&&c(),r&&i()}),6e4),Object(D.jsxs)(l.a,{children:[Object(D.jsx)(be,{}),Object(D.jsx)(p.a,{children:Object(D.jsxs)(u.c,{children:[Object(D.jsx)(u.a,{exact:!0,path:"/article/:id",children:Object(D.jsx)(_t,{})}),Object(D.jsx)(u.a,{exact:!0,path:"/genres/:genre",children:Object(D.jsx)(Tt,{})}),Object(D.jsx)(u.a,{exact:!0,path:"/search/:searchResult",children:Object(D.jsx)(Tt,{})}),Object(D.jsx)(u.a,{exact:!0,path:"/author/:author",children:Object(D.jsx)(Jt,{})}),Object(D.jsx)(u.a,{exact:!0,path:"/reader/login",children:Object(D.jsx)(Tr,{})}),Object(D.jsx)(u.a,{exact:!0,path:"/reader/signup",children:Object(D.jsx)(zr,{})}),Object(D.jsx)(u.a,{exact:!0,path:"/reader/profile/:id",children:Object(D.jsx)(sn,{})}),Object(D.jsx)(u.a,{exact:!0,path:"/writerssection/signup",children:Object(D.jsx)(vr,{})}),Object(D.jsx)(u.a,{exact:!0,path:"/writerssection/login",children:Object(D.jsx)(Br,{})}),Object(D.jsx)(u.a,{exact:!0,path:"/writerssection/profile/:id",children:Object(D.jsx)(Gn,{})}),Object(D.jsx)(u.a,{exact:!0,path:"/writerssection/newarticle",children:Object(D.jsx)(ta,{})}),Object(D.jsx)(u.a,{exact:!0,path:"/allwriters",children:Object(D.jsx)(pn,{})}),Object(D.jsx)(u.a,{exact:!0,path:"/",children:Object(D.jsx)(Tt,{})})]})}),Object(D.jsx)(Rr,{})]})},la=r(208),ua=r(95),da=r(35),pa=r(204),ja=r.n(pa),ba=r(121),fa=Object(da.c)({articles:Ie,writer:oe,writers:ot,reader:te,readers:He,notification:de,articleImages:$n,writerImages:nr,readerImages:Mr}),ma={key:"root",storage:ja.a},ha=Object(ba.a)(ma,fa),xa=Object(la.a)({reducer:ha,middleware:[ua.a]}),Oa=r(450),ga=r(449),va=r(205),ya=Object(ba.b)(xa);c.a.render(Object(D.jsx)(d.a,{store:xa,children:Object(D.jsx)(va.a,{loading:Object(D.jsx)("p",{children:"Loading..."}),persistor:ya,children:Object(D.jsx)(ga.a,{children:Object(D.jsx)(Oa.a,{theme:ir,children:Object(D.jsx)(sa,{})})})})}),document.getElementById("root"))}},[[359,1,2]]]);
//# sourceMappingURL=main.719dbf30.chunk.js.map