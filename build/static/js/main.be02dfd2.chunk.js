(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{349:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r(21),c=r.n(a),i=r(11),o=r(177),s=r(118),l=r(434),u=r(433),d=r(3),p=r.n(d),j=r(8),b=r(16),f=r(26),m=r(432),h=r(20),x=r(402),O=r(392),g=r(6),v=r(442),y=r(403),w=r(404),N=r(205),C=r(74),T=r(206),A=r(443),k=r(356),S=r(137),R=r.n(S),I=r(111),E=r.n(I),D=r(182),P=r.n(D),B=r(405),_=r(394),W=r(179),L=r.n(W),F=r(1),M=Object(O.a)((function(e){return{icons:{fill:e.icons.fill,fontSize:e.icons.fontSize},label:{color:"white"}}})),G=function(){var e=Object(f.f)(),t=M(),r=Object(n.useState)(!1),a=Object(h.a)(r,2),c=a[0],i=a[1],o=Object(n.useState)(""),s=Object(h.a)(o,2),l=s[0],u=s[1];return Object(F.jsxs)("div",{style:{display:"inline-block"},children:[Object(F.jsx)(_.a,{label:"Search",type:"search",id:"searchInput",value:l,onChange:function(e){u(e.target.value)},variant:"outlined",onKeyPress:function(t){13===t.charCode&&(t.preventDefault(),i(!1),e.push("/search/".concat(l)),u(""))},InputLabelProps:{classes:{root:t.label}},style:{display:c?"inline-block":"none"}}),Object(F.jsx)(N.a,{onClick:function(){i(!c)},id:"searchFieldButton",children:Object(F.jsx)(L.a,{className:t.icons})})]})},U=r(9),V=r(398),q=r(399),z=r(400),H=r(401),Y=r(441),J=r(180),K=r.n(J),$=["Business","Cars","Entertainment","Family","Health","Politics","Religion","Science","Sport","Technology","Travel","World"],Q=[{text:"Writer log in",linkText:"login"},{text:"Become a writer",linkText:"signup"}],X=["My Favorites","My Subscriptions"].concat($),Z=Object(O.a)((function(e){return{list:{width:250},icon:{fontSize:e.icons.fontSize,fill:e.icons.fill},drawerpadding:{padding:0},listItemText:{primary:e.palette.text.primary},paper:{background:e.palette.primary.lighter},paperAnchorDockedLeft:{borderRight:0},drawerHeader:Object(U.a)({display:"flex",alignItems:"center",background:e.palette.primary.main,justifyContent:"flex-start",padding:e.spacing(0,1),marginTop:"0"},e.mixins.toolbar),divider:{background:e.palette.primary.light}}})),ee=function(e){var t=e.leftSideMenuIsOpen,r=e.setLeftSideMenuIsOpenIsOpen,n=Z(),a=Object(i.c)((function(e){return e.reader}))?X:$;return Object(F.jsx)(Y.a,{classes:{paper:n.paper,paperAnchorDockedLeft:n.paperAnchorDockedLeft},anchor:"left",variant:"persistent",open:t,onClose:function(){return r(!1)},children:Object(F.jsx)("div",{className:n.list,role:"button",onClick:function(){return r(!1)},onKeyDown:function(){return r(!1)},children:Object(F.jsxs)(V.a,{className:n.drawerpadding,children:[Object(F.jsx)("div",{className:n.drawerHeader,children:Object(F.jsx)(N.a,{onClick:function(){return r(!1)},children:Object(F.jsx)(K.a,{className:n.icon})})}),a.map((function(e){return Object(F.jsx)(b.b,{style:{textDecoration:"none",color:"inherit"},to:"/genres/".concat(e),children:Object(F.jsx)(q.a,{button:!0,children:Object(F.jsx)(z.a,{primary:e,className:n.listItemText})})},e)})),Object(F.jsx)(H.a,{light:!0,classes:{light:n.divider}}),Object(F.jsx)(b.b,{style:{textDecoration:"none",color:"inherit"},to:"/allwriters",children:Object(F.jsx)(q.a,{button:!0,children:Object(F.jsx)(z.a,{primary:"All Writers",className:n.listItemText})})}),Object(F.jsx)(H.a,{light:!0,classes:{light:n.divider}}),Q.map((function(e){return Object(F.jsx)(b.b,{style:{textDecoration:"none",color:"grey"},to:"/writerssection/".concat(e.linkText),children:Object(F.jsx)(q.a,{button:!0,children:Object(F.jsx)(z.a,{primary:e.text,className:n.listItemText})})},e.linkText)}))]})})})},te=r(17),re=r.n(te),ne="".concat("http://localhost:3001","/api/reader/login"),ae=function(){var e=Object(j.a)(p.a.mark((function e(t){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re.a.post(ne,t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ce={login:ae},ie=function(e){return function(){var t=Object(j.a)(p.a.mark((function t(r){var n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ce.login(e);case 2:n=t.sent,r({type:"ADD_READER",data:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_READER":case"REMOVE_READER":return t.data;default:return e}},se="".concat("http://localhost:3001","/api/writer/login"),le=function(){var e=Object(j.a)(p.a.mark((function e(t){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re.a.post(se,t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ue={login:le},de=function(e){return function(){var t=Object(j.a)(p.a.mark((function t(r){var n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ue.login(e);case 2:n=t.sent,r({type:"ADD_WRITER",data:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_WRITER":case"REMOVE_WRITER":return t.data;default:return e}},je={open:!1,message:"",messageType:""},be=function(e){return function(t){t({type:"NOTIFICATION",data:{open:!0,message:e,messageType:"success"}}),setTimeout((function(){t({type:"NOTIFICATION",data:{open:!1,message:"",messageType:"success"}})}),6e3)}},fe=function(e){return function(t){t({type:"NOTIFICATION",data:{open:!0,message:e,messageType:"error"}}),setTimeout((function(){t({type:"NOTIFICATION",data:{open:!1,message:"",messageType:"error"}})}),6e3)}},me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NOTIFICATION":return t.data;default:return e}},he=Object(O.a)((function(e){return{appbar:{background:e.primary},root:{flexGrow:1,marginBottom:25},leftElement:{flex:1,display:"flex",justifyContent:"center"},leftElementChild:{marginRight:"auto"},rightElement:{flex:1,display:"flex",justifyContent:"center"},rightElementChild:{marginLeft:"auto"},menuIcon:{fill:e.icons.fill,fontSize:e.icons.fontSize},titleText:{textDecoration:"none",color:"inherit"},button:{marginRight:10},accountIcon:{fill:e.icons.fill,fontSize:e.icons.fontSize},signUpButton:{color:e.palette.secondary},menuItem:{color:e.palette.text.secondary},linkNoDecoration:{textDecoration:"none"},toolbar:e.mixins.toolbar}})),xe=Object(g.a)((function(e){return{tooltip:{backgroundColor:e.palette.primary.main,fontSize:15}}}))(v.a),Oe=function(){var e=Object(i.b)(),t=Object(f.f)(),r=Object(i.c)((function(e){return e.reader})),a=Object(i.c)((function(e){return e.writer})),c=Object(i.c)((function(e){return e.readerImages})),o=Object(i.c)((function(e){return e.writerImages})),s=he(),l=Object(n.useState)(!1),u=Object(h.a)(l,2),d=u[0],p=u[1],j=Object(x.a)(["readerAuthCookie","writerAuthCookie"]),m=Object(h.a)(j,3),O=(m[0],m[1],m[2]),g=r&&0!==c.length&&c.filter((function(e){return e.reader===r.id}))[0].img.data.data,v=btoa(new Uint8Array(g).reduce((function(e,t){return e+String.fromCharCode(t)}),"")),S=a&&0!==o.length&&o.filter((function(e){return e.writer===a.id}))[0].img.data.data,I=S&&btoa(new Uint8Array(S).reduce((function(e,t){return e+String.fromCharCode(t)}),""));return Object(F.jsxs)("div",{className:s.root,children:[Object(F.jsx)(ee,{leftSideMenuIsOpen:d,setLeftSideMenuIsOpenIsOpen:p}),Object(F.jsx)(y.a,{position:"fixed",className:s.appbar,children:Object(F.jsxs)(w.a,{children:[Object(F.jsx)("div",{className:s.leftElement,children:Object(F.jsx)(N.a,{className:s.leftElementChild,color:"inherit",id:"leftSideMenuButton","aria-label":"menu",onClick:function(){p(!0)},style:{display:a?"none":"block"},children:Object(F.jsx)(P.a,{className:s.menuIcon})})}),a?Object(F.jsx)(C.a,{variant:"h6",className:s.titleText,children:"News App"}):Object(F.jsx)(C.a,{component:b.b,to:"/",variant:"h6",id:"newsAppHome",className:s.titleText,children:"News App"}),r&&!a?Object(F.jsx)("div",{className:s.rightElement,children:Object(F.jsxs)("div",{className:s.rightElementChild,children:[Object(F.jsx)(xe,{TransitionComponent:T.a,TransitionProps:{timeout:600},title:"Search",children:Object(F.jsx)("span",{children:Object(F.jsx)(G,{})})}),Object(F.jsx)(xe,{TransitionComponent:T.a,TransitionProps:{timeout:600},title:"Profile",children:Object(F.jsx)("span",{children:Object(F.jsx)(N.a,{"aria-controls":"menu-appbar","aria-haspopup":"true",className:"readerProfileAvatarButton",component:b.b,to:"/reader/profile/".concat(r.id),children:0===c.length?Object(F.jsx)(B.a,{animation:"wave",children:Object(F.jsx)(A.a,{})}):Object(F.jsx)(A.a,{alt:"Reader Profile Picture",src:"data:image/jpeg;base64,".concat(v)})})})}),Object(F.jsx)(xe,{TransitionComponent:T.a,TransitionProps:{timeout:600},title:"Log out",children:Object(F.jsx)("span",{children:Object(F.jsx)(N.a,{"aria-controls":"menu-appbar","aria-haspopup":"true",className:"readerLogoutButton",onClick:function(){e((function(e){e({type:"REMOVE_READER",data:null})})),e(be("Logged out successfully")),O("readerAuthCookie",{path:"/"}),t.push("/")},children:Object(F.jsx)(R.a,{className:s.accountIcon})})})})]})}):a&&!r?Object(F.jsx)("div",{className:s.rightElement,children:Object(F.jsxs)("div",{className:s.rightElementChild,children:[Object(F.jsx)(xe,{TransitionComponent:T.a,TransitionProps:{timeout:600},title:"Write an article",children:Object(F.jsx)("span",{children:Object(F.jsx)(N.a,{"aria-controls":"menu-appbar","aria-haspopup":"true",component:b.b,to:"/writerssection/newarticle",id:"newArticleIcon",children:Object(F.jsx)(E.a,{className:s.accountIcon})})})}),Object(F.jsx)(xe,{TransitionComponent:T.a,TransitionProps:{timeout:600},title:"Profile",children:Object(F.jsx)("span",{children:Object(F.jsx)(N.a,{"aria-controls":"menu-appbar","aria-haspopup":"true",component:b.b,to:"/writerssection/profile/".concat(a.id),children:0===o.length?Object(F.jsx)(B.a,{animation:"wave",children:Object(F.jsx)(A.a,{})}):Object(F.jsx)(A.a,{alt:"Writers Profile Picture",src:"data:image/jpeg;base64,".concat(I)})})})}),Object(F.jsx)(xe,{TransitionComponent:T.a,TransitionProps:{timeout:600},title:"Log out",children:Object(F.jsx)("span",{children:Object(F.jsx)(N.a,{"aria-controls":"menu-appbar",className:"writerLogoutButton","aria-haspopup":"true",onClick:function(){e((function(e){e({type:"REMOVE_WRITER",data:null})})),e(be("Logged out successfully")),O("writerAuthCookie",{path:"/"}),t.push("/")},children:Object(F.jsx)(R.a,{className:s.accountIcon})})})})]})}):Object(F.jsx)("div",{className:s.rightElement,children:Object(F.jsxs)("div",{className:s.rightElementChild,children:[Object(F.jsx)(G,{}),Object(F.jsx)(k.a,{color:"inherit",to:"/reader/login",component:b.b,className:s.button,children:"Log in"}),Object(F.jsx)(k.a,{variant:"contained",to:"/reader/signup",component:b.b,className:s.signUpButton,children:"Sign Up"})]})})]})}),Object(F.jsx)("div",{className:s.toolbar})]})},ge=r(417),ve=r(411),ye=r(412),we=r(413),Ne=r(414),Ce=r(45),Te="".concat("http://localhost:3001","/api/articles"),Ae=function(){var e=Object(j.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re.a.get(Te);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ke=function(){var e=Object(j.a)(p.a.mark((function e(t){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re.a.post(Te,t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Se=function(){var e=Object(j.a)(p.a.mark((function e(t,r){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re.a.put("".concat(Te,"/").concat(r),t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),Re=function(){var e=Object(j.a)(p.a.mark((function e(t,r){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re.a.post("".concat(Te,"/").concat(r,"/comments"),t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),Ie={getAll:Ae,create:ke,update:Se,postComment:Re},Ee=function(){return function(){var e=Object(j.a)(p.a.mark((function e(t){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie.getAll();case 2:r=e.sent,t({type:"INIT_ARTICLES",data:r});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},De=function(e){return function(){var t=Object(j.a)(p.a.mark((function t(r){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r({type:"CREATE_ARTICLE",data:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Pe=function(e){return function(){var t=Object(j.a)(p.a.mark((function t(r){var n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={views:e.views+1},t.next=3,Ie.update(n,e.id);case 3:r({type:"ADD_VIEW_TO_ARTICLE",data:e.id});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Be=function(e,t,r){return function(){var n=Object(j.a)(p.a.mark((function n(a){var c,i;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Ie.postComment(e,t);case 2:c=n.sent,i=Object(U.a)(Object(U.a)({},c),{},{commentator:r}),a({type:"ADD_COMMENT",data:i});case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},_e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_ARTICLES":return t.data;case"CREATE_ARTICLE":return[].concat(Object(Ce.a)(e),[t.data]);case"ADD_VIEW_TO_ARTICLE":return e.map((function(e){return e.id===t.data?Object(U.a)(Object(U.a)({},e),{},{views:e.views+1}):e}));case"ADD_COMMENT":return e.map((function(e){return e.id===t.data.article?Object(U.a)(Object(U.a)({},e),{},{comments:e.comments.concat(t.data)}):e}));default:return e}},We="".concat("http://localhost:3001","/api/readers"),Le=function(){var e=Object(j.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re.a.get(We);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Fe=function(){var e=Object(j.a)(p.a.mark((function e(t){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re.a.get("".concat(We,"/").concat(t));case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Me=function(){var e=Object(j.a)(p.a.mark((function e(t){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re.a.post(We,t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ge=function(){var e=Object(j.a)(p.a.mark((function e(t,r){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re.a.put("".concat(We,"/").concat(r),t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),Ue=function(){var e=Object(j.a)(p.a.mark((function e(t,r){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re.a.post("".concat(We,"/").concat(r,"/subscriptions"),t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),Ve={create:Me,getAll:Le,getOne:Fe,update:Ge,createSubscribtion:Ue},qe=function(){return function(){var e=Object(j.a)(p.a.mark((function e(t){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ve.getAll();case 2:r=e.sent,t({type:"INIT_READERS",data:r});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},ze=function(e){return function(){var t=Object(j.a)(p.a.mark((function t(r){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r({type:"CREATE_READER",data:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},He=function(e,t){return function(){var r=Object(j.a)(p.a.mark((function r(n){var a,c,i;return p.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a={funds:t.funds,favoritewriters:t.favoritewriters.map((function(e){return e.id})).concat(e.id)},r.next=3,Ve.update(a,t.id);case 3:c=r.sent,console.log("readerFromDb",c),i=Object(U.a)(Object(U.a)({},t),{},{favoritewriters:t.favoritewriters.concat(e)}),n({type:"ADD_FAVORITE_WRITER",data:i});case 7:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},Ye=function(e,t){return function(){var r=Object(j.a)(p.a.mark((function r(n){var a,c,i;return p.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a={favoritewriters:t.favoritewriters.map((function(e){return e.id})).filter((function(t){return t!==e.id}))},r.next=3,Ve.update(a,t.id);case 3:c=r.sent,console.log("readerFromDb",c),i=Object(U.a)(Object(U.a)({},t),{},{favoritewriters:t.favoritewriters.filter((function(t){return t.id!==e.id}))}),n({type:"REMOVE_FAVORITE_WRITER",data:i});case 7:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},Je=function(e,t){return function(){var r=Object(j.a)(p.a.mark((function r(n){var a,c;return p.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a={favoritewriters:t.favoritewriters.map((function(e){return e.id})),funds:t.funds+e},r.next=3,Ve.update(a,t.id);case 3:c=r.sent,n({type:"UPDATE_READERS_FUNDS",data:c});case 5:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},Ke=function(e,t){return function(){var r=Object(j.a)(p.a.mark((function r(n){var a,c;return p.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a={favoritewriters:t.favoritewriters.map((function(e){return e.id})),funds:t.funds-e},r.next=3,Ve.update(a,t.id);case 3:c=r.sent,n({type:"UPDATE_READERS_FUNDS",data:c});case 5:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},$e=function(e){return function(){var t=Object(j.a)(p.a.mark((function t(r){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r({type:"REMOVE_SUBS_FROM_READERS",data:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Qe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_READERS":return t.data;case"CREATE_READER":return e.concat(t.data);case"UPDATE_READERS_FUNDS":return e.map((function(e){return e.id===t.data.id?Object(U.a)(Object(U.a)({},e),{},{funds:t.data.funds}):e}));case"ADD_FAVORITE_WRITER":case"REMOVE_FAVORITE_WRITER":return e.map((function(e){return e.id===t.data.id?t.data:e}));case"ADD_SUBSCRIPTION_TO_READER":return e.map((function(e){return e.id===t.data.subscriber.id?Object(U.a)(Object(U.a)({},e),{},{subscriptions:e.subscriptions.concat(t.data)}):e}));case"REMOVE_SUBS_FROM_READERS":return e.map((function(e){return Object(U.a)(Object(U.a)({},e),{},{subscriptions:e.subscriptions.filter((function(e){return!t.data.includes(e.id)}))})}));default:return e}},Xe="".concat("http://localhost:3001","/api/writers"),Ze=function(){var e=Object(j.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re.a.get(Xe);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),et=function(){var e=Object(j.a)(p.a.mark((function e(t){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re.a.get("".concat(Xe,"/").concat(t));case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),tt=function(){var e=Object(j.a)(p.a.mark((function e(t){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re.a.post(Xe,t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),rt=function(){var e=Object(j.a)(p.a.mark((function e(t,r){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re.a.put("".concat(Xe,"/").concat(r),t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),nt={getAll:Ze,getOne:et,create:tt,update:rt},at=function(){return function(){var e=Object(j.a)(p.a.mark((function e(t){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nt.getAll();case 2:r=e.sent,t({type:"INIT_WRITERS",data:r});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},ct=function(e){return function(){var t=Object(j.a)(p.a.mark((function t(r){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r({type:"ADD_NEW_WRITER",data:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},it=function(e,t){return function(){var r=Object(j.a)(p.a.mark((function r(n){var a,c,i;return p.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a=Object(U.a)(Object(U.a)({},t),{},{followers:t.followers.map((function(e){return e.id})).concat(e.id)}),r.next=3,nt.update(a,t.id);case 3:c=r.sent,console.log("writerFromDb",c),i=Object(U.a)(Object(U.a)({},t),{},{followers:t.followers.concat(e)}),n({type:"ADD_READER_TO_FOLLOWERS",data:i});case 7:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},ot=function(e,t){return function(){var r=Object(j.a)(p.a.mark((function r(n){var a,c,i;return p.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a=Object(U.a)(Object(U.a)({},t),{},{followers:t.followers.map((function(e){return e.id})).filter((function(t){return t!==e.id}))}),r.next=3,nt.update(a,t.id);case 3:c=r.sent,console.log("writerFromDb",c),i=Object(U.a)(Object(U.a)({},t),{},{followers:t.followers.filter((function(t){return t.id!==e.id}))}),n({type:"REMOVE_READER_FROM_FOLLOWERS",data:i});case 7:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},st=function(e,t){return function(){var r=Object(j.a)(p.a.mark((function r(n){var a,c;return p.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a=Object(U.a)(Object(U.a)({},t),{},{followers:t.followers.map((function(e){return e.id})),earnings:t.earnings+e}),r.next=3,nt.update(a,t.id);case 3:c=r.sent,n({type:"UPDATE_WRITER_EARNINGS",data:c});case 5:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},lt=function(e,t){return function(){var r=Object(j.a)(p.a.mark((function r(n){var a,c;return p.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a=Object(U.a)({followers:t.followers.map((function(e){return e.id})),earnings:t.earnings},e),r.next=3,nt.update(a,t.id);case 3:c=Object(U.a)(Object(U.a)({},t),e),n({type:"UPDATE_PRICING",data:c});case 5:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},ut=function(e){return function(){var t=Object(j.a)(p.a.mark((function t(r){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r({type:"ADD_ARTICLE_TO_WRITER",data:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},dt=function(e){return function(){var t=Object(j.a)(p.a.mark((function t(r){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r({type:"REMOVE_SUBS_FROM_WRITERS",data:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},pt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_WRITERS":return t.data;case"ADD_NEW_WRITER":return e.concat(t.data);case"UPDATE_WRITER_EARNINGS":return e.map((function(e){return e.id===t.data.id?Object(U.a)(Object(U.a)({},e),{},{earnings:t.data.earnings}):e}));case"UPDATE_PRICING":return e.map((function(e){return e.id===t.data.id?Object(U.a)(Object(U.a)({},e),{},{oneArticlePrice:t.data.oneArticlePrice,montlySubscriptionPrice:t.data.montlySubscriptionPrice,yearlySubscriptionPrice:t.data.yearlySubscriptionPrice}):e}));case"ADD_ARTICLE_TO_WRITER":return e.map((function(e){return e.id===t.data.author?Object(U.a)(Object(U.a)({},e),{},{myarticles:e.myarticles.concat(t.data)}):e}));case"ADD_READER_TO_FOLLOWERS":return e.map((function(e){return e.id===t.data.id?t.data:e}));case"REMOVE_READER_FROM_FOLLOWERS":return e.map((function(e){return e.id===t.data?t.data:e}));case"REMOVE_SUBS_FROM_WRITERS":return e.map((function(e){return Object(U.a)(Object(U.a)({},e),{},{subscriptions:e.subscribers.filter((function(e){return!t.data.includes(e.id)}))})}));default:return e}},jt=r(406),bt=r(407),ft=r(408),mt=r(409),ht=r(410),xt=Object(O.a)((function(e){return{text:{color:e.palette.text.secondary}}})),Ot=function(e){var t=e.openLoginDialog,r=e.setOpenLoginDialog,n=xt(),a=Object(f.f)(),c=function(){var e=Object(j.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),a.push("/reader/login");case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(F.jsxs)(jt.a,{open:t,onClose:function(){return r(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(F.jsx)(bt.a,{id:"alert-dialog-title",className:n.text,children:"Paid article"}),Object(F.jsx)(ft.a,{children:Object(F.jsx)(mt.a,{id:"alert-dialog-description",children:"Please login and pay to read"})}),Object(F.jsxs)(ht.a,{children:[Object(F.jsx)(k.a,{color:"primary",autoFocus:!0,onClick:c,children:"Log In"}),Object(F.jsx)(k.a,{onClick:function(){return r(!1)},color:"primary",autoFocus:!0,children:"close"})]})]})},gt=Object(O.a)((function(e){return{text:{color:e.palette.text.secondary}}})),vt=function(e){var t=e.openAddFundsDialog,r=e.setOpenAddFundsDialog,n=e.loggedInReader,a=e.price,c=gt(),i=Object(f.f)(),o=function(){var e=Object(j.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),i.push("/reader/profile/".concat(n.id));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(F.jsxs)(jt.a,{open:t,onClose:function(){return r(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(F.jsx)(bt.a,{id:"alert-dialog-title",className:c.text,children:"Not enough funds"}),Object(F.jsxs)(ft.a,{children:[Object(F.jsxs)(C.a,{gutterBottom:!0,className:c.text,children:["Article price: ",a," \u20ac"]}),Object(F.jsxs)(C.a,{gutterBottom:!0,className:c.text,children:["Your balance: ",n.funds," \u20ac"]}),Object(F.jsx)(C.a,{gutterBottom:!0,className:c.text,children:"Please go to your profile to add funds"})]}),Object(F.jsxs)(ht.a,{children:[Object(F.jsx)(k.a,{color:"primary",autoFocus:!0,onClick:o,children:"Profile"}),Object(F.jsx)(k.a,{onClick:function(){return r(!1)},color:"primary",autoFocus:!0,children:"close"})]})]})},yt=Object(O.a)((function(e){return{root:{width:380,borderRadius:5,margin:5},media:{height:140},textTitle:{color:e.palette.text.secondary,fontWeight:"bold"},textauthor:{color:e.palette.text.secondary},text:{color:"#6A6A6A",paddingRight:10},cardInfoContainer:{display:"flex",flexDirection:"row",justifyContent:"space-between",paddingTop:10},cardInfoCategories:{display:"flex",flexDirection:"row",justifyContent:"space-between"},cardContent:{display:"flex",flexDirection:"column",justifyContent:"space-between"}}})),wt=function(e){var t=e.article,r=Object(f.f)(),a=Object(i.b)(),c=Object(i.c)((function(e){return e.reader})),o=Object(i.c)((function(e){return e.readers})),s=Object(i.c)((function(e){return e.articleImages})),l=c&&o.filter((function(e){return e.id===c.id}))[0],u=Object(n.useState)(!1),d=Object(h.a)(u,2),m=d[0],x=d[1],O=Object(n.useState)(!1),g=Object(h.a)(O,2),v=g[0],y=g[1],w=s&&0!==s.length&&s.filter((function(e){return e.article===t.id}))[0].img.data.data,N=btoa(new Uint8Array(w).reduce((function(e,t){return e+String.fromCharCode(t)}),""));if(!t)return Object(F.jsx)("p",{children:"Loading..."});var T=function(){var e=Object(j.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("yes"!==t.paid){e.next=29;break}if(l){e.next=5;break}x(!0),e.next=27;break;case 5:if(!l.subscriptions.some((function(e){return e.recipient[0].id===t.author.id}))){e.next=10;break}a(Pe(t)),r.push("/article/".concat(t.id)),e.next=27;break;case 10:if(!(l.funds<t.author.oneArticlePrice)){e.next=14;break}y(!0),e.next=27;break;case 14:if(!window.confirm("Confirm payment for this article for ".concat(t.author.oneArticlePrice," \u20ac"))){e.next=27;break}return e.prev=15,e.next=18,a(Ke(t.author.oneArticlePrice,l));case 18:return e.next=20,a(st(t.author.oneArticlePrice,t.author));case 20:a(Pe(t)),r.push("/article/".concat(t.id)),e.next=27;break;case 24:e.prev=24,e.t0=e.catch(15),a(fe("An error occurred. Please try again"));case 27:e.next=31;break;case 29:a(Pe(t)),r.push("/article/".concat(t.id));case 31:case"end":return e.stop()}}),e,null,[[15,24]])})));return function(t){return e.apply(this,arguments)}}(),A=yt();return Object(F.jsxs)(ve.a,{className:A.root,children:[Object(F.jsx)(b.b,{style:{textDecoration:"none",color:"inherit"},to:"#",onClick:function(){return T(t)},children:Object(F.jsxs)(ye.a,{children:[0===s.length?Object(F.jsx)(B.a,{variant:"rect",width:380,height:140,animation:"wave"}):Object(F.jsx)(we.a,{className:A.media,image:"data:image/jpeg;base64,".concat(N),title:"Contemplative Reptile"}),Object(F.jsxs)(Ne.a,{className:A.cardContent,children:[Object(F.jsx)(C.a,{className:A.textTitle,children:t.title}),Object(F.jsxs)(C.a,{className:A.textauthor,children:["By ",t.author.firstName," ",t.author.lastName]}),Object(F.jsxs)("div",{className:A.cardInfoContainer,children:[Object(F.jsx)("div",{className:A.cardInfoCategories,children:t.genres.map((function(e){return Object(F.jsx)(C.a,{className:A.text,variant:"caption",children:e},e)}))}),Object(F.jsx)(C.a,{className:A.text,variant:"caption",children:"yes"===t.paid?"Paid":"Free"})]})]})]})}),Object(F.jsx)(Ot,{openLoginDialog:m,setOpenLoginDialog:x}),l&&Object(F.jsx)(vt,{openAddFundsDialog:v,setOpenAddFundsDialog:y,loggedInReader:l,price:t.author.oneArticlePrice})]})},Nt=r(353),Ct=r(415),Tt=r(416),At=r(438),kt=Object(O.a)({posisioning:{display:"flex",alignItems:"center",justifyContent:"center"},radioGroup:{display:"inline-block"}}),St=function(e){var t=e.setFilterValue,r=kt();return Object(F.jsx)(Nt.a,{component:"fieldset",className:r.posisioning,fullWidth:!0,children:Object(F.jsxs)(Ct.a,{className:r.radioGroup,onChange:function(e){t(e.target.value)},row:!0,"aria-label":"position",name:"position",defaultValue:"all",children:[Object(F.jsx)(Tt.a,{value:"all",control:Object(F.jsx)(At.a,{color:"primary"}),label:"All"}),Object(F.jsx)(Tt.a,{value:"free",control:Object(F.jsx)(At.a,{color:"primary"}),label:"Free"}),Object(F.jsx)(Tt.a,{value:"paid",control:Object(F.jsx)(At.a,{color:"primary"}),label:"Paid"})]})})},Rt=Object(O.a)({text:{textAlign:"center"},textWithPadding:{textAlign:"center",paddingBottom:20}}),It=function(){var e=Rt(),t=Object(n.useState)("all"),r=Object(h.a)(t,2),a=r[0],c=r[1],o=Object(f.g)().genre,s=Object(f.g)().searchResult,l=Object(f.g)().author,u=Object(i.c)((function(e){return e.articles})),d=Object(i.c)((function(e){return e.reader})),p=Object(i.c)((function(e){return e.readers})),j=d&&p.filter((function(e){return e.id===d.id}))[0],b=d&&j.favoritewriters.map((function(e){return e.id})),m=d&&j.subscriptions.map((function(e){return e.recipient[0].id})),x=u,O=null;if(!u)return Object(F.jsx)("p",{children:"Loading..."});"My Favorites"===o?x=u.filter((function(e){return b.includes(e.author.id)})):"My Subscriptions"===o?x=u.filter((function(e){return m.includes(e.author.id)})):void 0!==o&&(x=u.filter((function(e){return e.genres.includes(o)}))),s&&(O=(x=u.filter((function(e){return e.title.toLowerCase().includes(s.toLowerCase())}))).length),l&&(x=u.filter((function(e){return e.author.id===l})));var g=x;switch(a){case"all":break;case"free":g=x.filter((function(e){return"no"===e.paid}));break;case"paid":g=x.filter((function(e){return"yes"===e.paid}))}return Object(F.jsxs)("div",{children:[Object(F.jsx)(St,{setFilterValue:c}),Object(F.jsx)(C.a,{className:e.textWithPadding,variant:"h3",style:{display:void 0===o?"none":"block"},children:o}),Object(F.jsxs)("div",{style:{display:void 0===s?"none":"block"},children:[Object(F.jsxs)(C.a,{className:e.text,variant:"h3",children:["Results: ",s]}),Object(F.jsxs)(C.a,{className:e.textWithPadding,variant:"subtitle2",children:["Results found: ",O]})]}),Object(F.jsx)(ge.a,{container:!0,justify:"center",children:g.map((function(e){return Object(F.jsx)(wt,{article:e},e.id)}))})]})},Et=r(439),Dt=r(418),Pt=r(419),Bt=r(420),_t=r(183),Wt=r.n(_t),Lt=Object(O.a)((function(e){return{text:{color:e.palette.text.secondary},loginSignupText:{color:e.palette.text.secondary,textAlign:"center"},categoryButton:{marginBottom:10,marginRight:10},accordion:{display:"flex",flexDirection:"column"},accordionMargin:{marginBottom:50},accordionLabel:{textAlign:"center",color:e.palette.text.secondary},rootBorder:{borderStyle:"solid",borderWidth:1,borderColor:e.palette.primary.main,margin:5},commentButton:{padding:10,marginLeft:10},inputColor:{color:e.palette.text.secondary},loginSignupContainer:{background:e.palette.primary.lightGrey,flexGrow:1,padding:10},commentForm:{display:"flex",flexDirection:"row",justifyContent:"flex-start",flexGrow:1}}})),Ft=function(){var e=Lt(),t=Object(i.b)(),r=Object(n.useState)(""),a=Object(h.a)(r,2),c=a[0],o=a[1],s=Object(i.c)((function(e){return e.articles})),l=Object(i.c)((function(e){return e.reader})),u=Object(i.c)((function(e){return e.readers})),d=l&&u.filter((function(e){return e.id===l.id}))[0],m=Object(x.a)(["readerAuthCookie"]),O=Object(h.a)(m,3),g=(O[0],O[1],O[2]),v=Object(f.f)(),y=Object(f.g)().id,w=s.filter((function(e){return e.id===y}))[0];if(!s)return Object(F.jsx)("p",{children:"Loading..."});var N=function(){var e=Object(j.a)(p.a.mark((function e(r){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),e.prev=1,n={comment:c},e.next=5,t(Be(n,y,d));case 5:t(be("".concat(c," added"))),o(""),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.log("error response",e.t0.response),"Unauthorized"===e.t0.response.statusText&&"token expired"===e.t0.response.data.error?(t(fe("You session has expired. Please login again")),t((function(e){e({type:"REMOVE_READER",data:null})})),g("readerAuthCookie",{path:"/"}),v.push("/reader/login")):t(fe("An error occurred. Please try again"));case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(F.jsx)("div",{className:e.accordionMargin,children:Object(F.jsxs)(Et.a,{classes:{root:e.rootBorder},children:[Object(F.jsx)(Dt.a,{color:"primary",expandIcon:Object(F.jsx)(Wt.a,{}),"aria-controls":"panel1c-content",id:"panel1c-header",children:Object(F.jsx)(C.a,{variant:"h5",className:e.accordionLabel,children:"Comments"})}),Object(F.jsxs)(Pt.a,{className:e.accordion,children:[Object(F.jsx)(Bt.a,{children:null!==l?Object(F.jsxs)("form",{onSubmit:N,className:e.commentForm,children:[Object(F.jsx)(_.a,{fullWidth:!0,label:"Comment",value:c,onChange:function(e){o(e.target.value)},variant:"outlined",id:"commentInput",InputProps:{className:e.inputColor}}),Object(F.jsx)(k.a,{size:"small",color:"primary",variant:"contained",type:"submit",id:"addCommentButton",className:e.commentButton,children:"Comment"})]}):Object(F.jsxs)("div",{className:e.loginSignupContainer,children:[Object(F.jsx)(C.a,{variant:"h6",className:e.loginSignupText,children:"Something to say?"}),Object(F.jsxs)(C.a,{variant:"h6",className:e.loginSignupText,children:[Object(F.jsx)(b.b,{to:"/reader/login",children:"Log in"})," or ",Object(F.jsx)(b.b,{to:"/reader/signup",children:"Sign up"})]})]})}),0!==w.comments.length?w.comments.map((function(t){return Object(F.jsx)(ve.a,{classes:{root:e.rootBorder},children:Object(F.jsxs)(Ne.a,{children:[Object(F.jsx)(C.a,{className:e.text,style:{fontWeight:"bold"},children:t.commentator.userName}),Object(F.jsx)(C.a,{className:e.text,children:t.comment}),Object(F.jsxs)(C.a,{className:e.text,variant:"caption",children:["Posted on ",t.date]})]})},t.id)})):Object(F.jsx)(C.a,{className:e.text,variant:"subtitle1",children:"No comments"})]})]})})},Mt=Object(O.a)({infoText:{color:"#6A6A6A"},categoryButton:{marginBottom:10,marginRight:10},articleDiv:{marginBottom:100},coverPhoto:{height:200}}),Gt=function(){var e=Mt(),t=Object(f.g)().id,r=Object(i.c)((function(e){return e.articles})),n=Object(i.c)((function(e){return e.articleImages})),a=n&&0!==n.length&&n.filter((function(e){return e.article===t}))[0].img.data.data,c=btoa(new Uint8Array(a).reduce((function(e,t){return e+String.fromCharCode(t)}),""));if(!r)return Object(F.jsx)("p",{children:"Loading..."});var o=r.filter((function(e){return e.id===t}))[0];return Object(F.jsxs)("div",{children:[Object(F.jsxs)("div",{className:e.articleDiv,children:[0===n.length?Object(F.jsx)(B.a,{variant:"rect",width:1232,height:200,animation:"wave"}):Object(F.jsx)("img",{style:{width:"100%",height:200,borderRadius:5,objectFit:"cover"},fullWidth:!0,src:"data:image/jpeg;base64,".concat(c)}),Object(F.jsx)("div",{className:e.categoryButton,children:o.genres.map((function(e){return Object(F.jsx)(b.b,{style:{textDecoration:"none",color:"inherit"},to:"/genres/".concat(e),children:Object(F.jsx)(k.a,{marginottom:"50",size:"small",variant:"outlined",color:"primary",children:e})},e)}))}),Object(F.jsx)(C.a,{variant:"h4",children:o.title}),Object(F.jsx)("br",{}),Object(F.jsxs)(C.a,{variant:"subtitle1",className:e.infoText,children:["By ",Object(F.jsxs)(b.b,{to:"/author/".concat(o.author.id),children:[o.author.firstName," ",o.author.lastName]})," | ",o.published]}),Object(F.jsx)("br",{}),o.content.map((function(e,t){return Object(F.jsxs)("div",{children:[Object(F.jsx)(C.a,{children:e}),Object(F.jsx)("br",{})]},t)}))]}),Object(F.jsx)(Ft,{})]})},Ut=r(422),Vt=r(65),qt=r.n(Vt),zt=r(184),Ht=r.n(zt),Yt=r(421),Jt=Object(O.a)((function(e){return{subscriptionOptionsContainer:{display:"flex",flexDirection:"row",justifyContent:"center"},subscriptionCard:{margin:5,minWidth:200,borderRadius:10,borderWidth:1,border:"solid",borderColor:e.palette.primary.main,flexGrow:1},subText:{textAlign:"center"},cardButton:{display:"flex",justifyContent:"center"}}})),Kt=Object(g.a)((function(e){return{tooltip:{backgroundColor:e.palette.primary.main,fontSize:15}}}))(v.a),$t=function(e){var t=e.filteredWriter,r=e.matchingSub,n=e.handleSubscirbe,a=Jt();return Object(F.jsxs)("div",{className:a.subscriptionOptionsContainer,children:[Object(F.jsx)(ve.a,{className:a.subscriptionCard,variant:"outlined",children:Object(F.jsxs)(Ne.a,{children:[Object(F.jsx)(C.a,{color:"textSecondary",gutterBottom:!0,className:a.subText,children:"1 Article"}),Object(F.jsx)(C.a,{variant:"h5",color:"textSecondary",className:a.subText,children:"".concat(t.oneArticlePrice," \u20ac")})]})}),Object(F.jsxs)(ve.a,{className:a.subscriptionCard,variant:"outlined",children:[Object(F.jsxs)(Ne.a,{children:[Object(F.jsx)(C.a,{color:"textSecondary",gutterBottom:!0,className:a.subText,children:"1 Month"}),Object(F.jsx)(C.a,{variant:"h5",color:"textSecondary",className:a.subText,children:"".concat(t.montlySubscriptionPrice," \u20ac")})]}),Object(F.jsx)(Yt.a,{className:a.cardButton,children:null===r?Object(F.jsx)(Kt,{TransitionComponent:T.a,TransitionProps:{timeout:600},title:"Login to subscribe",children:Object(F.jsx)(k.a,{variant:"contained",endIcon:Object(F.jsx)(qt.a,{}),children:"Subscribe"})}):Object(F.jsx)(k.a,{size:"small",color:"primary",variant:"contained",id:"montlySubscriptionButton",endIcon:Object(F.jsx)(qt.a,{}),onClick:function(){return n("montlySubscriptionPrice")},children:"Subscribe"})})]}),Object(F.jsxs)(ve.a,{className:a.subscriptionCard,variant:"outlined",children:[Object(F.jsxs)(Ne.a,{children:[Object(F.jsx)(C.a,{color:"textSecondary",gutterBottom:!0,className:a.subText,children:"1 Year"}),Object(F.jsx)(C.a,{variant:"h5",color:"textSecondary",className:a.subText,children:"".concat(t.yearlySubscriptionPrice," \u20ac")})]}),Object(F.jsx)(Yt.a,{className:a.cardButton,children:null===r?Object(F.jsx)(Kt,{TransitionComponent:T.a,TransitionProps:{timeout:600},title:"Login to subscribe",children:Object(F.jsx)(k.a,{variant:"contained",endIcon:Object(F.jsx)(qt.a,{}),children:"Subscribe"})}):Object(F.jsx)(k.a,{size:"small",color:"primary",variant:"contained",endIcon:Object(F.jsx)(qt.a,{}),onClick:function(){return n("yearlySubscriptionPrice")},children:"Subscribe"})})]})]})},Qt=Object(O.a)((function(e){return{profileContaner:{display:"flex",flexDirection:"row",justifyContent:"flex-start"},infoContainer:{display:"flex",flexDirection:"column",justifyContent:"flex-start",paddingLeft:10},subscriptionOptionsContainer:{display:"flex",flexDirection:"row",justifyContent:"flex-start",paddingLeft:50},subscriptionCard:{margin:5,minWidth:130,borderRadius:10,borderWidth:1,border:"solid",borderColor:e.palette.primary.main},subscribedCard:{margin:5,minWidth:390,borderRadius:10,borderWidth:1,border:"solid",borderColor:e.palette.primary.main},text:{textAlign:"center",paddingTop:50},subText:{textAlign:"center",textTransform:"uppercase"},genresList:{display:"flex",flexDirection:"row",justifyContent:"flex-start"},textGenres:{color:"grey",flex:0,paddingRight:10},button:{margin:e.spacing(1)},disabledButton:{margin:e.spacing(1),backgroundColor:"#E5E5E5",color:"#CCCCCC",boxShadow:"none"},cardButton:{display:"flex",justifyContent:"center"}}})),Xt=Object(g.a)((function(e){return{tooltip:{backgroundColor:e.palette.primary.main,fontSize:15}}}))(v.a),Zt=function(){var e=Qt(),t=Object(i.b)(),r=Object(f.g)().author,n=Object(i.c)((function(e){return e.reader})),a=Object(i.c)((function(e){return e.writerImages})),c=Object(i.c)((function(e){return e.readers})),o=Object(x.a)(["readerAuthCookie"]),s=Object(h.a)(o,3),l=(s[0],s[1],s[2]),u=Object(f.f)(),d=Object(i.c)((function(e){return e.writers.filter((function(e){return e.id===r}))[0]})),b=n&&c.filter((function(e){return e.id===n.id}))[0],m=a&&0!==a.length&&a.filter((function(e){return e.writer===r}))[0].img.data.data,O=m&&btoa(new Uint8Array(m).reduce((function(e,t){return e+String.fromCharCode(t)}),""));if(!d)return Object(F.jsx)("p",{children:"Loading..."});var g=b&&b.favoritewriters.some((function(e){return e.id===r})),v=d.subscribers.map((function(e){return e})),y=b&&0!==b.subscriptions.length&&b.subscriptions.map((function(e){return e})),w=b&&0!==b.subscriptions.length&&v.filter((function(e){return y.some((function(t){return t.id===e.id}))}))[0],N=function(){var e=Object(j.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t(He(d,b));case 3:return e.next=5,t(it(b,d));case 5:t(be("".concat(d.firstName," ").concat(d.lastName," added to favorites"))),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("error response",e.t0.response),"Unauthorized"===e.t0.response.statusText&&"token expired"===e.t0.response.data.error?(t(fe("You session has expired. Please login again")),t((function(e){e({type:"REMOVE_READER",data:null})})),l("readerAuthCookie",{path:"/"}),u.push("/reader/login")):t(fe("An error occurred. Please try again"));case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=Object(j.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t(Ye(d,b));case 3:return e.next=5,t(ot(b,d));case 5:t(be("".concat(d.firstName," ").concat(d.lastName," removed from favorites"))),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("error response",e.t0.response),"Unauthorized"===e.t0.response.statusText&&"token expired"===e.t0.response.data.error?(t(fe("You session has expired. Please login again")),t((function(e){e({type:"REMOVE_READER",data:null})})),l("readerAuthCookie",{path:"/"}),u.push("/reader/login")):t(fe("An error occurred. Please try again"));case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(j.a)(p.a.mark((function e(r){var n,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(b.funds<d[r])){e.next=4;break}window.alert("Not enought funds"),e.next=25;break;case 4:if(!window.confirm("Confirm Subscription")){e.next=25;break}return e.prev=5,e.next=8,t(st(d[r],d));case 8:return e.next=10,t(Ke(d[r],b));case 10:return a={type:n="montlySubscriptionPrice"===r?"montly":"yearly",writerId:d.id},e.next=14,Ve.createSubscribtion(a,b.id);case 14:return e.next=16,t(qe());case 16:return e.next=18,t(at());case 18:t(be("Subsribed ".concat(n," to ").concat(d.firstName," ").concat(d.lastName))),e.next=25;break;case 21:e.prev=21,e.t0=e.catch(5),console.log("error response",e.t0.response),"Unauthorized"===e.t0.response.statusText&&"token expired"===e.t0.response.data.error?(t(fe("You session has expired. Please login again")),t((function(e){e({type:"REMOVE_READER",data:null})})),l("readerAuthCookie",{path:"/"}),u.push("/reader/login")):t(fe("An error occurred. Please try again"));case 25:case"end":return e.stop()}}),e,null,[[5,21]])})));return function(t){return e.apply(this,arguments)}}();return Object(F.jsxs)("div",{children:[Object(F.jsxs)("div",{className:e.profileContaner,children:[0===a.length?Object(F.jsx)(B.a,{width:200,variant:"rect",animation:"wave"}):Object(F.jsx)("img",{width:"200",src:"data:image/jpeg;base64,".concat(O)}),Object(F.jsxs)("div",{className:e.infoContainer,children:[Object(F.jsxs)(C.a,{variant:"h4",children:[d.firstName," ",d.lastName]}),Object(F.jsx)(C.a,{children:d.writerDescription}),Object(F.jsx)(V.a,{className:e.genresList,children:d.writerGenres.map((function(t){return Object(F.jsx)(C.a,{className:e.textGenres,variant:"caption",children:t},t)}))}),Object(F.jsx)(Ut.a,{color:"primary","aria-label":"outlined primary button group",children:function(){switch(g){case!0:return Object(F.jsx)(k.a,{variant:"contained",color:"primary",className:e.button,endIcon:Object(F.jsx)(Ht.a,{}),onClick:A,children:"Added to favorites"});case!1:return Object(F.jsx)(k.a,{variant:"contained",color:"primary",className:e.button,endIcon:Object(F.jsx)(qt.a,{}),onClick:N,children:"Add to favorites"});case null:return Object(F.jsx)("div",{children:Object(F.jsx)(Xt,{TransitionComponent:T.a,TransitionProps:{timeout:600},title:"Login to add to favorites",children:Object(F.jsx)("span",{children:Object(F.jsx)(k.a,{variant:"contained",endIcon:Object(F.jsx)(qt.a,{}),children:"Add to favorites"})})})})}}()})]})]}),Object(F.jsx)("div",{children:!1!==w&&null!==w&&void 0!==w?Object(F.jsx)(ve.a,{className:e.subscribedCard,variant:"outlined",children:Object(F.jsxs)(Ne.a,{children:[Object(F.jsx)(C.a,{color:"textSecondary",gutterBottom:!0,className:e.subText,children:"Subscribed"}),Object(F.jsxs)(C.a,{color:"textSecondary",gutterBottom:!0,className:e.subText,children:["Type: ",w.type]}),Object(F.jsxs)(C.a,{color:"textSecondary",gutterBottom:!0,className:e.subText,children:["Period: ",w.startDate.slice(0,-6)," - ",w.endDate.slice(0,-6)]})]})}):Object(F.jsx)($t,{handleSubscirbe:S,filteredWriter:d,matchingSub:w})}),Object(F.jsx)(C.a,{variant:"h4",color:"primary",className:e.text,children:"Articles"}),Object(F.jsx)(It,{})]})},er=r(18),tr=r(19),rr=r(22),nr=r(357),ar="".concat("http://localhost:3001","/api/images/writers"),cr={getAll:function(){var e=Object(j.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re.a.get(ar);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getOne:function(){var e=Object(j.a)(p.a.mark((function e(t){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re.a.get("".concat(ar,"/").concat(t));case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),create:function(){var e=Object(j.a)(p.a.mark((function e(t){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re.a.post(ar,t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},ir=function(){return function(){var e=Object(j.a)(p.a.mark((function e(t){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,cr.getAll();case 2:r=e.sent,t({type:"INIT_WRITER_IMAGES",data:r});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},or=function(e){return function(){var t=Object(j.a)(p.a.mark((function t(r){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r({type:"ADD_WRITER_IMAGE",data:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},sr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_WRITER_IMAGES":return t.data;case"ADD_WRITER_IMAGE":return e.concat(t.data);default:return e}},lr=r(200),ur=r(199),dr=Object(ur.a)({palette:{type:"light",primary:{main:"#181616",lighter:"#222525",middleGrey:"#515151",hover:"#606060",lightGrey:"#eeeeee"},secondary:{main:"#f50057"},text:{primary:"#FCFCFC",secondary:"#181616",blueish:"#731DD8",grey:"#606060"}},icons:{fontSize:30,fill:"#FCFCFC"}}),pr=r(191),jr=r.n(pr),br={flex:1,display:"flex",flexDirection:"column",alignItems:"center",padding:"20px",borderWidth:3,borderRadius:10,borderColor:dr.palette.primary.main,borderStyle:"dashed",backgroundColor:dr.palette.primary.lightGrey,color:dr.palette.primary.main,outline:"none"},fr={display:"flex",flexDirection:"row",flexWrap:"wrap",marginTop:16},mr={display:"inline-flex",marginBottom:8,marginRight:8,width:150,height:150,padding:4,boxSizing:"border-box"},hr={borderRadius:10,display:"block",width:"auto",height:"100%"},xr={borderColor:"#2196f3"},Or={borderColor:"#00e676"},gr={borderColor:"#ff1744"},vr=function(e){var t=e.setFieldValue,r=e.values,a=Object(lr.a)({accept:"image/*",onDrop:function(e){t("files",e.map((function(e){return Object.assign(e,{preview:URL.createObjectURL(e)})})))}}),c=a.getRootProps,i=a.getInputProps,o=a.isDragActive,s=a.isDragAccept,l=a.isDragReject,u=r.files.map((function(e){return Object(F.jsx)("div",{style:mr,children:Object(F.jsx)("div",{children:Object(F.jsx)("img",{src:e.preview,style:hr})})},e.name)})),d=Object(n.useMemo)((function(){return Object(U.a)(Object(U.a)(Object(U.a)(Object(U.a)({},br),o?xr:{}),s?Or:{}),l?gr:{})}),[o,l,s]);return Object(F.jsxs)("div",{children:[Object(F.jsxs)("div",Object(U.a)(Object(U.a)({},c({style:d})),{},{children:[Object(F.jsx)("input",Object(U.a)(Object(U.a)({},i()),{},{name:"image",id:"imageUpload"})),Object(F.jsx)("p",{children:"Drag and drop image here, or click to select image"}),Object(F.jsx)(jr.a,{})]})),Object(F.jsx)("aside",{style:fr,children:u})]})},yr=Object(O.a)((function(e){return{inputColor:{color:e.palette.text.secondary},loginText:{textAlign:"center",marginBottom:30},container:{marginTop:150,marginBottom:150,display:"flex",alignItems:"center",justifyContent:"center",height:"80vh"},item:{maxWidth:600,borderColor:e.palette.primary.main,borderRadius:10,borderWidth:1,borderStyle:"solid",background:e.palette.primary.lightGrey},form:{margin:30},paddings:{marginBottom:20},button:{display:"block",marginLeft:"auto",marginRight:"auto"},priceContainer:{display:"flex",flexDirection:"row"},priceItem:{marginRight:5},checkBoxMargins:{marginRight:0,marginLeft:0}}})),wr={firstName:"",lastName:"",userName:"",writerDescription:"",writerGenres:[],oneArticlePrice:0,montlySubscriptionPrice:0,yearlySubscriptionPrice:0,password:"",passwordConfirmation:"",files:[]},Nr=tr.d().shape({firstName:tr.f().min(2,"Too Short").max(50,"Too Long").required("Required"),lastName:tr.f().min(2,"Too Short").max(50,"Too Long").required("Required"),userName:tr.f().min(3,"Too Short").max(50,"Too Long").required("Required"),writerDescription:tr.f().min(50,"Description must be at least 50 characters").max(500,"Description must be less than 500 characters").required("Required"),writerGenres:tr.a().min(1,"Check at least one category"),oneArticlePrice:tr.c().required("Required").moreThan(0,"Value must be greater than 0"),montlySubscriptionPrice:tr.c().required("Required").moreThan(0,"Value must be greater than 0"),yearlySubscriptionPrice:tr.c().required("Required").moreThan(0,"Value must be greater than 0"),password:tr.f().min(8,"Password too Short").max(50,"Password too Long").required("Required"),passwordConfirmation:tr.f().oneOf([tr.e("password"),null],"Passwords must match"),files:tr.a().min(1,"One image required")}),Cr=function(e){var t=e.validateUsername,r=e.values,n=e.errors,a=e.touched,c=e.handleChange,i=e.handleBlur,o=e.handleSubmit,s=e.setFieldValue,l=yr();return Object(F.jsx)("div",{className:l.container,children:Object(F.jsxs)("div",{className:l.item,children:[Object(F.jsx)(C.a,{variant:"h4",style:{textAlign:"center",marginTop:20},children:"Writer registration form"}),Object(F.jsxs)("form",{onSubmit:o,className:l.form,children:[Object(F.jsx)(er.a,{component:rr.c,onChange:c,onBlur:i,value:r.firstName,error:a.firstName&&Boolean(n.firstName),helperText:a.firstName&&n.firstName,id:"firstName",name:"firstName",label:"First name",variant:"outlined",fullWidth:!0,className:l.paddings,InputProps:{className:l.inputColor}}),Object(F.jsx)(er.a,{component:rr.c,onChange:c,onBlur:i,value:r.lastName,error:a.lastName&&Boolean(n.lastName),helperText:a.lastName&&n.lastName,id:"lastName",name:"lastName",label:"Last name",variant:"outlined",fullWidth:!0,className:l.paddings,InputProps:{className:l.inputColor}}),Object(F.jsx)(er.a,{validate:t,component:rr.c,onChange:c,onBlur:i,value:r.userName,error:a.userName&&Boolean(n.userName),helperText:a.userName&&n.userName,id:"userName",name:"userName",label:"Username",variant:"outlined",fullWidth:!0,className:l.paddings,InputProps:{className:l.inputColor}}),Object(F.jsx)(er.a,{component:rr.c,onChange:c,onBlur:i,value:r.writerDescription,error:a.writerDescription&&Boolean(n.writerDescription),helperText:a.writerDescription&&n.writerDescription,id:"writerDescription",name:"writerDescription",label:"Description",variant:"outlined",multiline:!0,fullWidth:!0,className:l.paddings,InputProps:{className:l.inputColor}}),Object(F.jsxs)(Nt.a,{component:"fieldset",className:l.formControl,children:[Object(F.jsx)(C.a,{variant:"subtitle1",children:"Categories"}),n.writerGenres&&a.writerGenres&&Object(F.jsx)(C.a,{variant:"caption",style:{color:"#f44336"},children:n.writerGenres}),Object(F.jsx)(nr.a,{row:!0,children:$.map((function(e){return Object(F.jsx)(Tt.a,{classes:{root:l.checkBoxMargins},control:Object(F.jsx)(er.a,{component:rr.a,classes:{root:l.checkBoxMargins},id:e.toLowerCase(),type:"checkbox",name:"writerGenres",value:e,Label:{label:"".concat(e)}})},e)}))})]}),Object(F.jsxs)(Nt.a,{component:"fieldset",className:l.paddings,children:[Object(F.jsx)(C.a,{variant:"subtitle1",style:{marginBottom:10},children:"Pricing"}),Object(F.jsxs)("div",{className:l.priceContainer,children:[Object(F.jsx)(er.a,{component:rr.c,onChange:c,onBlur:i,value:r.oneArticlePrice,id:"oneArticlePrice",name:"oneArticlePrice",label:"One Article",type:"number",variant:"outlined",fullWidth:!0,className:l.priceItem,InputProps:{className:l.inputColor}}),Object(F.jsx)(er.a,{component:rr.c,onChange:c,onBlur:i,value:r.montlySubscriptionPrice,error:a.montlySubscriptionPrice&&Boolean(n.montlySubscriptionPrice),helperText:a.montlySubscriptionPrice&&n.montlySubscriptionPrice,id:"montlySubscriptionPrice",name:"montlySubscriptionPrice",label:"Montly Subscription",type:"number",variant:"outlined",fullWidth:!0,className:l.priceItem,InputProps:{className:l.inputColor}}),Object(F.jsx)(er.a,{component:rr.c,onChange:c,onBlur:i,value:r.yearlySubscriptionPrice,error:a.yearlySubscriptionPrice&&Boolean(n.yearlySubscriptionPrice),helperText:a.yearlySubscriptionPrice&&n.yearlySubscriptionPrice,id:"yearlySubscriptionPrice",name:"yearlySubscriptionPrice",label:"Yearly Subscription",type:"number",variant:"outlined",fullWidth:!0,InputProps:{className:l.inputColor}})]})]}),Object(F.jsx)(er.a,{component:rr.c,onChange:c,onBlur:i,value:r.password,error:a.password&&Boolean(n.password),helperText:a.password&&n.password,id:"password",name:"password",label:"Password",type:"password",variant:"outlined",fullWidth:!0,className:l.paddings,InputProps:{className:l.inputColor}}),Object(F.jsx)(er.a,{component:rr.c,onChange:c,onBlur:i,value:r.passwordConfirmation,error:a.passwordConfirmation&&Boolean(n.passwordConfirmation),helperText:a.passwordConfirmation&&n.passwordConfirmation,id:"passwordConfirmation",name:"passwordConfirmation",label:"Password confirmation",type:"password",variant:"outlined",fullWidth:!0,className:l.paddings,InputProps:{className:l.inputColor}}),Object(F.jsx)(C.a,{variant:"subtitle1",className:l.formControl,children:"Profile picture"}),Object(F.jsx)("div",{className:l.formControl,children:n.files&&a.files&&Object(F.jsx)(C.a,{variant:"caption",style:{color:"#f44336"},children:n.files})}),Object(F.jsx)(vr,{setFieldValue:s,values:r}),Object(F.jsx)(k.a,{color:"primary",variant:"contained",type:"submit",id:"submitWriterRegister",className:l.button,children:"Sign Up"})]})]})})},Tr=function(){var e=Object(f.f)(),t=Object(i.b)(),r=Object(i.c)((function(e){return e.writers})),n=function(){var r=Object(j.a)(p.a.mark((function r(n){var a,c,i,o,s;return p.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,(a=new FormData).append("file",n.files[0]),r.next=5,cr.create(a);case 5:return c=r.sent,i=Object(U.a)(Object(U.a)({},n),{},{imageId:c.id}),r.next=9,nt.create(i);case 9:return o=r.sent,s=Object(U.a)(Object(U.a)({},c),{},{writer:o.id}),r.next=13,t(or(s));case 13:return r.next=15,t(ct(o));case 15:t(be("Registered successfully")),e.push("/writerssection/login"),r.next=22;break;case 19:r.prev=19,r.t0=r.catch(0),t(fe("An error occurred. Please try again"));case 22:case"end":return r.stop()}}),r,null,[[0,19]])})));return function(e){return r.apply(this,arguments)}}(),a=function(e){var t;return r.some((function(t){return t.userName===e}))&&(t="Sorry, this username already exists "),t};return Object(F.jsx)("div",{children:Object(F.jsx)(er.c,{initialValues:wr,validationSchema:Nr,onSubmit:n,children:function(e){var t=e.values,r=e.errors,n=e.touched,c=e.handleChange,i=e.handleBlur,o=e.handleSubmit,s=e.setFieldValue;return Object(F.jsx)(Cr,{validateUsername:a,values:t,errors:r,touched:n,handleChange:c,handleBlur:i,handleSubmit:o,setFieldValue:s})}})})},Ar=Object(O.a)((function(e){return{inputColor:{color:e.palette.text.secondary},loginText:{textAlign:"center",marginBottom:30},container:{display:"flex",alignItems:"center",justifyContent:"center",height:"80vh"},item:{maxWidth:600,borderColor:e.palette.primary.main,borderRadius:10,borderWidth:1,borderStyle:"solid",background:e.palette.primary.lightGrey},form:{margin:30},paddings:{marginBottom:20},button:{display:"block",marginLeft:"auto",marginRight:"auto"}}})),kr={userName:"",password:""},Sr=tr.d().shape({userName:tr.f().required("Username is required"),password:tr.f().required("Password is required")}),Rr=function(e){var t=e.values,r=e.errors,n=e.touched,a=e.handleChange,c=e.handleBlur,i=e.handleSubmit,o=Ar();return Object(F.jsx)("div",{className:o.container,children:Object(F.jsx)("div",{className:o.item,children:Object(F.jsxs)("form",{onSubmit:i,className:o.form,children:[Object(F.jsx)(C.a,{variant:"h4",className:o.loginText,children:"Log In"}),Object(F.jsx)(er.a,{component:rr.c,value:t.userName,onChange:a,onBlur:c,error:n.userName&&Boolean(r.userName),helperText:n.userName&&r.userName,fullWidth:!0,id:"userName",name:"userName",label:"Username",variant:"outlined",InputProps:{className:o.inputColor},className:o.paddings}),Object(F.jsx)(er.a,{component:rr.c,value:t.password,onChange:a,onBlur:c,error:n.password&&Boolean(r.password),helperText:n.password&&r.password,fullWidth:!0,id:"password",name:"password",label:"Password",type:"password",variant:"outlined",InputProps:{className:o.inputColor},className:o.paddings}),Object(F.jsx)(k.a,{id:"readerLoginButton",color:"primary",variant:"contained",type:"submit",className:o.button,children:"Log in"})]})})})},Ir=function(){var e=Object(f.f)(),t=Object(i.b)(),r=function(){var r=Object(j.a)(p.a.mark((function r(n){return p.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,t(ie(n));case 3:t(be("Login successful")),e.push("/"),r.next=10;break;case 7:r.prev=7,r.t0=r.catch(0),t(fe("Incorrect username or password"));case 10:case"end":return r.stop()}}),r,null,[[0,7]])})));return function(e){return r.apply(this,arguments)}}();return Object(F.jsx)("div",{children:Object(F.jsx)(er.c,{initialValues:kr,validationSchema:Sr,onSubmit:r,children:function(e){var t=e.values,r=e.errors,n=e.touched,a=e.handleChange,c=e.handleBlur,i=e.handleSubmit;return Object(F.jsx)(Rr,{values:t,errors:r,touched:n,handleChange:a,handleBlur:c,handleSubmit:i})}})})},Er=r(440),Dr=r(437),Pr=function(e){return Object(F.jsx)(Dr.a,Object(U.a)({elevation:6,variant:"filled"},e))},Br=function(){var e=Object(i.c)((function(e){return e.notification}));return Object(F.jsx)(Er.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:e.open,TransitionComponent:T.a,children:Object(F.jsx)(Pr,{severity:e.messageType,children:e.message})})},_r=Object(O.a)((function(e){return{inputColor:{color:e.palette.text.secondary},loginText:{textAlign:"center",marginBottom:30},container:{display:"flex",alignItems:"center",justifyContent:"center",height:"80vh"},item:{maxWidth:600,borderColor:e.palette.primary.main,borderRadius:10,borderWidth:1,borderStyle:"solid",background:e.palette.primary.lightGrey},form:{margin:30},paddings:{marginBottom:20},button:{display:"block",marginLeft:"auto",marginRight:"auto"}}})),Wr={userName:"",password:""},Lr=tr.d().shape({userName:tr.f().required("Username is required"),password:tr.f().required("Password is required")}),Fr=function(e){var t=e.reader,r=e.values,n=e.errors,a=e.touched,c=e.handleChange,i=e.handleBlur,o=e.handleSubmit,s=_r();return Object(F.jsx)("div",{className:s.container,children:Object(F.jsx)("div",{className:s.item,children:Object(F.jsxs)("form",{onSubmit:o,className:s.form,children:[Object(F.jsx)(C.a,{variant:"h4",className:s.loginText,children:"Writer Log In"}),Object(F.jsx)(er.a,{component:rr.c,className:s.paddings,fullWidth:!0,id:"userName",name:"userName",label:"Username",variant:"outlined",InputProps:{className:s.inputColor},value:r.userName,onChange:c,onBlur:i,error:a.userName&&Boolean(n.userName),helperText:a.userName&&n.userName}),Object(F.jsx)(er.a,{component:rr.c,className:s.paddings,fullWidth:!0,id:"password",name:"password",label:"Password",type:"password",variant:"outlined",InputProps:{className:s.inputColor},value:r.password,onChange:c,onBlur:i,error:a.password&&Boolean(n.password),helperText:a.password&&n.password}),t?Object(F.jsxs)("div",{children:[Object(F.jsx)(k.a,{color:"primary",variant:"contained",disabled:!0,type:"submit",className:s.button,children:"Log in"}),Object(F.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(F.jsx)(C.a,{fullWidth:!0,variant:"subtitle1",style:{color:"#f44336",marginTop:10},children:"Logout from Reader account to Login as Writer"})})]}):Object(F.jsx)(k.a,{color:"primary",variant:"contained",type:"submit",id:"writerLoginButton",className:s.button,children:"Log in"})]})})})},Mr=function(){var e=Object(i.c)((function(e){return e.reader})),t=Object(i.c)((function(e){return e.writers})),r=Object(i.b)(),n=Object(f.f)(),a=function(){var e=Object(j.a)(p.a.mark((function e(a){var c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r(de(a));case 3:c=t.filter((function(e){return e.userName===String(a.userName)}))[0],r(be("Logged in successfully")),n.push("/writerssection/profile/".concat(c.id)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),r(fe("Incorrect username or password"));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(F.jsx)("div",{children:Object(F.jsx)(er.c,{initialValues:Wr,validationSchema:Lr,onSubmit:a,children:function(t){var r=t.values,n=t.errors,a=t.touched,c=t.handleChange,i=t.handleBlur,o=t.handleSubmit;return Object(F.jsx)(Fr,{reader:e,values:r,errors:n,touched:a,handleChange:c,handleBlur:i,handleSubmit:o})}})})},Gr="".concat("http://localhost:3001","/api/images/readers"),Ur={getAll:function(){var e=Object(j.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re.a.get(Gr);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getOne:function(){var e=Object(j.a)(p.a.mark((function e(t){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re.a.get("".concat(Gr,"/").concat(t));case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),create:function(){var e=Object(j.a)(p.a.mark((function e(t){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re.a.post(Gr,t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Vr=function(){return function(){var e=Object(j.a)(p.a.mark((function e(t){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ur.getAll();case 2:r=e.sent,t({type:"INIT_READERS_IMAGES",data:r});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},qr=function(e){return function(){var t=Object(j.a)(p.a.mark((function t(r){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r({type:"ADD_READER_IMAGE",data:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},zr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_READERS_IMAGES":return t.data;case"ADD_READER_IMAGE":return e.concat(t.data);default:return e}},Hr=Object(O.a)((function(e){return{inputColor:{color:e.palette.text.secondary},loginText:{textAlign:"center",marginBottom:30},container:{display:"flex",alignItems:"center",justifyContent:"center",height:"80vh"},item:{maxWidth:600,borderColor:e.palette.primary.main,borderRadius:10,borderWidth:1,borderStyle:"solid",background:e.palette.primary.lightGrey},form:{margin:30},paddings:{marginBottom:20},button:{display:"block",marginLeft:"auto",marginRight:"auto"},formControl:{display:"flex",alignItems:"center",justifyContent:"center",marginTop:5}}})),Yr={firstName:"",lastName:"",userName:"",password:"",passwordConfirmation:"",files:[]},Jr=tr.d().shape({firstName:tr.f().min(2,"Too Short!").max(50,"Too Long!").required("Required"),lastName:tr.f().min(2,"Too Short!").max(50,"Too Long!").required("Required"),userName:tr.f().min(3,"Username too Short!").max(50,"Username too Long!").required("Required"),password:tr.f().min(8,"Password too Short!").max(50,"Password too Long!").required("Required"),passwordConfirmation:tr.f().oneOf([tr.e("password"),null],"Passwords must match"),files:tr.a().min(1,"One image required")}),Kr=function(e){var t=e.values,r=e.errors,n=e.touched,a=e.handleChange,c=e.handleBlur,i=e.handleSubmit,o=e.validateUsername,s=e.setFieldValue,l=Hr();return Object(F.jsx)("div",{className:l.container,children:Object(F.jsx)("div",{className:l.item,children:Object(F.jsxs)("form",{onSubmit:i,className:l.form,children:[Object(F.jsx)(C.a,{variant:"h4",className:l.loginText,children:"Sign Up"}),Object(F.jsx)(er.a,{component:rr.c,value:t.firstName,onChange:a,onBlur:c,error:n.firstName&&Boolean(r.firstName),helperText:n.firstName&&r.firstName,fullWidth:!0,id:"firstName",name:"firstName",label:"First name",variant:"outlined",InputProps:{className:l.inputColor},className:l.paddings}),Object(F.jsx)(er.a,{component:rr.c,value:t.lastName,onChange:a,onBlur:c,error:n.lastName&&Boolean(r.lastName),helperText:n.lastName&&r.lastName,fullWidth:!0,id:"lastName",name:"lastName",label:"Last name",variant:"outlined",InputProps:{className:l.inputColor},className:l.paddings}),Object(F.jsx)(er.a,{component:rr.c,validate:o,value:t.userName,onChange:a,onBlur:c,error:n.userName&&Boolean(r.userName),helperText:n.userName&&r.userName,fullWidth:!0,id:"userName",name:"userName",label:"Username",variant:"outlined",InputProps:{className:l.inputColor},className:l.paddings}),Object(F.jsx)(er.a,{component:rr.c,value:t.password,onChange:a,onBlur:c,error:n.password&&Boolean(r.password),helperText:n.password&&r.password,fullWidth:!0,id:"password",name:"password",label:"Password",type:"password",variant:"outlined",InputProps:{className:l.inputColor},className:l.paddings}),Object(F.jsx)(er.a,{component:rr.c,value:t.passwordConfirmation,onChange:a,onBlur:c,error:n.passwordConfirmation&&Boolean(r.passwordConfirmation),helperText:n.passwordConfirmation&&r.passwordConfirmation,fullWidth:!0,id:"passwordConfirmation",name:"passwordConfirmation",label:"Password confirmation",type:"password",variant:"outlined",InputProps:{className:l.inputColor},className:l.paddings}),Object(F.jsx)(C.a,{variant:"subtitle1",className:l.formControl,children:"Profile picture"}),Object(F.jsx)("div",{className:l.formControl,children:r.files&&n.files&&Object(F.jsx)(C.a,{variant:"caption",style:{color:"#f44336"},children:r.files})}),Object(F.jsx)(vr,{setFieldValue:s,values:t}),Object(F.jsx)(k.a,{id:"submitReaderRegister",color:"primary",variant:"contained",type:"submit",className:l.button,children:"Sign Up"})]})})})},$r=function(){var e=Object(f.f)(),t=Object(i.b)(),r=Object(i.c)((function(e){return e.readers})),n=function(){var r=Object(j.a)(p.a.mark((function r(n){var a,c,i,o,s;return p.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,(a=new FormData).append("file",n.files[0]),r.next=5,Ur.create(a);case 5:return c=r.sent,i=Object(U.a)(Object(U.a)({},n),{},{imageId:c.id}),r.next=9,Ve.create(i);case 9:return o=r.sent,s=Object(U.a)(Object(U.a)({},c),{},{reader:o.id}),r.next=13,t(qr(s));case 13:return r.next=15,t(ze(o));case 15:t(be("Registration successful")),e.push("/reader/login"),r.next=22;break;case 19:r.prev=19,r.t0=r.catch(0),t(fe("An error occurred. Please try again"));case 22:case"end":return r.stop()}}),r,null,[[0,19]])})));return function(e){return r.apply(this,arguments)}}(),a=function(e){var t;return r.some((function(t){return t.userName===e}))&&(t="Sorry, this username already exists "),t};return Object(F.jsx)("div",{children:Object(F.jsx)(er.c,{initialValues:Yr,validationSchema:Jr,onSubmit:n,children:function(e){var t=e.values,r=e.errors,n=e.touched,c=e.handleChange,i=e.handleBlur,o=e.handleSubmit,s=e.setFieldValue;return Object(F.jsx)(Kr,{validateUsername:a,values:t,errors:r,touched:n,handleChange:c,handleBlur:i,handleSubmit:o,setFieldValue:s})}})})},Qr=r(192),Xr=Object(O.a)((function(e){return{text:{color:e.palette.text.secondary}}})),Zr=function(e){var t=e.openDialog,r=e.setOpenDialog,a=e.reader,c=Object(n.useState)(0),o=Object(h.a)(c,2),s=o[0],l=o[1],u=Xr(),d=Object(i.b)(),b=Object(x.a)(["readerAuthCookie"]),m=Object(h.a)(b,3),O=(m[0],m[1],m[2]),g=Object(f.f)(),v=function(){var e=Object(j.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,n=Number(s),e.next=5,d(Je(n,a));case 5:d(be("".concat(n," \u20ac added to your funds"))),l(0),r(!1),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),console.log("error response",e.t0.response),"Unauthorized"===e.t0.response.statusText&&"token expired"===e.t0.response.data.error?(d(fe("You session has expired. Please login again")),d((function(e){e({type:"REMOVE_READER",data:null})})),O("readerAuthCookie",{path:"/"}),g.push("/reader/login")):d(fe("An error occurred. Please try again"));case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(F.jsxs)(jt.a,{open:t,onClose:function(){return r(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(F.jsx)(bt.a,{id:"alert-dialog-title",className:u.text,children:"Add Funds"}),Object(F.jsxs)(ht.a,{children:[Object(F.jsx)(Qr.a,{id:"addFundsInput",onChange:function(e){l(e.target.value)},value:s,isNumericString:!0}),Object(F.jsx)(k.a,{color:"primary",id:"addFundsDialogAddButton",autoFocus:!0,onClick:v,children:"add"}),Object(F.jsx)(k.a,{onClick:function(){return r(!1)},color:"primary",autoFocus:!0,children:"close"})]})]})},en=r(202),tn=r(435),rn=r(436),nn=r(423),an=r(193),cn=r.n(an),on=Object(O.a)((function(e){return{text:{color:e.palette.text.secondary,textTransform:"uppercase"},root:{color:e.palette.text.blueish,textDecoration:"underline"},listItem:{borderColor:e.palette.primary.main,borderRadius:10,borderWidth:1,borderStyle:"solid",marginBottom:10}}})),sn=function(e){var t=e.children,r=e.value,n=e.index,a=Object(en.a)(e,["children","value","index"]);return Object(F.jsx)("div",Object(U.a)(Object(U.a)({role:"tabpanel",hidden:r!==n,id:"simple-tabpanel-".concat(n),"aria-labelledby":"simple-tab-".concat(n)},a),{},{children:r===n&&Object(F.jsx)(tn.a,{p:3,children:Object(F.jsx)(C.a,{component:"span",children:t})})}))},ln=function(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}},un=function(e){return Object(F.jsx)(q.a,Object(U.a)({button:!0,component:"a"},e))},dn=function(e){var t=e.reader,r=Object(n.useState)(0),a=Object(h.a)(r,2),c=a[0],o=a[1],s=on(),l=Object(i.b)(),u=Object(x.a)(["readerAuthCookie"]),d=Object(h.a)(u,3),m=(d[0],d[1],d[2]),O=Object(f.f)(),g=function(){var e=Object(j.a)(p.a.mark((function e(r){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l(Ye(r,t));case 3:return e.next=5,l(ot(t,r));case 5:l(be("".concat(r.firstName," ").concat(r.lastName," removed from favorites"))),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("error response",e.t0.response),"Unauthorized"===e.t0.response.statusText&&"token expired"===e.t0.response.data.error?(l(fe("You session has expired. Please login again")),l((function(e){e({type:"REMOVE_READER",data:null})})),m("readerAuthCookie",{path:"/"}),O.push("/reader/login")):l(fe("An error occurred. Please try again"));case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(F.jsxs)("div",{children:[Object(F.jsx)(y.a,{position:"static",children:Object(F.jsxs)(rn.a,{value:c,onChange:function(e,t){o(t)},"aria-label":"simple tabs example",centered:!0,children:[Object(F.jsx)(nn.a,Object(U.a)({label:"Favorite writers"},ln(0))),Object(F.jsx)(nn.a,Object(U.a)({label:"Subscribtions"},ln(1))),Object(F.jsx)(nn.a,Object(U.a)({label:"Comments"},ln(2)))]})}),Object(F.jsx)(sn,{value:c,index:0,children:0!==t.favoritewriters.length?Object(F.jsx)(V.a,{component:"div",children:t.favoritewriters.map((function(e){return Object(F.jsxs)(q.a,{className:s.listItem,children:[Object(F.jsx)(un,{component:b.b,to:"/author/".concat(e.id),children:Object(F.jsx)(z.a,{primary:"".concat(e.firstName," ").concat(e.lastName),classes:{root:s.root}})}),Object(F.jsx)(k.a,{variant:"contained",color:"secondary",className:s.button,startIcon:Object(F.jsx)(cn.a,{}),onClick:function(){return g(e)},children:"Remove"})]},e.id)}))}):Object(F.jsx)(C.a,{className:s.text,variant:"subtitle1",children:"No favorited writers"})}),Object(F.jsx)(sn,{value:c,index:1,children:0!==t.subscriptions.length?Object(F.jsx)(V.a,{component:"div",children:t.subscriptions.map((function(e){return Object(F.jsx)(q.a,{button:!0,className:s.listItem,children:Object(F.jsxs)(un,{component:b.b,to:"/author/".concat(e.recipient[0].id),children:[Object(F.jsx)(z.a,{primary:"".concat(e.recipient[0].firstName," ").concat(e.recipient[0].lastName),classes:{root:s.root}}),Object(F.jsx)(C.a,{className:s.text,style:{paddingRight:30},variant:"subtitle1",children:"type: ".concat(e.type)}),Object(F.jsx)(C.a,{className:s.text,variant:"subtitle1",children:"Duration: ".concat(e.startDate.slice(0,-5)," - ").concat(e.endDate.slice(0,-5))})]})},e.id)}))}):Object(F.jsx)(C.a,{className:s.text,variant:"subtitle1",children:"No subscribed writers"})}),Object(F.jsx)(sn,{value:c,index:2,children:0!==t.readerComments.length?Object(F.jsx)(V.a,{component:"div",children:t.readerComments.map((function(e){return Object(F.jsxs)(q.a,{className:s.listItem,children:[Object(F.jsx)(z.a,{className:s.flexGrow,primary:"".concat(e.comment),secondary:"Posted: ".concat(e.date)}),Object(F.jsx)(b.b,{to:"/article/".concat(e.article.id),children:Object(F.jsx)(z.a,{primary:"".concat(e.article.title),classes:{root:s.root}})})]},e.id)}))}):Object(F.jsx)(C.a,{className:s.text,variant:"subtitle1",children:"No comments written"})})]})},pn=Object(O.a)({profileContaner:{display:"flex",flexDirection:"row",justifyContent:"flex-start"},infoContainer:{display:"flex",flexDirection:"column",justifyContent:"flex-start",paddingLeft:10},text:{textAlign:"center",paddingTop:50},textGenres:{color:"grey"},balance:{display:"flex",flexDirection:"row",marginTop:5,marginBottom:20},addFundsButton:{marginLeft:10}}),jn=function(){var e=pn(),t=Object(n.useState)(!1),r=Object(h.a)(t,2),a=r[0],c=r[1],o=Object(f.g)().id,s=Object(i.c)((function(e){return e.readers})),l=Object(i.c)((function(e){return e.readerImages})),u=s.filter((function(e){return e.id===o}))[0],d=void 0!==u.joined?u.joined:"No data",p=l&&0!==l.length&&l.filter((function(e){return e.reader===o}))[0].img.data.data,j=btoa(new Uint8Array(p).reduce((function(e,t){return e+String.fromCharCode(t)}),""));return s?Object(F.jsxs)("div",{children:[Object(F.jsxs)("div",{className:e.profileContaner,children:[0===l.length?Object(F.jsx)(B.a,{width:200,variant:"rect",animation:"wave"}):Object(F.jsx)("img",{width:"200",src:"data:image/jpeg;base64,".concat(j)}),Object(F.jsxs)("div",{className:e.infoContainer,children:[Object(F.jsx)(C.a,{variant:"h4",children:u.userName}),Object(F.jsxs)("div",{className:e.balance,children:[Object(F.jsxs)(C.a,{variant:"h6",children:["My funds: ",u.funds," \u20ac"]}),Object(F.jsx)(k.a,{color:"primary",size:"small",variant:"outlined",id:"addFundsButton",className:e.addFundsButton,onClick:function(){return c(!0)},children:"Add funds"})]}),Object(F.jsxs)(C.a,{variant:"caption",children:["Joined: ",d]})]})]}),Object(F.jsx)(dn,{reader:u}),Object(F.jsx)(Zr,{openDialog:a,setOpenDialog:c,reader:u})]}):Object(F.jsx)("p",{children:"Loading..."})},bn=r(424),fn=r(425),mn=Object(O.a)((function(e){return{root:{width:"100%",backgroundColor:e.palette.primary.middleGrey},listItem:{marginBottom:10,textDecoration:"none","&:hover":{backgroundColor:e.palette.primary.hover}},text:{color:e.palette.text.primary,textDecoration:"none"},textWithPadding:{textAlign:"center",paddingBottom:20}}})),hn=function(){var e=mn(),t=Object(i.c)((function(e){return e.writers})),r=Object(i.c)((function(e){return e.writerImages})),n=function(e){var t=r&&0!==r.length&&r.filter((function(t){return t.writer===e}))[0].img.data.data,n=t&&btoa(new Uint8Array(t).reduce((function(e,t){return e+String.fromCharCode(t)}),""));return Object(F.jsx)("div",{children:0===r.length?Object(F.jsx)(B.a,{animation:"wave",children:Object(F.jsx)(A.a,{})}):Object(F.jsx)(A.a,{alt:"Writers Profile Picture",src:"data:image/jpeg;base64,".concat(n)})})};return Object(F.jsxs)("div",{children:[Object(F.jsx)(C.a,{variant:"h3",className:e.textWithPadding,children:"All writers"}),Object(F.jsx)(V.a,{className:e.root,children:t.map((function(t){return Object(F.jsxs)(q.a,{button:!0,component:b.b,to:"/author/".concat(t.id),classes:{hover:e.hover},className:e.listItem,children:[Object(F.jsx)(bn.a,{children:n(t.id)}),Object(F.jsx)(z.a,{primary:Object(F.jsxs)(C.a,{variant:"subtitle1",display:"block",className:e.text,children:[t.firstName," ",t.lastName]}),secondary:t.writerGenres.map((function(t){return Object(F.jsx)(C.a,{variant:"caption",display:"block",className:e.text,children:t},t)}))}),Object(F.jsx)(C.a,{variant:"caption",display:"block",className:e.text,children:t.writerDescription}),Object(F.jsx)(fn.a,{})]},t.id)}))})]})},xn=Object(O.a)((function(e){return{root:{flexGrow:1,paddingTop:20},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary},titleText:{color:e.palette.text.grey},infoText:{color:e.palette.text.secondary},card:{backgroundColor:e.palette.primary.lightGrey,minHeight:105},actionArea:{"&:hover $focusHighlight":{opacity:.5}},focusHighlight:{}}})),On=function(e){var t=e.writer,r=e.setComponentToOpen,n=xn(),a=t.myarticles.map((function(e){return e.views})).reduce((function(e,t){return e+t}),0);return Object(F.jsx)("div",{className:n.root,children:Object(F.jsxs)(ge.a,{container:!0,spacing:2,children:[Object(F.jsx)(ge.a,{item:!0,xs:2,children:Object(F.jsx)(ve.a,{variant:"outlined",className:n.card,children:Object(F.jsx)(ye.a,{onClick:function(){return r("articles")},classes:{root:n.actionArea,focusHighlight:n.focusHighlight},children:Object(F.jsxs)(Ne.a,{children:[Object(F.jsx)(C.a,{className:n.titleText,gutterBottom:!0,children:"My Articles"}),Object(F.jsx)(C.a,{className:n.infoText,variant:"h4",children:t.myarticles.length})]})})})}),Object(F.jsx)(ge.a,{item:!0,xs:2,children:Object(F.jsx)(ve.a,{variant:"outlined",className:n.card,children:Object(F.jsx)(ye.a,{onClick:function(){return r("subscribers")},classes:{root:n.actionArea,focusHighlight:n.focusHighlight},children:Object(F.jsxs)(Ne.a,{children:[Object(F.jsx)(C.a,{className:n.titleText,gutterBottom:!0,children:"Subscribers"}),Object(F.jsx)(C.a,{className:n.infoText,variant:"h4",children:t.subscribers.length})]})})})}),Object(F.jsx)(ge.a,{item:!0,xs:2,children:Object(F.jsx)(ve.a,{variant:"outlined",className:n.card,children:Object(F.jsx)(ye.a,{onClick:function(){return r("followers")},classes:{root:n.actionArea,focusHighlight:n.focusHighlight},children:Object(F.jsxs)(Ne.a,{children:[Object(F.jsx)(C.a,{className:n.titleText,gutterBottom:!0,children:"Followers"}),Object(F.jsx)(C.a,{className:n.infoText,variant:"h4",children:t.followers.length})]})})})}),Object(F.jsx)(ge.a,{item:!0,xs:2,children:Object(F.jsx)(ve.a,{variant:"outlined",className:n.card,children:Object(F.jsx)(ye.a,{id:"myPricesCardButton",onClick:function(){return r("prices")},classes:{root:n.actionArea,focusHighlight:n.focusHighlight},children:Object(F.jsxs)(Ne.a,{children:[Object(F.jsx)(C.a,{className:n.titleText,gutterBottom:!0,variant:"body2",children:"My prices, \u20ac"}),Object(F.jsxs)(C.a,{className:n.infoText,variant:"h4",children:[t.oneArticlePrice||0,", ",t.montlySubscriptionPrice||0,", ",t.yearlySubscriptionPrice||0]})]})})})}),Object(F.jsx)(ge.a,{item:!0,xs:2,children:Object(F.jsx)(ve.a,{variant:"outlined",className:n.card,children:Object(F.jsx)(ye.a,{children:Object(F.jsxs)(Ne.a,{children:[Object(F.jsx)(C.a,{className:n.titleText,gutterBottom:!0,children:"Total Views"}),Object(F.jsx)(C.a,{className:n.infoText,variant:"h4",children:a})]})})})}),Object(F.jsx)(ge.a,{item:!0,xs:2,children:Object(F.jsx)(ve.a,{variant:"outlined",className:n.card,children:Object(F.jsx)(ye.a,{children:Object(F.jsxs)(Ne.a,{children:[Object(F.jsx)(C.a,{className:n.titleText,gutterBottom:!0,children:"Earnings, \u20ac"}),Object(F.jsx)(C.a,{className:n.infoText,variant:"h4",children:t.earnings?t.earnings:0})]})})})})]})})},gn=r(426),vn=r(427),yn=r(139),wn=r(428),Nn=r(429),Cn=r(430),Tn=r(431),An=Object(O.a)({main:{marginTop:20},table:{minWidth:650}}),kn=Object(g.a)((function(e){return{head:{backgroundColor:e.palette.primary.main,color:e.palette.text.primary},body:{backgroundColor:e.palette.primary.lightGrey,color:e.palette.text.secondary,fontSize:14}}}))(gn.a),Sn=function(e){var t=e.articles,r=An();return Object(F.jsx)(vn.a,{component:yn.a,className:r.main,children:Object(F.jsxs)(wn.a,{className:r.table,"aria-label":"simple table",children:[Object(F.jsx)(Nn.a,{children:Object(F.jsxs)(Cn.a,{children:[Object(F.jsx)(kn,{children:"Articles"}),Object(F.jsx)(kn,{align:"center",children:"Type"}),Object(F.jsx)(kn,{align:"center",children:"Genres"}),Object(F.jsx)(kn,{align:"center",children:"Views"}),Object(F.jsx)(kn,{align:"center",children:"Comments"}),Object(F.jsx)(kn,{align:"center",children:"Published"})]})}),Object(F.jsx)(Tn.a,{children:t.map((function(e){return Object(F.jsxs)(Cn.a,{hover:!0,children:[Object(F.jsx)(kn,{component:"th",scope:"row",children:e.title}),Object(F.jsx)(kn,{align:"center",children:"yes"===e.paid?"Paid":"Free"}),Object(F.jsx)(kn,{align:"center",children:e.genres.map((function(e){return"".concat(e," ")}))}),Object(F.jsx)(kn,{align:"center",children:e.views}),Object(F.jsx)(kn,{align:"center",children:0===e.comments.length?0:e.comments.length}),Object(F.jsx)(kn,{align:"center",children:e.published})]},e.id)}))})]})})},Rn=Object(O.a)((function(e){return{main:{marginTop:20},table:{minWidth:650},text:{color:e.palette.text.secondary,textTransform:"uppercase"}}})),In=Object(g.a)((function(e){return{head:{backgroundColor:e.palette.primary.main,color:e.palette.text.primary},body:{backgroundColor:e.palette.primary.lightGrey,color:e.palette.text.secondary,fontSize:14}}}))(gn.a),En=function(e){var t=e.followers,r=Rn();return Object(F.jsx)(vn.a,{component:yn.a,className:r.main,children:Object(F.jsxs)(wn.a,{className:r.table,"aria-label":"simple table",children:[Object(F.jsx)(Nn.a,{children:Object(F.jsx)(Cn.a,{children:Object(F.jsx)(In,{children:"Follower username"})})}),Object(F.jsx)(Tn.a,{children:0===t.length?Object(F.jsx)(Cn.a,{hover:!0,children:Object(F.jsx)(In,{component:"th",scope:"row",children:"No followers"})}):t.map((function(e){return Object(F.jsx)(Cn.a,{hover:!0,children:Object(F.jsx)(In,{component:"th",scope:"row",children:e.userName})},e.id)}))})]})})},Dn=Object(O.a)((function(e){return{main:{marginTop:20},table:{minWidth:650},text:{color:e.palette.text.secondary,textTransform:"uppercase"}}})),Pn=Object(g.a)((function(e){return{head:{backgroundColor:e.palette.primary.main,color:e.palette.text.primary},body:{backgroundColor:e.palette.primary.lightGrey,color:e.palette.text.secondary,fontSize:14}}}))(gn.a),Bn=function(e){var t=e.subscribers,r=Dn();return Object(F.jsx)(vn.a,{component:yn.a,className:r.main,children:Object(F.jsxs)(wn.a,{className:r.table,"aria-label":"simple table",children:[Object(F.jsx)(Nn.a,{children:Object(F.jsxs)(Cn.a,{children:[Object(F.jsx)(Pn,{children:"Subscribers username"}),Object(F.jsx)(Pn,{align:"center",children:"Type"}),Object(F.jsx)(Pn,{align:"center",children:"Duration"})]})}),Object(F.jsx)(Tn.a,{children:0===t.length?Object(F.jsxs)(Cn.a,{hover:!0,children:[Object(F.jsx)(Pn,{component:"th",scope:"row",children:"No subscribers"}),Object(F.jsx)(Pn,{align:"center"}),Object(F.jsx)(Pn,{align:"center"})]}):t.map((function(e){return Object(F.jsxs)(Cn.a,{hover:!0,children:[Object(F.jsx)(Pn,{component:"th",scope:"row",children:e.subscriber[0].userName}),Object(F.jsx)(Pn,{align:"center",children:e.type.charAt(0).toUpperCase()+e.type.slice(1)}),Object(F.jsxs)(Pn,{align:"center",children:[e.startDate.slice(0,-6)," - ",e.endDate.slice(0,-6)]})]},e.id)}))})]})})},_n=r(110),Wn=r(195),Ln=r.n(Wn),Fn=r(194),Mn=r.n(Fn),Gn=Object(O.a)((function(e){return{main:{marginTop:20},table:{minWidth:650},text:{color:e.palette.text.primary,textTransform:"uppercase"},cell:{flexGrow:1},inputColor:{color:"#000"}}})),Un=Object(g.a)((function(e){return{head:{backgroundColor:e.palette.primary.main,color:e.palette.text.primary},body:{backgroundColor:e.palette.primary.lightGrey,color:e.palette.text.secondary,fontSize:14}}}))(gn.a),Vn=function(e){var t=e.isEditMode,r=e.value,n=e.name,a=e.onChange,c=Gn();return Object(F.jsx)(Un,{align:"center",children:t?Object(F.jsx)(_.a,{type:"number",size:"small",variant:"outlined",value:r,name:n,id:"priceInput-".concat(n),onChange:function(e){return a(e)},InputProps:{className:c.inputColor},style:{width:100}}):r})},qn=function(e){var t=e.writer,r=Gn(),a=Object(i.b)(),c=Object(n.useState)(!1),o=Object(h.a)(c,2),s=o[0],l=o[1],u=Object(x.a)(["writerAuthCookie"]),d=Object(h.a)(u,3),b=(d[0],d[1],d[2]),m=Object(f.f)(),O=Object(n.useState)({oneArticlePrice:t.oneArticlePrice||0,montlySubscriptionPrice:t.montlySubscriptionPrice||0,yearlySubscriptionPrice:t.yearlySubscriptionPrice||0}),g=Object(h.a)(O,2),v=g[0],y=g[1],w=function(){var e=Object(j.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a(lt(v,t));case 3:a(be("Prices updated")),l(!1),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("error response",e.t0.response),"Unauthorized"===e.t0.response.statusText&&"token expired"===e.t0.response.data.error?(a(fe("You session has expired. Please login again")),a((function(e){e({type:"REMOVE_WRITER",data:null})})),b("writerAuthCookie",{path:"/"}),m.push("/writerssection/login")):a(fe("An error occurred. Please try again"));case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),C=function(e){y(Object(U.a)(Object(U.a)({},v),{},Object(_n.a)({},e.target.name,Number(e.target.value))))};return Object(F.jsx)(vn.a,{component:yn.a,className:r.main,children:Object(F.jsxs)(wn.a,{className:r.table,"aria-label":"simple table",children:[Object(F.jsx)(Nn.a,{children:Object(F.jsxs)(Cn.a,{children:[Object(F.jsx)(Un,{width:"25%",children:"Subscriptions"}),Object(F.jsx)(Un,{width:"20%",align:"center",children:"1 Article, \u20ac"}),Object(F.jsx)(Un,{width:"20%",align:"center",children:"1 Month, \u20ac"}),Object(F.jsx)(Un,{width:"20%",align:"center",children:"1 Year, \u20ac"}),Object(F.jsx)(Un,{width:"15%"})]})}),Object(F.jsx)(Tn.a,{children:Object(F.jsxs)(Cn.a,{hover:!0,children:[Object(F.jsx)(Un,{width:"25%",component:"th",scope:"row",children:"Price"}),Object(F.jsx)(Vn,{width:"20%",isEditMode:s,value:v.oneArticlePrice,name:"oneArticlePrice",onChange:C}),Object(F.jsx)(Vn,{width:"20%",isEditMode:s,value:v.montlySubscriptionPrice,name:"montlySubscriptionPrice",onChange:C}),Object(F.jsx)(Vn,{width:"20%",isEditMode:s,value:v.yearlySubscriptionPrice,name:"yearlySubscriptionPrice",onChange:C}),Object(F.jsx)(Un,{width:"15%",align:"right",children:s?Object(F.jsxs)("div",{className:r.editMode,children:[Object(F.jsx)(N.a,{"aria-label":"done",onClick:function(){return w()},id:"confirmChangedPricesButton",children:Object(F.jsx)(Mn.a,{})}),Object(F.jsx)(N.a,{"aria-label":"cancel",onClick:function(){return y({oneArticlePrice:t.oneArticlePrice,montlySubscriptionPrice:t.montlySubscriptionPrice,yearlySubscriptionPrice:t.yearlySubscriptionPrice}),void l(!1)},children:Object(F.jsx)(Ln.a,{})})]}):Object(F.jsx)(N.a,{id:"editPricesButton","aria-label":"delete",onClick:function(){return l(!0)},children:Object(F.jsx)(E.a,{})})})]})})]})})},zn=Object(O.a)({profileContaner:{display:"flex",flexDirection:"row",justifyContent:"flex-start"},infoContainer:{display:"flex",flexDirection:"column",justifyContent:"flex-start",paddingLeft:10},genresList:{display:"flex",flexDirection:"row",justifyContent:"flex-start"}}),Hn=function(){var e=zn(),t=Object(f.g)().id,r=Object(i.c)((function(e){return e.writers})),a=Object(i.c)((function(e){return e.writerImages})),c=r.filter((function(e){return e.id===t}))[0],o=Object(n.useState)("articles"),s=Object(h.a)(o,2),l=s[0],u=s[1],d=a&&0!==a.length&&a.filter((function(e){return e.writer===t}))[0].img.data.data,p=d&&btoa(new Uint8Array(d).reduce((function(e,t){return e+String.fromCharCode(t)}),""));return Object(F.jsxs)("div",{children:[Object(F.jsxs)("div",{className:e.profileContaner,children:[0===a.length?Object(F.jsx)(B.a,{width:200,variant:"rect",animation:"wave"}):Object(F.jsx)("img",{width:"200",src:"data:image/jpeg;base64,".concat(p)}),Object(F.jsxs)("div",{className:e.infoContainer,children:[Object(F.jsxs)(C.a,{variant:"h4",children:[c.firstName," ",c.lastName]}),Object(F.jsx)(C.a,{variant:"body1",children:c.writerDescription}),Object(F.jsx)(V.a,{className:e.genresList,children:c.writerGenres.map((function(e){return Object(F.jsx)(C.a,{variant:"body2",children:"".concat(e,".")},e)}))}),Object(F.jsx)(C.a,{variant:"caption",children:c.joined})]})]}),Object(F.jsx)(On,{writer:c,setComponentToOpen:u}),function(){switch(l){case"articles":return Object(F.jsx)(Sn,{articles:c.myarticles});case"followers":return Object(F.jsx)(En,{followers:c.followers});case"subscribers":return Object(F.jsx)(Bn,{subscribers:c.subscribers});case"prices":return Object(F.jsx)(qn,{writer:c})}}()]})},Yn=r(196),Jn=r.n(Yn),Kn=r(197),$n=r.n(Kn),Qn="".concat("http://localhost:3001","/api/images/articles"),Xn={getAll:function(){var e=Object(j.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re.a.get(Qn);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getOne:function(){var e=Object(j.a)(p.a.mark((function e(t){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re.a.get("".concat(Qn,"/").concat(t));case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),create:function(){var e=Object(j.a)(p.a.mark((function e(t){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re.a.post(Qn,t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Zn=function(){return function(){var e=Object(j.a)(p.a.mark((function e(t){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xn.getAll();case 2:r=e.sent,t({type:"INIT_ARTICLES_IMAGES",data:r});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},ea=function(e){return function(){var t=Object(j.a)(p.a.mark((function t(r){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r({type:"ADD_ARTICLE_IMAGE",data:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},ta=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_ARTICLES_IMAGES":return t.data;case"ADD_ARTICLE_IMAGE":return e.concat(t.data);default:return e}},ra=Object(O.a)((function(e){return{inputColor:{color:e.palette.text.secondary},loginText:{textAlign:"center",marginBottom:30},container:{marginTop:200,display:"flex",alignItems:"center",justifyContent:"center",height:"80vh"},item:{maxWidth:600,borderColor:e.palette.primary.main,borderRadius:10,borderWidth:1,borderStyle:"solid",background:e.palette.primary.lightGrey},form:{margin:30},paddings:{marginBottom:20},button:{display:"block",marginLeft:"auto",marginRight:"auto"},priceContainer:{display:"flex",flexDirection:"row"},priceItem:{marginRight:5},radioGroup:{display:"inline-block"},formControl:{display:"flex",alignItems:"center",justifyContent:"center",marginTop:10,marginBottom:10},checkBoxMargins:{marginRight:0,marginLeft:0},contentField:{marginBottom:15}}})),na={title:"",content:[],genres:[],paid:"no",files:[]},aa=tr.d().shape({title:tr.f().min(10,"Too Short").max(100,"Too Long").required("Required"),content:tr.a().min(1,"At least one paragraph required").of(tr.f().min(50,"Too Short")),genres:tr.a().min(1,"Check at least one category"),paid:tr.b().oneOf(["yes","no"]),files:tr.a().min(1,"One image required")}),ca=function(e){var t=e.values,r=e.errors,n=e.touched,a=e.handleChange,c=e.handleBlur,i=e.handleSubmit,o=e.setFieldValue,s=ra();return Object(F.jsx)("div",{className:s.container,children:Object(F.jsxs)("div",{className:s.item,children:[Object(F.jsx)(C.a,{variant:"h4",style:{textAlign:"center",marginTop:20},children:"Create an article"}),Object(F.jsxs)("form",{onSubmit:i,className:s.form,children:[Object(F.jsx)(C.a,{variant:"h6",className:s.formControl,children:"Title"}),Object(F.jsx)(er.a,{component:rr.c,onChange:a,onBlur:c,value:t.title,error:n.title&&Boolean(r.title),helperText:n.title&&r.title,id:"title",name:"title",label:"Title",variant:"outlined",fullWidth:!0,className:s.paddings,InputProps:{className:s.inputColor}}),Object(F.jsx)(C.a,{variant:"h6",className:s.formControl,children:"Content"}),Object(F.jsx)(er.b,{name:"content",render:function(e){var a=e.pop,c=e.push;return Object(F.jsxs)("div",{children:[t.content.map((function(e,t){return Object(F.jsxs)("div",{children:[Object(F.jsx)(er.a,{component:rr.c,value:e.index,label:"Paragraph ".concat(t+1),variant:"outlined",name:"content.".concat(t),type:"text",id:"paragraphInput-".concat(t),multiline:!0,fullWidth:!0,className:s.contentField,InputProps:{className:s.inputColor}}),r.content&&r.content[t]&&n.content&&n.content[t]]},t)})),Object(F.jsx)(N.a,{id:"addParagraphButton",color:"primary",size:"small","aria-label":"upload picture",component:"span",onClick:function(){return c("")},children:Object(F.jsx)(Jn.a,{})}),Object(F.jsx)(N.a,{className:s.minusItem,color:"primary","aria-label":"upload picture",size:"small",component:"span",onClick:a,children:Object(F.jsx)($n.a,{})})]})}}),Object(F.jsxs)(Nt.a,{component:"fieldset",className:s.formControl,children:[Object(F.jsx)(C.a,{variant:"h6",children:"Categories"}),r.genres&&n.genres&&Object(F.jsx)(C.a,{variant:"caption",style:{color:"#f44336"},children:r.genres}),Object(F.jsx)(nr.a,{row:!0,children:$.map((function(e){return Object(F.jsx)(Tt.a,{classes:{root:s.checkBoxMargins},control:Object(F.jsx)(er.a,{component:rr.a,classes:{root:s.checkBoxMargins},type:"checkbox",name:"genres",value:e,Label:{label:"".concat(e)}})},e)}))})]}),Object(F.jsx)(C.a,{variant:"h6",className:s.formControl,children:"Paid"}),Object(F.jsxs)(er.a,{component:rr.b,name:"paid",row:!0,defaultValue:"no",className:s.formControl,children:[Object(F.jsx)(Tt.a,{value:"yes",control:Object(F.jsx)(At.a,{}),label:"Yes"}),Object(F.jsx)(Tt.a,{value:"no",control:Object(F.jsx)(At.a,{}),label:"No"})]}),Object(F.jsx)(C.a,{variant:"h6",className:s.formControl,children:"Cover photo"}),Object(F.jsx)("div",{className:s.formControl,children:r.files&&n.files&&Object(F.jsx)(C.a,{variant:"caption",style:{color:"#f44336"},children:r.files})}),Object(F.jsx)(vr,{setFieldValue:o,values:t}),Object(F.jsx)(k.a,{color:"primary",variant:"contained",type:"submit",className:s.button,children:"Publish"})]})]})})},ia=function(){var e=Object(f.f)(),t=Object(i.c)((function(e){return e.writer})),r=Object(i.b)(),n=Object(x.a)(["writerAuthCookie"]),a=Object(h.a)(n,3),c=(a[0],a[1],a[2]),o=function(){var n=Object(j.a)(p.a.mark((function n(a){var i,o,s,l,u;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,(i=new FormData).append("file",a.files[0]),n.next=5,Xn.create(i);case 5:return o=n.sent,s=Object(U.a)(Object(U.a)({},a),{},{imageId:o.id}),n.next=9,Ie.create(s);case 9:return l=n.sent,u=Object(U.a)(Object(U.a)({},o),{},{article:l.id}),n.next=13,r(ea(u));case 13:return n.next=15,r(De(l));case 15:return n.next=17,r(ut(l));case 17:r(be("Article created")),e.push("/writerssection/profile/".concat(t.id)),n.next=25;break;case 21:n.prev=21,n.t0=n.catch(0),console.log("error response",n.t0.response),"Unauthorized"===n.t0.response.statusText&&"token expired"===n.t0.response.data.error?(r(fe("You session has expired. Please login again")),r((function(e){e({type:"REMOVE_WRITER",data:null})})),c("writerAuthCookie",{path:"/"}),e.push("/writerssection/login")):r(fe("An error occurred. Please try again"));case 25:case"end":return n.stop()}}),n,null,[[0,21]])})));return function(e){return n.apply(this,arguments)}}();return Object(F.jsx)("div",{children:Object(F.jsx)(er.c,{initialValues:na,validationSchema:aa,onSubmit:o,children:function(e){var t=e.values,r=e.errors,n=e.touched,a=e.handleChange,c=e.handleBlur,i=e.handleSubmit,o=e.setFieldValue;return Object(F.jsx)(ca,{values:t,errors:r,touched:n,handleChange:a,handleBlur:c,handleSubmit:i,setFieldValue:o})}})})},oa="".concat("http://localhost:3001","/api/subscriptions"),sa={getAll:function(){var e=Object(j.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re.a.get(oa);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),deleteMany:function(){var e=Object(j.a)(p.a.mark((function e(t){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re.a.delete(oa,{data:t});case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},la="".concat("http://localhost:3001","/api/reader/refresh"),ua={refreshReader:function(){var e=Object(j.a)(p.a.mark((function e(t){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re.a.post(la,t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},da="".concat("http://localhost:3001","/api/writer/refresh"),pa={refreshWriter:function(){var e=Object(j.a)(p.a.mark((function e(t){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re.a.post(da,t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},ja=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.reader})),r=Object(i.c)((function(e){return e.writer}));Object(n.useEffect)((function(){function t(){return(t=Object(j.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(Ee());case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()})),Object(n.useEffect)((function(){function t(){return(t=Object(j.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(at());case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()})),Object(n.useEffect)((function(){function t(){return(t=Object(j.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(qe());case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()})),Object(n.useEffect)((function(){function t(){return(t=Object(j.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(Zn());case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()})),Object(n.useEffect)((function(){function t(){return(t=Object(j.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(ir());case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()})),Object(n.useEffect)((function(){function t(){return(t=Object(j.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(Vr());case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}));var a=function(){var t=Object(j.a)(p.a.mark((function t(){var r,n,a,c,i;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=72e5,t.next=3,sa.getAll();case 3:if(n=t.sent,a=Date.now()+r,!((c=n.filter((function(e){return e.expirationDate<a}))).length>0)){t.next=12;break}return i=c.map((function(e){return e.id})),t.next=10,sa.deleteMany(c);case 10:e(dt(i)),e($e(i));case 12:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),c=function(){var e=Object(j.a)(p.a.mark((function e(){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={id:t.id},e.next=3,ua.refreshReader(r);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),o=function(){var e=Object(j.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={id:r.id},e.next=3,pa.refreshWriter(t);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return setInterval((function(){a()}),6e4),setInterval((function(){t&&c(),r&&o()}),6e4),Object(F.jsxs)(b.a,{children:[Object(F.jsx)(Oe,{}),Object(F.jsx)(m.a,{children:Object(F.jsxs)(f.c,{children:[Object(F.jsx)(f.a,{exact:!0,path:"/article/:id",children:Object(F.jsx)(Gt,{})}),Object(F.jsx)(f.a,{exact:!0,path:"/genres/:genre",children:Object(F.jsx)(It,{})}),Object(F.jsx)(f.a,{exact:!0,path:"/search/:searchResult",children:Object(F.jsx)(It,{})}),Object(F.jsx)(f.a,{exact:!0,path:"/author/:author",children:Object(F.jsx)(Zt,{})}),Object(F.jsx)(f.a,{exact:!0,path:"/reader/login",children:Object(F.jsx)(Ir,{})}),Object(F.jsx)(f.a,{exact:!0,path:"/reader/signup",children:Object(F.jsx)($r,{})}),Object(F.jsx)(f.a,{exact:!0,path:"/reader/profile/:id",children:Object(F.jsx)(jn,{})}),Object(F.jsx)(f.a,{exact:!0,path:"/writerssection/signup",children:Object(F.jsx)(Tr,{})}),Object(F.jsx)(f.a,{exact:!0,path:"/writerssection/login",children:Object(F.jsx)(Mr,{})}),Object(F.jsx)(f.a,{exact:!0,path:"/writerssection/profile/:id",children:Object(F.jsx)(Hn,{})}),Object(F.jsx)(f.a,{exact:!0,path:"/writerssection/newarticle",children:Object(F.jsx)(ia,{})}),Object(F.jsx)(f.a,{exact:!0,path:"/allwriters",children:Object(F.jsx)(hn,{})}),Object(F.jsx)(f.a,{exact:!0,path:"/",children:Object(F.jsx)(It,{})})]})}),Object(F.jsx)(Br,{})]})},ba=r(201),fa=r(93),ma=r(35),ha=r(198),xa=r.n(ha),Oa=Object(ma.c)({articles:_e,writer:pe,writers:pt,reader:oe,readers:Qe,notification:me,articleImages:ta,writerImages:sr,readerImages:zr}),ga={key:"root",storage:xa.a,blacklist:["articleImages","writerImages","readerImages"]},va=Object(s.a)(ga,Oa),ya=Object(ba.a)({reducer:va,middleware:[fa.a]}),wa=Object(s.b)(ya);c.a.render(Object(F.jsx)(i.a,{store:ya,children:Object(F.jsx)(o.a,{loading:Object(F.jsx)("p",{children:"Loading..."}),persistor:wa,children:Object(F.jsx)(u.a,{children:Object(F.jsx)(l.a,{theme:dr,children:Object(F.jsx)(ja,{})})})})}),document.getElementById("root"))}},[[349,1,2]]]);
//# sourceMappingURL=main.be02dfd2.chunk.js.map